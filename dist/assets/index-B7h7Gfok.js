(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function df(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var mu={exports:{}},vi={},pu={exports:{}},I={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qn=Symbol.for("react.element"),hf=Symbol.for("react.portal"),ff=Symbol.for("react.fragment"),mf=Symbol.for("react.strict_mode"),pf=Symbol.for("react.profiler"),gf=Symbol.for("react.provider"),yf=Symbol.for("react.context"),xf=Symbol.for("react.forward_ref"),vf=Symbol.for("react.suspense"),wf=Symbol.for("react.memo"),bf=Symbol.for("react.lazy"),$l=Symbol.iterator;function _f(e){return e===null||typeof e!="object"?null:(e=$l&&e[$l]||e["@@iterator"],typeof e=="function"?e:null)}var gu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yu=Object.assign,xu={};function Gr(e,t,r){this.props=e,this.context=t,this.refs=xu,this.updater=r||gu}Gr.prototype.isReactComponent={};Gr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vu(){}vu.prototype=Gr.prototype;function Po(e,t,r){this.props=e,this.context=t,this.refs=xu,this.updater=r||gu}var To=Po.prototype=new vu;To.constructor=Po;yu(To,Gr.prototype);To.isPureReactComponent=!0;var Rl=Array.isArray,wu=Object.prototype.hasOwnProperty,Ao={current:null},bu={key:!0,ref:!0,__self:!0,__source:!0};function _u(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)wu.call(t,n)&&!bu.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Qn,type:e,key:i,ref:o,props:s,_owner:Ao.current}}function jf(e,t){return{$$typeof:Qn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qn}function kf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Dl=/\/+/g;function Qi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?kf(""+e.key):t.toString(36)}function Ts(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Qn:case hf:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Qi(o,0):n,Rl(s)?(r="",e!=null&&(r=e.replace(Dl,"$&/")+"/"),Ts(s,t,r,"",function(u){return u})):s!=null&&(Lo(s)&&(s=jf(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Dl,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Rl(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Qi(i,l);o+=Ts(i,t,r,c,s)}else if(c=_f(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Qi(i,l++),o+=Ts(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function os(e,t,r){if(e==null)return e;var n=[],s=0;return Ts(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Nf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ge={current:null},As={transition:null},Sf={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:As,ReactCurrentOwner:Ao};function ju(){throw Error("act(...) is not supported in production builds of React.")}I.Children={map:os,forEach:function(e,t,r){os(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return os(e,function(){t++}),t},toArray:function(e){return os(e,function(t){return t})||[]},only:function(e){if(!Lo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};I.Component=Gr;I.Fragment=ff;I.Profiler=pf;I.PureComponent=Po;I.StrictMode=mf;I.Suspense=vf;I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Sf;I.act=ju;I.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=yu({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Ao.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)wu.call(t,c)&&!bu.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Qn,type:e.type,key:s,ref:i,props:n,_owner:o}};I.createContext=function(e){return e={$$typeof:yf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gf,_context:e},e.Consumer=e};I.createElement=_u;I.createFactory=function(e){var t=_u.bind(null,e);return t.type=e,t};I.createRef=function(){return{current:null}};I.forwardRef=function(e){return{$$typeof:xf,render:e}};I.isValidElement=Lo;I.lazy=function(e){return{$$typeof:bf,_payload:{_status:-1,_result:e},_init:Nf}};I.memo=function(e,t){return{$$typeof:wf,type:e,compare:t===void 0?null:t}};I.startTransition=function(e){var t=As.transition;As.transition={};try{e()}finally{As.transition=t}};I.unstable_act=ju;I.useCallback=function(e,t){return ge.current.useCallback(e,t)};I.useContext=function(e){return ge.current.useContext(e)};I.useDebugValue=function(){};I.useDeferredValue=function(e){return ge.current.useDeferredValue(e)};I.useEffect=function(e,t){return ge.current.useEffect(e,t)};I.useId=function(){return ge.current.useId()};I.useImperativeHandle=function(e,t,r){return ge.current.useImperativeHandle(e,t,r)};I.useInsertionEffect=function(e,t){return ge.current.useInsertionEffect(e,t)};I.useLayoutEffect=function(e,t){return ge.current.useLayoutEffect(e,t)};I.useMemo=function(e,t){return ge.current.useMemo(e,t)};I.useReducer=function(e,t,r){return ge.current.useReducer(e,t,r)};I.useRef=function(e){return ge.current.useRef(e)};I.useState=function(e){return ge.current.useState(e)};I.useSyncExternalStore=function(e,t,r){return ge.current.useSyncExternalStore(e,t,r)};I.useTransition=function(){return ge.current.useTransition()};I.version="18.3.1";pu.exports=I;var w=pu.exports;const Jt=uf(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ef=w,Cf=Symbol.for("react.element"),Pf=Symbol.for("react.fragment"),Tf=Object.prototype.hasOwnProperty,Af=Ef.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lf={key:!0,ref:!0,__self:!0,__source:!0};function ku(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Tf.call(t,n)&&!Lf.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Cf,type:e,key:i,ref:o,props:s,_owner:Af.current}}vi.Fragment=Pf;vi.jsx=ku;vi.jsxs=ku;mu.exports=vi;var a=mu.exports,Nu={exports:{}},Le={},Su={exports:{}},Eu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,R){var M=T.length;T.push(R);e:for(;0<M;){var X=M-1>>>1,ne=T[X];if(0<s(ne,R))T[X]=R,T[M]=ne,M=X;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var R=T[0],M=T.pop();if(M!==R){T[0]=M;e:for(var X=0,ne=T.length,is=ne>>>1;X<is;){var Vt=2*(X+1)-1,Ki=T[Vt],Wt=Vt+1,as=T[Wt];if(0>s(Ki,M))Wt<ne&&0>s(as,Ki)?(T[X]=as,T[Wt]=M,X=Wt):(T[X]=Ki,T[Vt]=M,X=Vt);else if(Wt<ne&&0>s(as,M))T[X]=as,T[Wt]=M,X=Wt;else break e}}return R}function s(T,R){var M=T.sortIndex-R.sortIndex;return M!==0?M:T.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,x=!1,v=!1,k=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(T){for(var R=r(u);R!==null;){if(R.callback===null)n(u);else if(R.startTime<=T)n(u),R.sortIndex=R.expirationTime,t(c,R);else break;R=r(u)}}function b(T){if(v=!1,y(T),!x)if(r(c)!==null)x=!0,en(_);else{var R=r(u);R!==null&&Hi(b,R.startTime-T)}}function _(T,R){x=!1,v&&(v=!1,g(C),C=-1),m=!0;var M=h;try{for(y(R),f=r(c);f!==null&&(!(f.expirationTime>R)||T&&!B());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var ne=X(f.expirationTime<=R);R=e.unstable_now(),typeof ne=="function"?f.callback=ne:f===r(c)&&n(c),y(R)}else n(c);f=r(c)}if(f!==null)var is=!0;else{var Vt=r(u);Vt!==null&&Hi(b,Vt.startTime-R),is=!1}return is}finally{f=null,h=M,m=!1}}var S=!1,j=null,C=-1,A=5,O=-1;function B(){return!(e.unstable_now()-O<A)}function $e(){if(j!==null){var T=e.unstable_now();O=T;var R=!0;try{R=j(!0,T)}finally{R?Ye():(S=!1,j=null)}}else S=!1}var Ye;if(typeof p=="function")Ye=function(){p($e)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,ss=Ne.port2;Ne.port1.onmessage=$e,Ye=function(){ss.postMessage(null)}}else Ye=function(){k($e,0)};function en(T){j=T,S||(S=!0,Ye())}function Hi(T,R){C=k(function(){T(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,en(_))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var M=h;h=R;try{return T()}finally{h=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,R){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var M=h;h=T;try{return R()}finally{h=M}},e.unstable_scheduleCallback=function(T,R,M){var X=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?X+M:X):M=X,T){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=M+ne,T={id:d++,callback:R,priorityLevel:T,startTime:M,expirationTime:ne,sortIndex:-1},M>X?(T.sortIndex=M,t(u,T),r(c)===null&&T===r(u)&&(v?(g(C),C=-1):v=!0,Hi(b,M-X))):(T.sortIndex=ne,t(c,T),x||m||(x=!0,en(_))),T},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(T){var R=h;return function(){var M=h;h=R;try{return T.apply(this,arguments)}finally{h=M}}}})(Eu);Su.exports=Eu;var Of=Su.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f=w,Ae=Of;function N(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Cu=new Set,Pn={};function lr(e,t){zr(e,t),zr(e+"Capture",t)}function zr(e,t){for(Pn[e]=t,e=0;e<t.length;e++)Cu.add(t[e])}var dt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Na=Object.prototype.hasOwnProperty,Rf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ml={},Il={};function Df(e){return Na.call(Il,e)?!0:Na.call(Ml,e)?!1:Rf.test(e)?Il[e]=!0:(Ml[e]=!0,!1)}function Mf(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function If(e,t,r,n){if(t===null||typeof t>"u"||Mf(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ye(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ce={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ce[e]=new ye(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ce[t]=new ye(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ce[e]=new ye(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ce[e]=new ye(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ce[e]=new ye(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ce[e]=new ye(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ce[e]=new ye(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ce[e]=new ye(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ce[e]=new ye(e,5,!1,e.toLowerCase(),null,!1,!1)});var Oo=/[\-:]([a-z])/g;function $o(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Oo,$o);ce[t]=new ye(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Oo,$o);ce[t]=new ye(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Oo,$o);ce[t]=new ye(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ce[e]=new ye(e,1,!1,e.toLowerCase(),null,!1,!1)});ce.xlinkHref=new ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ce[e]=new ye(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ro(e,t,r,n){var s=ce.hasOwnProperty(t)?ce[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(If(t,r,s,n)&&(r=null),n||s===null?Df(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var gt=$f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ls=Symbol.for("react.element"),wr=Symbol.for("react.portal"),br=Symbol.for("react.fragment"),Do=Symbol.for("react.strict_mode"),Sa=Symbol.for("react.profiler"),Pu=Symbol.for("react.provider"),Tu=Symbol.for("react.context"),Mo=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Ca=Symbol.for("react.suspense_list"),Io=Symbol.for("react.memo"),wt=Symbol.for("react.lazy"),Au=Symbol.for("react.offscreen"),zl=Symbol.iterator;function tn(e){return e===null||typeof e!="object"?null:(e=zl&&e[zl]||e["@@iterator"],typeof e=="function"?e:null)}var J=Object.assign,Gi;function fn(e){if(Gi===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Gi=t&&t[1]||""}return`
`+Gi+e}var Ji=!1;function Yi(e,t){if(!e||Ji)return"";Ji=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ji=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?fn(e):""}function zf(e){switch(e.tag){case 5:return fn(e.type);case 16:return fn("Lazy");case 13:return fn("Suspense");case 19:return fn("SuspenseList");case 0:case 2:case 15:return e=Yi(e.type,!1),e;case 11:return e=Yi(e.type.render,!1),e;case 1:return e=Yi(e.type,!0),e;default:return""}}function Pa(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case br:return"Fragment";case wr:return"Portal";case Sa:return"Profiler";case Do:return"StrictMode";case Ea:return"Suspense";case Ca:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Tu:return(e.displayName||"Context")+".Consumer";case Pu:return(e._context.displayName||"Context")+".Provider";case Mo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Io:return t=e.displayName||null,t!==null?t:Pa(e.type)||"Memo";case wt:t=e._payload,e=e._init;try{return Pa(e(t))}catch{}}return null}function Ff(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pa(t);case 8:return t===Do?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Mt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Uf(e){var t=Lu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cs(e){e._valueTracker||(e._valueTracker=Uf(e))}function Ou(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Lu(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ks(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ta(e,t){var r=t.checked;return J({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Fl(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Mt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function $u(e,t){t=t.checked,t!=null&&Ro(e,"checked",t,!1)}function Aa(e,t){$u(e,t);var r=Mt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?La(e,t.type,r):t.hasOwnProperty("defaultValue")&&La(e,t.type,Mt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ul(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function La(e,t,r){(t!=="number"||Ks(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var mn=Array.isArray;function Lr(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Mt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Oa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(N(91));return J({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Bl(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(N(92));if(mn(r)){if(1<r.length)throw Error(N(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Mt(r)}}function Ru(e,t){var r=Mt(t.value),n=Mt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function ql(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Du(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $a(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Du(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var us,Mu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(us=us||document.createElement("div"),us.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=us.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Tn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var xn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bf=["Webkit","ms","Moz","O"];Object.keys(xn).forEach(function(e){Bf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),xn[t]=xn[e]})});function Iu(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||xn.hasOwnProperty(e)&&xn[e]?(""+t).trim():t+"px"}function zu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Iu(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var qf=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ra(e,t){if(t){if(qf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(N(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(N(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(N(61))}if(t.style!=null&&typeof t.style!="object")throw Error(N(62))}}function Da(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ma=null;function zo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ia=null,Or=null,$r=null;function Vl(e){if(e=Yn(e)){if(typeof Ia!="function")throw Error(N(280));var t=e.stateNode;t&&(t=ki(t),Ia(e.stateNode,e.type,t))}}function Fu(e){Or?$r?$r.push(e):$r=[e]:Or=e}function Uu(){if(Or){var e=Or,t=$r;if($r=Or=null,Vl(e),t)for(e=0;e<t.length;e++)Vl(t[e])}}function Bu(e,t){return e(t)}function qu(){}var Xi=!1;function Vu(e,t,r){if(Xi)return e(t,r);Xi=!0;try{return Bu(e,t,r)}finally{Xi=!1,(Or!==null||$r!==null)&&(qu(),Uu())}}function An(e,t){var r=e.stateNode;if(r===null)return null;var n=ki(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(N(231,t,typeof r));return r}var za=!1;if(dt)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){za=!0}}),window.addEventListener("test",rn,rn),window.removeEventListener("test",rn,rn)}catch{za=!1}function Vf(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var vn=!1,Qs=null,Gs=!1,Fa=null,Wf={onError:function(e){vn=!0,Qs=e}};function Hf(e,t,r,n,s,i,o,l,c){vn=!1,Qs=null,Vf.apply(Wf,arguments)}function Kf(e,t,r,n,s,i,o,l,c){if(Hf.apply(this,arguments),vn){if(vn){var u=Qs;vn=!1,Qs=null}else throw Error(N(198));Gs||(Gs=!0,Fa=u)}}function cr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Wu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Wl(e){if(cr(e)!==e)throw Error(N(188))}function Qf(e){var t=e.alternate;if(!t){if(t=cr(e),t===null)throw Error(N(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Wl(s),e;if(i===n)return Wl(s),t;i=i.sibling}throw Error(N(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(N(189))}}if(r.alternate!==n)throw Error(N(190))}if(r.tag!==3)throw Error(N(188));return r.stateNode.current===r?e:t}function Hu(e){return e=Qf(e),e!==null?Ku(e):null}function Ku(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ku(e);if(t!==null)return t;e=e.sibling}return null}var Qu=Ae.unstable_scheduleCallback,Hl=Ae.unstable_cancelCallback,Gf=Ae.unstable_shouldYield,Jf=Ae.unstable_requestPaint,Z=Ae.unstable_now,Yf=Ae.unstable_getCurrentPriorityLevel,Fo=Ae.unstable_ImmediatePriority,Gu=Ae.unstable_UserBlockingPriority,Js=Ae.unstable_NormalPriority,Xf=Ae.unstable_LowPriority,Ju=Ae.unstable_IdlePriority,wi=null,tt=null;function Zf(e){if(tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(wi,e,void 0,(e.current.flags&128)===128)}catch{}}var Qe=Math.clz32?Math.clz32:rm,em=Math.log,tm=Math.LN2;function rm(e){return e>>>=0,e===0?32:31-(em(e)/tm|0)|0}var ds=64,hs=4194304;function pn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ys(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=pn(l):(i&=o,i!==0&&(n=pn(i)))}else o=r&~s,o!==0?n=pn(o):i!==0&&(n=pn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Qe(t),s=1<<r,n|=e[r],t&=~s;return n}function nm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sm(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Qe(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=nm(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Ua(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Yu(){var e=ds;return ds<<=1,!(ds&4194240)&&(ds=64),e}function Zi(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Gn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Qe(t),e[t]=r}function im(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Qe(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Uo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Qe(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var U=0;function Xu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Zu,Bo,ed,td,rd,Ba=!1,fs=[],Pt=null,Tt=null,At=null,Ln=new Map,On=new Map,jt=[],am="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kl(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Ln.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":On.delete(t.pointerId)}}function nn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Yn(t),t!==null&&Bo(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function om(e,t,r,n,s){switch(t){case"focusin":return Pt=nn(Pt,e,t,r,n,s),!0;case"dragenter":return Tt=nn(Tt,e,t,r,n,s),!0;case"mouseover":return At=nn(At,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Ln.set(i,nn(Ln.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,On.set(i,nn(On.get(i)||null,e,t,r,n,s)),!0}return!1}function nd(e){var t=Xt(e.target);if(t!==null){var r=cr(t);if(r!==null){if(t=r.tag,t===13){if(t=Wu(r),t!==null){e.blockedOn=t,rd(e.priority,function(){ed(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ls(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=qa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Ma=n,r.target.dispatchEvent(n),Ma=null}else return t=Yn(r),t!==null&&Bo(t),e.blockedOn=r,!1;t.shift()}return!0}function Ql(e,t,r){Ls(e)&&r.delete(t)}function lm(){Ba=!1,Pt!==null&&Ls(Pt)&&(Pt=null),Tt!==null&&Ls(Tt)&&(Tt=null),At!==null&&Ls(At)&&(At=null),Ln.forEach(Ql),On.forEach(Ql)}function sn(e,t){e.blockedOn===t&&(e.blockedOn=null,Ba||(Ba=!0,Ae.unstable_scheduleCallback(Ae.unstable_NormalPriority,lm)))}function $n(e){function t(s){return sn(s,e)}if(0<fs.length){sn(fs[0],e);for(var r=1;r<fs.length;r++){var n=fs[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Pt!==null&&sn(Pt,e),Tt!==null&&sn(Tt,e),At!==null&&sn(At,e),Ln.forEach(t),On.forEach(t),r=0;r<jt.length;r++)n=jt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<jt.length&&(r=jt[0],r.blockedOn===null);)nd(r),r.blockedOn===null&&jt.shift()}var Rr=gt.ReactCurrentBatchConfig,Xs=!0;function cm(e,t,r,n){var s=U,i=Rr.transition;Rr.transition=null;try{U=1,qo(e,t,r,n)}finally{U=s,Rr.transition=i}}function um(e,t,r,n){var s=U,i=Rr.transition;Rr.transition=null;try{U=4,qo(e,t,r,n)}finally{U=s,Rr.transition=i}}function qo(e,t,r,n){if(Xs){var s=qa(e,t,r,n);if(s===null)ca(e,t,n,Zs,r),Kl(e,n);else if(om(s,e,t,r,n))n.stopPropagation();else if(Kl(e,n),t&4&&-1<am.indexOf(e)){for(;s!==null;){var i=Yn(s);if(i!==null&&Zu(i),i=qa(e,t,r,n),i===null&&ca(e,t,n,Zs,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else ca(e,t,n,null,r)}}var Zs=null;function qa(e,t,r,n){if(Zs=null,e=zo(n),e=Xt(e),e!==null)if(t=cr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Wu(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zs=e,null}function sd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yf()){case Fo:return 1;case Gu:return 4;case Js:case Xf:return 16;case Ju:return 536870912;default:return 16}default:return 16}}var Et=null,Vo=null,Os=null;function id(){if(Os)return Os;var e,t=Vo,r=t.length,n,s="value"in Et?Et.value:Et.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Os=s.slice(e,1<n?1-n:void 0)}function $s(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ms(){return!0}function Gl(){return!1}function Oe(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ms:Gl,this.isPropagationStopped=Gl,this}return J(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ms)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ms)},persist:function(){},isPersistent:ms}),t}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=Oe(Jr),Jn=J({},Jr,{view:0,detail:0}),dm=Oe(Jn),ea,ta,an,bi=J({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ho,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==an&&(an&&e.type==="mousemove"?(ea=e.screenX-an.screenX,ta=e.screenY-an.screenY):ta=ea=0,an=e),ea)},movementY:function(e){return"movementY"in e?e.movementY:ta}}),Jl=Oe(bi),hm=J({},bi,{dataTransfer:0}),fm=Oe(hm),mm=J({},Jn,{relatedTarget:0}),ra=Oe(mm),pm=J({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),gm=Oe(pm),ym=J({},Jr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xm=Oe(ym),vm=J({},Jr,{data:0}),Yl=Oe(vm),wm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_m={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_m[e])?!!t[e]:!1}function Ho(){return jm}var km=J({},Jn,{key:function(e){if(e.key){var t=wm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$s(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ho,charCode:function(e){return e.type==="keypress"?$s(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$s(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nm=Oe(km),Sm=J({},bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xl=Oe(Sm),Em=J({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ho}),Cm=Oe(Em),Pm=J({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tm=Oe(Pm),Am=J({},bi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Lm=Oe(Am),Om=[9,13,27,32],Ko=dt&&"CompositionEvent"in window,wn=null;dt&&"documentMode"in document&&(wn=document.documentMode);var $m=dt&&"TextEvent"in window&&!wn,ad=dt&&(!Ko||wn&&8<wn&&11>=wn),Zl=" ",ec=!1;function od(e,t){switch(e){case"keyup":return Om.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ld(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _r=!1;function Rm(e,t){switch(e){case"compositionend":return ld(t);case"keypress":return t.which!==32?null:(ec=!0,Zl);case"textInput":return e=t.data,e===Zl&&ec?null:e;default:return null}}function Dm(e,t){if(_r)return e==="compositionend"||!Ko&&od(e,t)?(e=id(),Os=Vo=Et=null,_r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ad&&t.locale!=="ko"?null:t.data;default:return null}}var Mm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mm[e.type]:t==="textarea"}function cd(e,t,r,n){Fu(n),t=ei(t,"onChange"),0<t.length&&(r=new Wo("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var bn=null,Rn=null;function Im(e){wd(e,0)}function _i(e){var t=Nr(e);if(Ou(t))return e}function zm(e,t){if(e==="change")return t}var ud=!1;if(dt){var na;if(dt){var sa="oninput"in document;if(!sa){var rc=document.createElement("div");rc.setAttribute("oninput","return;"),sa=typeof rc.oninput=="function"}na=sa}else na=!1;ud=na&&(!document.documentMode||9<document.documentMode)}function nc(){bn&&(bn.detachEvent("onpropertychange",dd),Rn=bn=null)}function dd(e){if(e.propertyName==="value"&&_i(Rn)){var t=[];cd(t,Rn,e,zo(e)),Vu(Im,t)}}function Fm(e,t,r){e==="focusin"?(nc(),bn=t,Rn=r,bn.attachEvent("onpropertychange",dd)):e==="focusout"&&nc()}function Um(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return _i(Rn)}function Bm(e,t){if(e==="click")return _i(t)}function qm(e,t){if(e==="input"||e==="change")return _i(t)}function Vm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Je=typeof Object.is=="function"?Object.is:Vm;function Dn(e,t){if(Je(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Na.call(t,s)||!Je(e[s],t[s]))return!1}return!0}function sc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ic(e,t){var r=sc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sc(r)}}function hd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fd(){for(var e=window,t=Ks();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ks(e.document)}return t}function Qo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Wm(e){var t=fd(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&hd(r.ownerDocument.documentElement,r)){if(n!==null&&Qo(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=ic(r,i);var o=ic(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hm=dt&&"documentMode"in document&&11>=document.documentMode,jr=null,Va=null,_n=null,Wa=!1;function ac(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wa||jr==null||jr!==Ks(n)||(n=jr,"selectionStart"in n&&Qo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_n&&Dn(_n,n)||(_n=n,n=ei(Va,"onSelect"),0<n.length&&(t=new Wo("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=jr)))}function ps(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var kr={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionend:ps("Transition","TransitionEnd")},ia={},md={};dt&&(md=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);function ji(e){if(ia[e])return ia[e];if(!kr[e])return e;var t=kr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in md)return ia[e]=t[r];return e}var pd=ji("animationend"),gd=ji("animationiteration"),yd=ji("animationstart"),xd=ji("transitionend"),vd=new Map,oc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ft(e,t){vd.set(e,t),lr(t,[e])}for(var aa=0;aa<oc.length;aa++){var oa=oc[aa],Km=oa.toLowerCase(),Qm=oa[0].toUpperCase()+oa.slice(1);Ft(Km,"on"+Qm)}Ft(pd,"onAnimationEnd");Ft(gd,"onAnimationIteration");Ft(yd,"onAnimationStart");Ft("dblclick","onDoubleClick");Ft("focusin","onFocus");Ft("focusout","onBlur");Ft(xd,"onTransitionEnd");zr("onMouseEnter",["mouseout","mouseover"]);zr("onMouseLeave",["mouseout","mouseover"]);zr("onPointerEnter",["pointerout","pointerover"]);zr("onPointerLeave",["pointerout","pointerover"]);lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gm=new Set("cancel close invalid load scroll toggle".split(" ").concat(gn));function lc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Kf(n,t,void 0,e),e.currentTarget=null}function wd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;lc(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;lc(s,l,u),i=c}}}if(Gs)throw e=Fa,Gs=!1,Fa=null,e}function W(e,t){var r=t[Ja];r===void 0&&(r=t[Ja]=new Set);var n=e+"__bubble";r.has(n)||(bd(t,e,2,!1),r.add(n))}function la(e,t,r){var n=0;t&&(n|=4),bd(r,e,n,t)}var gs="_reactListening"+Math.random().toString(36).slice(2);function Mn(e){if(!e[gs]){e[gs]=!0,Cu.forEach(function(r){r!=="selectionchange"&&(Gm.has(r)||la(r,!1,e),la(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gs]||(t[gs]=!0,la("selectionchange",!1,t))}}function bd(e,t,r,n){switch(sd(t)){case 1:var s=cm;break;case 4:s=um;break;default:s=qo}r=s.bind(null,t,r,e),s=void 0,!za||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function ca(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Xt(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Vu(function(){var u=i,d=zo(r),f=[];e:{var h=vd.get(e);if(h!==void 0){var m=Wo,x=e;switch(e){case"keypress":if($s(r)===0)break e;case"keydown":case"keyup":m=Nm;break;case"focusin":x="focus",m=ra;break;case"focusout":x="blur",m=ra;break;case"beforeblur":case"afterblur":m=ra;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Jl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=fm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Cm;break;case pd:case gd:case yd:m=gm;break;case xd:m=Tm;break;case"scroll":m=dm;break;case"wheel":m=Lm;break;case"copy":case"cut":case"paste":m=xm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Xl}var v=(t&4)!==0,k=!v&&e==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var p=u,y;p!==null;){y=p;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,g!==null&&(b=An(p,g),b!=null&&v.push(In(p,b,y)))),k)break;p=p.return}0<v.length&&(h=new m(h,x,null,r,d),f.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==Ma&&(x=r.relatedTarget||r.fromElement)&&(Xt(x)||x[ht]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=u,x=x?Xt(x):null,x!==null&&(k=cr(x),x!==k||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=u),m!==x)){if(v=Jl,b="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(v=Xl,b="onPointerLeave",g="onPointerEnter",p="pointer"),k=m==null?h:Nr(m),y=x==null?h:Nr(x),h=new v(b,p+"leave",m,r,d),h.target=k,h.relatedTarget=y,b=null,Xt(d)===u&&(v=new v(g,p+"enter",x,r,d),v.target=y,v.relatedTarget=k,b=v),k=b,m&&x)t:{for(v=m,g=x,p=0,y=v;y;y=pr(y))p++;for(y=0,b=g;b;b=pr(b))y++;for(;0<p-y;)v=pr(v),p--;for(;0<y-p;)g=pr(g),y--;for(;p--;){if(v===g||g!==null&&v===g.alternate)break t;v=pr(v),g=pr(g)}v=null}else v=null;m!==null&&cc(f,h,m,v,!1),x!==null&&k!==null&&cc(f,k,x,v,!0)}}e:{if(h=u?Nr(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var _=zm;else if(tc(h))if(ud)_=qm;else{_=Um;var S=Fm}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=Bm);if(_&&(_=_(e,u))){cd(f,_,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&La(h,"number",h.value)}switch(S=u?Nr(u):window,e){case"focusin":(tc(S)||S.contentEditable==="true")&&(jr=S,Va=u,_n=null);break;case"focusout":_n=Va=jr=null;break;case"mousedown":Wa=!0;break;case"contextmenu":case"mouseup":case"dragend":Wa=!1,ac(f,r,d);break;case"selectionchange":if(Hm)break;case"keydown":case"keyup":ac(f,r,d)}var j;if(Ko)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else _r?od(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(ad&&r.locale!=="ko"&&(_r||C!=="onCompositionStart"?C==="onCompositionEnd"&&_r&&(j=id()):(Et=d,Vo="value"in Et?Et.value:Et.textContent,_r=!0)),S=ei(u,C),0<S.length&&(C=new Yl(C,e,null,r,d),f.push({event:C,listeners:S}),j?C.data=j:(j=ld(r),j!==null&&(C.data=j)))),(j=$m?Rm(e,r):Dm(e,r))&&(u=ei(u,"onBeforeInput"),0<u.length&&(d=new Yl("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=j))}wd(f,t)})}function In(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ei(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=An(e,r),i!=null&&n.unshift(In(e,i,s)),i=An(e,t),i!=null&&n.push(In(e,i,s))),e=e.return}return n}function pr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function cc(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=An(r,i),c!=null&&o.unshift(In(r,c,l))):s||(c=An(r,i),c!=null&&o.push(In(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Jm=/\r\n?/g,Ym=/\u0000|\uFFFD/g;function uc(e){return(typeof e=="string"?e:""+e).replace(Jm,`
`).replace(Ym,"")}function ys(e,t,r){if(t=uc(t),uc(e)!==t&&r)throw Error(N(425))}function ti(){}var Ha=null,Ka=null;function Qa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ga=typeof setTimeout=="function"?setTimeout:void 0,Xm=typeof clearTimeout=="function"?clearTimeout:void 0,dc=typeof Promise=="function"?Promise:void 0,Zm=typeof queueMicrotask=="function"?queueMicrotask:typeof dc<"u"?function(e){return dc.resolve(null).then(e).catch(ep)}:Ga;function ep(e){setTimeout(function(){throw e})}function ua(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),$n(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);$n(t)}function Lt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),et="__reactFiber$"+Yr,zn="__reactProps$"+Yr,ht="__reactContainer$"+Yr,Ja="__reactEvents$"+Yr,tp="__reactListeners$"+Yr,rp="__reactHandles$"+Yr;function Xt(e){var t=e[et];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ht]||r[et]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=hc(e);e!==null;){if(r=e[et])return r;e=hc(e)}return t}e=r,r=e.parentNode}return null}function Yn(e){return e=e[et]||e[ht],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Nr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(N(33))}function ki(e){return e[zn]||null}var Ya=[],Sr=-1;function Ut(e){return{current:e}}function H(e){0>Sr||(e.current=Ya[Sr],Ya[Sr]=null,Sr--)}function V(e,t){Sr++,Ya[Sr]=e.current,e.current=t}var It={},fe=Ut(It),_e=Ut(!1),nr=It;function Fr(e,t){var r=e.type.contextTypes;if(!r)return It;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function je(e){return e=e.childContextTypes,e!=null}function ri(){H(_e),H(fe)}function fc(e,t,r){if(fe.current!==It)throw Error(N(168));V(fe,t),V(_e,r)}function _d(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(N(108,Ff(e)||"Unknown",s));return J({},r,n)}function ni(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||It,nr=fe.current,V(fe,e),V(_e,_e.current),!0}function mc(e,t,r){var n=e.stateNode;if(!n)throw Error(N(169));r?(e=_d(e,t,nr),n.__reactInternalMemoizedMergedChildContext=e,H(_e),H(fe),V(fe,e)):H(_e),V(_e,r)}var ot=null,Ni=!1,da=!1;function jd(e){ot===null?ot=[e]:ot.push(e)}function np(e){Ni=!0,jd(e)}function Bt(){if(!da&&ot!==null){da=!0;var e=0,t=U;try{var r=ot;for(U=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}ot=null,Ni=!1}catch(s){throw ot!==null&&(ot=ot.slice(e+1)),Qu(Fo,Bt),s}finally{U=t,da=!1}}return null}var Er=[],Cr=0,si=null,ii=0,Re=[],De=0,sr=null,lt=1,ct="";function Kt(e,t){Er[Cr++]=ii,Er[Cr++]=si,si=e,ii=t}function kd(e,t,r){Re[De++]=lt,Re[De++]=ct,Re[De++]=sr,sr=e;var n=lt;e=ct;var s=32-Qe(n)-1;n&=~(1<<s),r+=1;var i=32-Qe(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,lt=1<<32-Qe(t)+s|r<<s|n,ct=i+e}else lt=1<<i|r<<s|n,ct=e}function Go(e){e.return!==null&&(Kt(e,1),kd(e,1,0))}function Jo(e){for(;e===si;)si=Er[--Cr],Er[Cr]=null,ii=Er[--Cr],Er[Cr]=null;for(;e===sr;)sr=Re[--De],Re[De]=null,ct=Re[--De],Re[De]=null,lt=Re[--De],Re[De]=null}var Te=null,Ce=null,K=!1,Ke=null;function Nd(e,t){var r=Me(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function pc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Te=e,Ce=Lt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Te=e,Ce=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=sr!==null?{id:lt,overflow:ct}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Me(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Te=e,Ce=null,!0):!1;default:return!1}}function Xa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Za(e){if(K){var t=Ce;if(t){var r=t;if(!pc(e,t)){if(Xa(e))throw Error(N(418));t=Lt(r.nextSibling);var n=Te;t&&pc(e,t)?Nd(n,r):(e.flags=e.flags&-4097|2,K=!1,Te=e)}}else{if(Xa(e))throw Error(N(418));e.flags=e.flags&-4097|2,K=!1,Te=e}}}function gc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Te=e}function xs(e){if(e!==Te)return!1;if(!K)return gc(e),K=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Qa(e.type,e.memoizedProps)),t&&(t=Ce)){if(Xa(e))throw Sd(),Error(N(418));for(;t;)Nd(e,t),t=Lt(t.nextSibling)}if(gc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(N(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ce=Lt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ce=null}}else Ce=Te?Lt(e.stateNode.nextSibling):null;return!0}function Sd(){for(var e=Ce;e;)e=Lt(e.nextSibling)}function Ur(){Ce=Te=null,K=!1}function Yo(e){Ke===null?Ke=[e]:Ke.push(e)}var sp=gt.ReactCurrentBatchConfig;function on(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(N(309));var n=r.stateNode}if(!n)throw Error(N(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(N(284));if(!r._owner)throw Error(N(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(N(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yc(e){var t=e._init;return t(e._payload)}function Ed(e){function t(g,p){if(e){var y=g.deletions;y===null?(g.deletions=[p],g.flags|=16):y.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=Dt(g,p),g.index=0,g.sibling=null,g}function i(g,p,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<p?(g.flags|=2,p):y):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,p,y,b){return p===null||p.tag!==6?(p=xa(y,g.mode,b),p.return=g,p):(p=s(p,y),p.return=g,p)}function c(g,p,y,b){var _=y.type;return _===br?d(g,p,y.props.children,b,y.key):p!==null&&(p.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===wt&&yc(_)===p.type)?(b=s(p,y.props),b.ref=on(g,p,y),b.return=g,b):(b=Us(y.type,y.key,y.props,null,g.mode,b),b.ref=on(g,p,y),b.return=g,b)}function u(g,p,y,b){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=va(y,g.mode,b),p.return=g,p):(p=s(p,y.children||[]),p.return=g,p)}function d(g,p,y,b,_){return p===null||p.tag!==7?(p=rr(y,g.mode,b,_),p.return=g,p):(p=s(p,y),p.return=g,p)}function f(g,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=xa(""+p,g.mode,y),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ls:return y=Us(p.type,p.key,p.props,null,g.mode,y),y.ref=on(g,null,p),y.return=g,y;case wr:return p=va(p,g.mode,y),p.return=g,p;case wt:var b=p._init;return f(g,b(p._payload),y)}if(mn(p)||tn(p))return p=rr(p,g.mode,y,null),p.return=g,p;vs(g,p)}return null}function h(g,p,y,b){var _=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return _!==null?null:l(g,p,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ls:return y.key===_?c(g,p,y,b):null;case wr:return y.key===_?u(g,p,y,b):null;case wt:return _=y._init,h(g,p,_(y._payload),b)}if(mn(y)||tn(y))return _!==null?null:d(g,p,y,b,null);vs(g,y)}return null}function m(g,p,y,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(y)||null,l(p,g,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ls:return g=g.get(b.key===null?y:b.key)||null,c(p,g,b,_);case wr:return g=g.get(b.key===null?y:b.key)||null,u(p,g,b,_);case wt:var S=b._init;return m(g,p,y,S(b._payload),_)}if(mn(b)||tn(b))return g=g.get(y)||null,d(p,g,b,_,null);vs(p,b)}return null}function x(g,p,y,b){for(var _=null,S=null,j=p,C=p=0,A=null;j!==null&&C<y.length;C++){j.index>C?(A=j,j=null):A=j.sibling;var O=h(g,j,y[C],b);if(O===null){j===null&&(j=A);break}e&&j&&O.alternate===null&&t(g,j),p=i(O,p,C),S===null?_=O:S.sibling=O,S=O,j=A}if(C===y.length)return r(g,j),K&&Kt(g,C),_;if(j===null){for(;C<y.length;C++)j=f(g,y[C],b),j!==null&&(p=i(j,p,C),S===null?_=j:S.sibling=j,S=j);return K&&Kt(g,C),_}for(j=n(g,j);C<y.length;C++)A=m(j,g,C,y[C],b),A!==null&&(e&&A.alternate!==null&&j.delete(A.key===null?C:A.key),p=i(A,p,C),S===null?_=A:S.sibling=A,S=A);return e&&j.forEach(function(B){return t(g,B)}),K&&Kt(g,C),_}function v(g,p,y,b){var _=tn(y);if(typeof _!="function")throw Error(N(150));if(y=_.call(y),y==null)throw Error(N(151));for(var S=_=null,j=p,C=p=0,A=null,O=y.next();j!==null&&!O.done;C++,O=y.next()){j.index>C?(A=j,j=null):A=j.sibling;var B=h(g,j,O.value,b);if(B===null){j===null&&(j=A);break}e&&j&&B.alternate===null&&t(g,j),p=i(B,p,C),S===null?_=B:S.sibling=B,S=B,j=A}if(O.done)return r(g,j),K&&Kt(g,C),_;if(j===null){for(;!O.done;C++,O=y.next())O=f(g,O.value,b),O!==null&&(p=i(O,p,C),S===null?_=O:S.sibling=O,S=O);return K&&Kt(g,C),_}for(j=n(g,j);!O.done;C++,O=y.next())O=m(j,g,C,O.value,b),O!==null&&(e&&O.alternate!==null&&j.delete(O.key===null?C:O.key),p=i(O,p,C),S===null?_=O:S.sibling=O,S=O);return e&&j.forEach(function($e){return t(g,$e)}),K&&Kt(g,C),_}function k(g,p,y,b){if(typeof y=="object"&&y!==null&&y.type===br&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case ls:e:{for(var _=y.key,S=p;S!==null;){if(S.key===_){if(_=y.type,_===br){if(S.tag===7){r(g,S.sibling),p=s(S,y.props.children),p.return=g,g=p;break e}}else if(S.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===wt&&yc(_)===S.type){r(g,S.sibling),p=s(S,y.props),p.ref=on(g,S,y),p.return=g,g=p;break e}r(g,S);break}else t(g,S);S=S.sibling}y.type===br?(p=rr(y.props.children,g.mode,b,y.key),p.return=g,g=p):(b=Us(y.type,y.key,y.props,null,g.mode,b),b.ref=on(g,p,y),b.return=g,g=b)}return o(g);case wr:e:{for(S=y.key;p!==null;){if(p.key===S)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){r(g,p.sibling),p=s(p,y.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=va(y,g.mode,b),p.return=g,g=p}return o(g);case wt:return S=y._init,k(g,p,S(y._payload),b)}if(mn(y))return x(g,p,y,b);if(tn(y))return v(g,p,y,b);vs(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(r(g,p.sibling),p=s(p,y),p.return=g,g=p):(r(g,p),p=xa(y,g.mode,b),p.return=g,g=p),o(g)):r(g,p)}return k}var Br=Ed(!0),Cd=Ed(!1),ai=Ut(null),oi=null,Pr=null,Xo=null;function Zo(){Xo=Pr=oi=null}function el(e){var t=ai.current;H(ai),e._currentValue=t}function eo(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Dr(e,t){oi=e,Xo=Pr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(be=!0),e.firstContext=null)}function Fe(e){var t=e._currentValue;if(Xo!==e)if(e={context:e,memoizedValue:t,next:null},Pr===null){if(oi===null)throw Error(N(308));Pr=e,oi.dependencies={lanes:0,firstContext:e}}else Pr=Pr.next=e;return t}var Zt=null;function tl(e){Zt===null?Zt=[e]:Zt.push(e)}function Pd(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,tl(t)):(r.next=s.next,s.next=r),t.interleaved=r,ft(e,n)}function ft(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var bt=!1;function rl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Td(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ut(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ot(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,F&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,ft(e,r)}return s=n.interleaved,s===null?(t.next=t,tl(n)):(t.next=s.next,s.next=t),n.interleaved=t,ft(e,r)}function Rs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Uo(e,r)}}function xc(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function li(e,t,r,n){var s=e.updateQueue;bt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,v=l;switch(h=t,m=r,v.tag){case 1:if(x=v.payload,typeof x=="function"){f=x.call(m,f,h);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=v.payload,h=typeof x=="function"?x.call(m,f,h):x,h==null)break e;f=J({},f,h);break e;case 2:bt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);ar|=o,e.lanes=o,e.memoizedState=f}}function vc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(N(191,s));s.call(n)}}}var Xn={},rt=Ut(Xn),Fn=Ut(Xn),Un=Ut(Xn);function er(e){if(e===Xn)throw Error(N(174));return e}function nl(e,t){switch(V(Un,t),V(Fn,e),V(rt,Xn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$a(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$a(t,e)}H(rt),V(rt,t)}function qr(){H(rt),H(Fn),H(Un)}function Ad(e){er(Un.current);var t=er(rt.current),r=$a(t,e.type);t!==r&&(V(Fn,e),V(rt,r))}function sl(e){Fn.current===e&&(H(rt),H(Fn))}var Q=Ut(0);function ci(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ha=[];function il(){for(var e=0;e<ha.length;e++)ha[e]._workInProgressVersionPrimary=null;ha.length=0}var Ds=gt.ReactCurrentDispatcher,fa=gt.ReactCurrentBatchConfig,ir=0,G=null,te=null,ie=null,ui=!1,jn=!1,Bn=0,ip=0;function ue(){throw Error(N(321))}function al(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Je(e[r],t[r]))return!1;return!0}function ol(e,t,r,n,s,i){if(ir=i,G=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ds.current=e===null||e.memoizedState===null?cp:up,e=r(n,s),jn){i=0;do{if(jn=!1,Bn=0,25<=i)throw Error(N(301));i+=1,ie=te=null,t.updateQueue=null,Ds.current=dp,e=r(n,s)}while(jn)}if(Ds.current=di,t=te!==null&&te.next!==null,ir=0,ie=te=G=null,ui=!1,t)throw Error(N(300));return e}function ll(){var e=Bn!==0;return Bn=0,e}function Ze(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ie===null?G.memoizedState=ie=e:ie=ie.next=e,ie}function Ue(){if(te===null){var e=G.alternate;e=e!==null?e.memoizedState:null}else e=te.next;var t=ie===null?G.memoizedState:ie.next;if(t!==null)ie=t,te=e;else{if(e===null)throw Error(N(310));te=e,e={memoizedState:te.memoizedState,baseState:te.baseState,baseQueue:te.baseQueue,queue:te.queue,next:null},ie===null?G.memoizedState=ie=e:ie=ie.next=e}return ie}function qn(e,t){return typeof t=="function"?t(e):t}function ma(e){var t=Ue(),r=t.queue;if(r===null)throw Error(N(311));r.lastRenderedReducer=e;var n=te,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((ir&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,G.lanes|=d,ar|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Je(n,t.memoizedState)||(be=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,G.lanes|=i,ar|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function pa(e){var t=Ue(),r=t.queue;if(r===null)throw Error(N(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Je(i,t.memoizedState)||(be=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Ld(){}function Od(e,t){var r=G,n=Ue(),s=t(),i=!Je(n.memoizedState,s);if(i&&(n.memoizedState=s,be=!0),n=n.queue,cl(Dd.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||ie!==null&&ie.memoizedState.tag&1){if(r.flags|=2048,Vn(9,Rd.bind(null,r,n,s,t),void 0,null),ae===null)throw Error(N(349));ir&30||$d(r,t,s)}return s}function $d(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=G.updateQueue,t===null?(t={lastEffect:null,stores:null},G.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Rd(e,t,r,n){t.value=r,t.getSnapshot=n,Md(t)&&Id(e)}function Dd(e,t,r){return r(function(){Md(t)&&Id(e)})}function Md(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Je(e,r)}catch{return!0}}function Id(e){var t=ft(e,1);t!==null&&Ge(t,e,1,-1)}function wc(e){var t=Ze();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:e},t.queue=e,e=e.dispatch=lp.bind(null,G,e),[t.memoizedState,e]}function Vn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=G.updateQueue,t===null?(t={lastEffect:null,stores:null},G.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function zd(){return Ue().memoizedState}function Ms(e,t,r,n){var s=Ze();G.flags|=e,s.memoizedState=Vn(1|t,r,void 0,n===void 0?null:n)}function Si(e,t,r,n){var s=Ue();n=n===void 0?null:n;var i=void 0;if(te!==null){var o=te.memoizedState;if(i=o.destroy,n!==null&&al(n,o.deps)){s.memoizedState=Vn(t,r,i,n);return}}G.flags|=e,s.memoizedState=Vn(1|t,r,i,n)}function bc(e,t){return Ms(8390656,8,e,t)}function cl(e,t){return Si(2048,8,e,t)}function Fd(e,t){return Si(4,2,e,t)}function Ud(e,t){return Si(4,4,e,t)}function Bd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qd(e,t,r){return r=r!=null?r.concat([e]):null,Si(4,4,Bd.bind(null,t,e),r)}function ul(){}function Vd(e,t){var r=Ue();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&al(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Wd(e,t){var r=Ue();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&al(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Hd(e,t,r){return ir&21?(Je(r,t)||(r=Yu(),G.lanes|=r,ar|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,be=!0),e.memoizedState=r)}function ap(e,t){var r=U;U=r!==0&&4>r?r:4,e(!0);var n=fa.transition;fa.transition={};try{e(!1),t()}finally{U=r,fa.transition=n}}function Kd(){return Ue().memoizedState}function op(e,t,r){var n=Rt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Qd(e))Gd(t,r);else if(r=Pd(e,t,r,n),r!==null){var s=pe();Ge(r,e,n,s),Jd(r,t,n)}}function lp(e,t,r){var n=Rt(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Qd(e))Gd(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Je(l,o)){var c=t.interleaved;c===null?(s.next=s,tl(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Pd(e,t,s,n),r!==null&&(s=pe(),Ge(r,e,n,s),Jd(r,t,n))}}function Qd(e){var t=e.alternate;return e===G||t!==null&&t===G}function Gd(e,t){jn=ui=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Jd(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Uo(e,r)}}var di={readContext:Fe,useCallback:ue,useContext:ue,useEffect:ue,useImperativeHandle:ue,useInsertionEffect:ue,useLayoutEffect:ue,useMemo:ue,useReducer:ue,useRef:ue,useState:ue,useDebugValue:ue,useDeferredValue:ue,useTransition:ue,useMutableSource:ue,useSyncExternalStore:ue,useId:ue,unstable_isNewReconciler:!1},cp={readContext:Fe,useCallback:function(e,t){return Ze().memoizedState=[e,t===void 0?null:t],e},useContext:Fe,useEffect:bc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ms(4194308,4,Bd.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ms(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ms(4,2,e,t)},useMemo:function(e,t){var r=Ze();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ze();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=op.bind(null,G,e),[n.memoizedState,e]},useRef:function(e){var t=Ze();return e={current:e},t.memoizedState=e},useState:wc,useDebugValue:ul,useDeferredValue:function(e){return Ze().memoizedState=e},useTransition:function(){var e=wc(!1),t=e[0];return e=ap.bind(null,e[1]),Ze().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=G,s=Ze();if(K){if(r===void 0)throw Error(N(407));r=r()}else{if(r=t(),ae===null)throw Error(N(349));ir&30||$d(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,bc(Dd.bind(null,n,i,e),[e]),n.flags|=2048,Vn(9,Rd.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Ze(),t=ae.identifierPrefix;if(K){var r=ct,n=lt;r=(n&~(1<<32-Qe(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Bn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ip++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},up={readContext:Fe,useCallback:Vd,useContext:Fe,useEffect:cl,useImperativeHandle:qd,useInsertionEffect:Fd,useLayoutEffect:Ud,useMemo:Wd,useReducer:ma,useRef:zd,useState:function(){return ma(qn)},useDebugValue:ul,useDeferredValue:function(e){var t=Ue();return Hd(t,te.memoizedState,e)},useTransition:function(){var e=ma(qn)[0],t=Ue().memoizedState;return[e,t]},useMutableSource:Ld,useSyncExternalStore:Od,useId:Kd,unstable_isNewReconciler:!1},dp={readContext:Fe,useCallback:Vd,useContext:Fe,useEffect:cl,useImperativeHandle:qd,useInsertionEffect:Fd,useLayoutEffect:Ud,useMemo:Wd,useReducer:pa,useRef:zd,useState:function(){return pa(qn)},useDebugValue:ul,useDeferredValue:function(e){var t=Ue();return te===null?t.memoizedState=e:Hd(t,te.memoizedState,e)},useTransition:function(){var e=pa(qn)[0],t=Ue().memoizedState;return[e,t]},useMutableSource:Ld,useSyncExternalStore:Od,useId:Kd,unstable_isNewReconciler:!1};function Ve(e,t){if(e&&e.defaultProps){t=J({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function to(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:J({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ei={isMounted:function(e){return(e=e._reactInternals)?cr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=pe(),s=Rt(e),i=ut(n,s);i.payload=t,r!=null&&(i.callback=r),t=Ot(e,i,s),t!==null&&(Ge(t,e,s,n),Rs(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=pe(),s=Rt(e),i=ut(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ot(e,i,s),t!==null&&(Ge(t,e,s,n),Rs(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=pe(),n=Rt(e),s=ut(r,n);s.tag=2,t!=null&&(s.callback=t),t=Ot(e,s,n),t!==null&&(Ge(t,e,n,r),Rs(t,e,n))}};function _c(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Dn(r,n)||!Dn(s,i):!0}function Yd(e,t,r){var n=!1,s=It,i=t.contextType;return typeof i=="object"&&i!==null?i=Fe(i):(s=je(t)?nr:fe.current,n=t.contextTypes,i=(n=n!=null)?Fr(e,s):It),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ei,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function jc(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ei.enqueueReplaceState(t,t.state,null)}function ro(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},rl(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Fe(i):(i=je(t)?nr:fe.current,s.context=Fr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(to(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ei.enqueueReplaceState(s,s.state,null),li(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Vr(e,t){try{var r="",n=t;do r+=zf(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function ga(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function no(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hp=typeof WeakMap=="function"?WeakMap:Map;function Xd(e,t,r){r=ut(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){fi||(fi=!0,mo=n),no(e,t)},r}function Zd(e,t,r){r=ut(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){no(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){no(e,t),typeof n!="function"&&($t===null?$t=new Set([this]):$t.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function kc(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new hp;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Sp.bind(null,e,t,r),t.then(e,e))}function Nc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sc(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ut(-1,1),t.tag=2,Ot(r,t,1))),r.lanes|=1),e)}var fp=gt.ReactCurrentOwner,be=!1;function me(e,t,r,n){t.child=e===null?Cd(t,null,r,n):Br(t,e.child,r,n)}function Ec(e,t,r,n,s){r=r.render;var i=t.ref;return Dr(t,s),n=ol(e,t,r,n,i,s),r=ll(),e!==null&&!be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mt(e,t,s)):(K&&r&&Go(t),t.flags|=1,me(e,t,n,s),t.child)}function Cc(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!xl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,eh(e,t,i,n,s)):(e=Us(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Dn,r(o,n)&&e.ref===t.ref)return mt(e,t,s)}return t.flags|=1,e=Dt(i,n),e.ref=t.ref,e.return=t,t.child=e}function eh(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Dn(i,n)&&e.ref===t.ref)if(be=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(be=!0);else return t.lanes=e.lanes,mt(e,t,s)}return so(e,t,r,n,s)}function th(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},V(Ar,Ee),Ee|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,V(Ar,Ee),Ee|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,V(Ar,Ee),Ee|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,V(Ar,Ee),Ee|=n;return me(e,t,s,r),t.child}function rh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function so(e,t,r,n,s){var i=je(r)?nr:fe.current;return i=Fr(t,i),Dr(t,s),r=ol(e,t,r,n,i,s),n=ll(),e!==null&&!be?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,mt(e,t,s)):(K&&n&&Go(t),t.flags|=1,me(e,t,r,s),t.child)}function Pc(e,t,r,n,s){if(je(r)){var i=!0;ni(t)}else i=!1;if(Dr(t,s),t.stateNode===null)Is(e,t),Yd(t,r,n),ro(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Fe(u):(u=je(r)?nr:fe.current,u=Fr(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&jc(t,o,n,u),bt=!1;var h=t.memoizedState;o.state=h,li(t,n,o,s),c=t.memoizedState,l!==n||h!==c||_e.current||bt?(typeof d=="function"&&(to(t,r,d,n),c=t.memoizedState),(l=bt||_c(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Td(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Ve(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Fe(c):(c=je(r)?nr:fe.current,c=Fr(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&jc(t,o,n,c),bt=!1,h=t.memoizedState,o.state=h,li(t,n,o,s);var x=t.memoizedState;l!==f||h!==x||_e.current||bt?(typeof m=="function"&&(to(t,r,m,n),x=t.memoizedState),(u=bt||_c(t,r,u,n,h,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return io(e,t,r,n,i,s)}function io(e,t,r,n,s,i){rh(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&mc(t,r,!1),mt(e,t,i);n=t.stateNode,fp.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Br(t,e.child,null,i),t.child=Br(t,null,l,i)):me(e,t,l,i),t.memoizedState=n.state,s&&mc(t,r,!0),t.child}function nh(e){var t=e.stateNode;t.pendingContext?fc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&fc(e,t.context,!1),nl(e,t.containerInfo)}function Tc(e,t,r,n,s){return Ur(),Yo(s),t.flags|=256,me(e,t,r,n),t.child}var ao={dehydrated:null,treeContext:null,retryLane:0};function oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function sh(e,t,r){var n=t.pendingProps,s=Q.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),V(Q,s&1),e===null)return Za(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ti(o,n,0,null),e=rr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=oo(r),t.memoizedState=ao,e):dl(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return mp(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Dt(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Dt(l,i):(i=rr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?oo(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=ao,n}return i=e.child,e=i.sibling,n=Dt(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function dl(e,t){return t=Ti({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ws(e,t,r,n){return n!==null&&Yo(n),Br(t,e.child,null,r),e=dl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mp(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=ga(Error(N(422))),ws(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Ti({mode:"visible",children:n.children},s,0,null),i=rr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Br(t,e.child,null,o),t.child.memoizedState=oo(o),t.memoizedState=ao,i);if(!(t.mode&1))return ws(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(N(419)),n=ga(i,n,void 0),ws(e,t,o,n)}if(l=(o&e.childLanes)!==0,be||l){if(n=ae,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ft(e,s),Ge(n,e,s,-1))}return yl(),n=ga(Error(N(421))),ws(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Ep.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ce=Lt(s.nextSibling),Te=t,K=!0,Ke=null,e!==null&&(Re[De++]=lt,Re[De++]=ct,Re[De++]=sr,lt=e.id,ct=e.overflow,sr=t),t=dl(t,n.children),t.flags|=4096,t)}function Ac(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),eo(e.return,t,r)}function ya(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function ih(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(me(e,t,n.children,r),n=Q.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ac(e,r,t);else if(e.tag===19)Ac(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(V(Q,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&ci(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),ya(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ci(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}ya(t,!0,r,null,i);break;case"together":ya(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Is(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function mt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ar|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(N(153));if(t.child!==null){for(e=t.child,r=Dt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Dt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function pp(e,t,r){switch(t.tag){case 3:nh(t),Ur();break;case 5:Ad(t);break;case 1:je(t.type)&&ni(t);break;case 4:nl(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;V(ai,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(V(Q,Q.current&1),t.flags|=128,null):r&t.child.childLanes?sh(e,t,r):(V(Q,Q.current&1),e=mt(e,t,r),e!==null?e.sibling:null);V(Q,Q.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return ih(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),V(Q,Q.current),n)break;return null;case 22:case 23:return t.lanes=0,th(e,t,r)}return mt(e,t,r)}var ah,lo,oh,lh;ah=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};lo=function(){};oh=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,er(rt.current);var i=null;switch(r){case"input":s=Ta(e,s),n=Ta(e,n),i=[];break;case"select":s=J({},s,{value:void 0}),n=J({},n,{value:void 0}),i=[];break;case"textarea":s=Oa(e,s),n=Oa(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ti)}Ra(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pn.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pn.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&W("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};lh=function(e,t,r,n){r!==n&&(t.flags|=4)};function ln(e,t){if(!K)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function de(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function gp(e,t,r){var n=t.pendingProps;switch(Jo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return de(t),null;case 1:return je(t.type)&&ri(),de(t),null;case 3:return n=t.stateNode,qr(),H(_e),H(fe),il(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(xs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ke!==null&&(yo(Ke),Ke=null))),lo(e,t),de(t),null;case 5:sl(t);var s=er(Un.current);if(r=t.type,e!==null&&t.stateNode!=null)oh(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(N(166));return de(t),null}if(e=er(rt.current),xs(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[et]=t,n[zn]=i,e=(t.mode&1)!==0,r){case"dialog":W("cancel",n),W("close",n);break;case"iframe":case"object":case"embed":W("load",n);break;case"video":case"audio":for(s=0;s<gn.length;s++)W(gn[s],n);break;case"source":W("error",n);break;case"img":case"image":case"link":W("error",n),W("load",n);break;case"details":W("toggle",n);break;case"input":Fl(n,i),W("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},W("invalid",n);break;case"textarea":Bl(n,i),W("invalid",n)}Ra(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&ys(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&ys(n.textContent,l,e),s=["children",""+l]):Pn.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&W("scroll",n)}switch(r){case"input":cs(n),Ul(n,i,!0);break;case"textarea":cs(n),ql(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ti)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Du(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[et]=t,e[zn]=n,ah(e,t,!1,!1),t.stateNode=e;e:{switch(o=Da(r,n),r){case"dialog":W("cancel",e),W("close",e),s=n;break;case"iframe":case"object":case"embed":W("load",e),s=n;break;case"video":case"audio":for(s=0;s<gn.length;s++)W(gn[s],e);s=n;break;case"source":W("error",e),s=n;break;case"img":case"image":case"link":W("error",e),W("load",e),s=n;break;case"details":W("toggle",e),s=n;break;case"input":Fl(e,n),s=Ta(e,n),W("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=J({},n,{value:void 0}),W("invalid",e);break;case"textarea":Bl(e,n),s=Oa(e,n),W("invalid",e);break;default:s=n}Ra(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?zu(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Mu(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Tn(e,c):typeof c=="number"&&Tn(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Pn.hasOwnProperty(i)?c!=null&&i==="onScroll"&&W("scroll",e):c!=null&&Ro(e,i,c,o))}switch(r){case"input":cs(e),Ul(e,n,!1);break;case"textarea":cs(e),ql(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Mt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Lr(e,!!n.multiple,i,!1):n.defaultValue!=null&&Lr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ti)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return de(t),null;case 6:if(e&&t.stateNode!=null)lh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(N(166));if(r=er(Un.current),er(rt.current),xs(t)){if(n=t.stateNode,r=t.memoizedProps,n[et]=t,(i=n.nodeValue!==r)&&(e=Te,e!==null))switch(e.tag){case 3:ys(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ys(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[et]=t,t.stateNode=n}return de(t),null;case 13:if(H(Q),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(K&&Ce!==null&&t.mode&1&&!(t.flags&128))Sd(),Ur(),t.flags|=98560,i=!1;else if(i=xs(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(N(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[et]=t}else Ur(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;de(t),i=!1}else Ke!==null&&(yo(Ke),Ke=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Q.current&1?re===0&&(re=3):yl())),t.updateQueue!==null&&(t.flags|=4),de(t),null);case 4:return qr(),lo(e,t),e===null&&Mn(t.stateNode.containerInfo),de(t),null;case 10:return el(t.type._context),de(t),null;case 17:return je(t.type)&&ri(),de(t),null;case 19:if(H(Q),i=t.memoizedState,i===null)return de(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)ln(i,!1);else{if(re!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=ci(e),o!==null){for(t.flags|=128,ln(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return V(Q,Q.current&1|2),t.child}e=e.sibling}i.tail!==null&&Z()>Wr&&(t.flags|=128,n=!0,ln(i,!1),t.lanes=4194304)}else{if(!n)if(e=ci(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ln(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!K)return de(t),null}else 2*Z()-i.renderingStartTime>Wr&&r!==1073741824&&(t.flags|=128,n=!0,ln(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Z(),t.sibling=null,r=Q.current,V(Q,n?r&1|2:r&1),t):(de(t),null);case 22:case 23:return gl(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ee&1073741824&&(de(t),t.subtreeFlags&6&&(t.flags|=8192)):de(t),null;case 24:return null;case 25:return null}throw Error(N(156,t.tag))}function yp(e,t){switch(Jo(t),t.tag){case 1:return je(t.type)&&ri(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return qr(),H(_e),H(fe),il(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return sl(t),null;case 13:if(H(Q),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(N(340));Ur()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return H(Q),null;case 4:return qr(),null;case 10:return el(t.type._context),null;case 22:case 23:return gl(),null;case 24:return null;default:return null}}var bs=!1,he=!1,xp=typeof WeakSet=="function"?WeakSet:Set,P=null;function Tr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Y(e,t,n)}else r.current=null}function co(e,t,r){try{r()}catch(n){Y(e,t,n)}}var Lc=!1;function vp(e,t){if(Ha=Xs,e=fd(),Qo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===s&&(l=o),h===i&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ka={focusedElem:e,selectionRange:r},Xs=!1,P=t;P!==null;)if(t=P,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,P=e;else for(;P!==null;){t=P;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var v=x.memoizedProps,k=x.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:Ve(t.type,v),k);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(b){Y(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,P=e;break}P=t.return}return x=Lc,Lc=!1,x}function kn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&co(t,r,i)}s=s.next}while(s!==n)}}function Ci(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function uo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ch(e){var t=e.alternate;t!==null&&(e.alternate=null,ch(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[et],delete t[zn],delete t[Ja],delete t[tp],delete t[rp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uh(e){return e.tag===5||e.tag===3||e.tag===4}function Oc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||uh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ho(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ti));else if(n!==4&&(e=e.child,e!==null))for(ho(e,t,r),e=e.sibling;e!==null;)ho(e,t,r),e=e.sibling}function fo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(fo(e,t,r),e=e.sibling;e!==null;)fo(e,t,r),e=e.sibling}var oe=null,We=!1;function yt(e,t,r){for(r=r.child;r!==null;)dh(e,t,r),r=r.sibling}function dh(e,t,r){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(wi,r)}catch{}switch(r.tag){case 5:he||Tr(r,t);case 6:var n=oe,s=We;oe=null,yt(e,t,r),oe=n,We=s,oe!==null&&(We?(e=oe,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):oe.removeChild(r.stateNode));break;case 18:oe!==null&&(We?(e=oe,r=r.stateNode,e.nodeType===8?ua(e.parentNode,r):e.nodeType===1&&ua(e,r),$n(e)):ua(oe,r.stateNode));break;case 4:n=oe,s=We,oe=r.stateNode.containerInfo,We=!0,yt(e,t,r),oe=n,We=s;break;case 0:case 11:case 14:case 15:if(!he&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&co(r,t,o),s=s.next}while(s!==n)}yt(e,t,r);break;case 1:if(!he&&(Tr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Y(r,t,l)}yt(e,t,r);break;case 21:yt(e,t,r);break;case 22:r.mode&1?(he=(n=he)||r.memoizedState!==null,yt(e,t,r),he=n):yt(e,t,r);break;default:yt(e,t,r)}}function $c(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new xp),t.forEach(function(n){var s=Cp.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Be(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:oe=l.stateNode,We=!1;break e;case 3:oe=l.stateNode.containerInfo,We=!0;break e;case 4:oe=l.stateNode.containerInfo,We=!0;break e}l=l.return}if(oe===null)throw Error(N(160));dh(i,o,s),oe=null,We=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Y(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hh(t,e),t=t.sibling}function hh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Be(t,e),Xe(e),n&4){try{kn(3,e,e.return),Ci(3,e)}catch(v){Y(e,e.return,v)}try{kn(5,e,e.return)}catch(v){Y(e,e.return,v)}}break;case 1:Be(t,e),Xe(e),n&512&&r!==null&&Tr(r,r.return);break;case 5:if(Be(t,e),Xe(e),n&512&&r!==null&&Tr(r,r.return),e.flags&32){var s=e.stateNode;try{Tn(s,"")}catch(v){Y(e,e.return,v)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&$u(s,i),Da(l,o);var u=Da(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?zu(s,f):d==="dangerouslySetInnerHTML"?Mu(s,f):d==="children"?Tn(s,f):Ro(s,d,f,u)}switch(l){case"input":Aa(s,i);break;case"textarea":Ru(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Lr(s,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?Lr(s,!!i.multiple,i.defaultValue,!0):Lr(s,!!i.multiple,i.multiple?[]:"",!1))}s[zn]=i}catch(v){Y(e,e.return,v)}}break;case 6:if(Be(t,e),Xe(e),n&4){if(e.stateNode===null)throw Error(N(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(v){Y(e,e.return,v)}}break;case 3:if(Be(t,e),Xe(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{$n(t.containerInfo)}catch(v){Y(e,e.return,v)}break;case 4:Be(t,e),Xe(e);break;case 13:Be(t,e),Xe(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(ml=Z())),n&4&&$c(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(he=(u=he)||d,Be(t,e),he=u):Be(t,e),Xe(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(P=e,d=e.child;d!==null;){for(f=P=d;P!==null;){switch(h=P,m=h.child,h.tag){case 0:case 11:case 14:case 15:kn(4,h,h.return);break;case 1:Tr(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(v){Y(n,r,v)}}break;case 5:Tr(h,h.return);break;case 22:if(h.memoizedState!==null){Dc(f);continue}}m!==null?(m.return=h,P=m):Dc(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Iu("display",o))}catch(v){Y(e,e.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Y(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Be(t,e),Xe(e),n&4&&$c(e);break;case 21:break;default:Be(t,e),Xe(e)}}function Xe(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(uh(r)){var n=r;break e}r=r.return}throw Error(N(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Tn(s,""),n.flags&=-33);var i=Oc(e);fo(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Oc(e);ho(e,l,o);break;default:throw Error(N(161))}}catch(c){Y(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wp(e,t,r){P=e,fh(e)}function fh(e,t,r){for(var n=(e.mode&1)!==0;P!==null;){var s=P,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||bs;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||he;l=bs;var u=he;if(bs=o,(he=c)&&!u)for(P=s;P!==null;)o=P,c=o.child,o.tag===22&&o.memoizedState!==null?Mc(s):c!==null?(c.return=o,P=c):Mc(s);for(;i!==null;)P=i,fh(i),i=i.sibling;P=s,bs=l,he=u}Rc(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,P=i):Rc(e)}}function Rc(e){for(;P!==null;){var t=P;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:he||Ci(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!he)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Ve(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&vc(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}vc(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&$n(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}he||t.flags&512&&uo(t)}catch(h){Y(t,t.return,h)}}if(t===e){P=null;break}if(r=t.sibling,r!==null){r.return=t.return,P=r;break}P=t.return}}function Dc(e){for(;P!==null;){var t=P;if(t===e){P=null;break}var r=t.sibling;if(r!==null){r.return=t.return,P=r;break}P=t.return}}function Mc(e){for(;P!==null;){var t=P;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ci(4,t)}catch(c){Y(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Y(t,s,c)}}var i=t.return;try{uo(t)}catch(c){Y(t,i,c)}break;case 5:var o=t.return;try{uo(t)}catch(c){Y(t,o,c)}}}catch(c){Y(t,t.return,c)}if(t===e){P=null;break}var l=t.sibling;if(l!==null){l.return=t.return,P=l;break}P=t.return}}var bp=Math.ceil,hi=gt.ReactCurrentDispatcher,hl=gt.ReactCurrentOwner,Ie=gt.ReactCurrentBatchConfig,F=0,ae=null,ee=null,le=0,Ee=0,Ar=Ut(0),re=0,Wn=null,ar=0,Pi=0,fl=0,Nn=null,ve=null,ml=0,Wr=1/0,it=null,fi=!1,mo=null,$t=null,_s=!1,Ct=null,mi=0,Sn=0,po=null,zs=-1,Fs=0;function pe(){return F&6?Z():zs!==-1?zs:zs=Z()}function Rt(e){return e.mode&1?F&2&&le!==0?le&-le:sp.transition!==null?(Fs===0&&(Fs=Yu()),Fs):(e=U,e!==0||(e=window.event,e=e===void 0?16:sd(e.type)),e):1}function Ge(e,t,r,n){if(50<Sn)throw Sn=0,po=null,Error(N(185));Gn(e,r,n),(!(F&2)||e!==ae)&&(e===ae&&(!(F&2)&&(Pi|=r),re===4&&kt(e,le)),ke(e,n),r===1&&F===0&&!(t.mode&1)&&(Wr=Z()+500,Ni&&Bt()))}function ke(e,t){var r=e.callbackNode;sm(e,t);var n=Ys(e,e===ae?le:0);if(n===0)r!==null&&Hl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Hl(r),t===1)e.tag===0?np(Ic.bind(null,e)):jd(Ic.bind(null,e)),Zm(function(){!(F&6)&&Bt()}),r=null;else{switch(Xu(n)){case 1:r=Fo;break;case 4:r=Gu;break;case 16:r=Js;break;case 536870912:r=Ju;break;default:r=Js}r=bh(r,mh.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function mh(e,t){if(zs=-1,Fs=0,F&6)throw Error(N(327));var r=e.callbackNode;if(Mr()&&e.callbackNode!==r)return null;var n=Ys(e,e===ae?le:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=pi(e,n);else{t=n;var s=F;F|=2;var i=gh();(ae!==e||le!==t)&&(it=null,Wr=Z()+500,tr(e,t));do try{kp();break}catch(l){ph(e,l)}while(!0);Zo(),hi.current=i,F=s,ee!==null?t=0:(ae=null,le=0,t=re)}if(t!==0){if(t===2&&(s=Ua(e),s!==0&&(n=s,t=go(e,s))),t===1)throw r=Wn,tr(e,0),kt(e,n),ke(e,Z()),r;if(t===6)kt(e,n);else{if(s=e.current.alternate,!(n&30)&&!_p(s)&&(t=pi(e,n),t===2&&(i=Ua(e),i!==0&&(n=i,t=go(e,i))),t===1))throw r=Wn,tr(e,0),kt(e,n),ke(e,Z()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(N(345));case 2:Qt(e,ve,it);break;case 3:if(kt(e,n),(n&130023424)===n&&(t=ml+500-Z(),10<t)){if(Ys(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){pe(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Ga(Qt.bind(null,e,ve,it),t);break}Qt(e,ve,it);break;case 4:if(kt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Qe(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=Z()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*bp(n/1960))-n,10<n){e.timeoutHandle=Ga(Qt.bind(null,e,ve,it),n);break}Qt(e,ve,it);break;case 5:Qt(e,ve,it);break;default:throw Error(N(329))}}}return ke(e,Z()),e.callbackNode===r?mh.bind(null,e):null}function go(e,t){var r=Nn;return e.current.memoizedState.isDehydrated&&(tr(e,t).flags|=256),e=pi(e,t),e!==2&&(t=ve,ve=r,t!==null&&yo(t)),e}function yo(e){ve===null?ve=e:ve.push.apply(ve,e)}function _p(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Je(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kt(e,t){for(t&=~fl,t&=~Pi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Qe(t),n=1<<r;e[r]=-1,t&=~n}}function Ic(e){if(F&6)throw Error(N(327));Mr();var t=Ys(e,0);if(!(t&1))return ke(e,Z()),null;var r=pi(e,t);if(e.tag!==0&&r===2){var n=Ua(e);n!==0&&(t=n,r=go(e,n))}if(r===1)throw r=Wn,tr(e,0),kt(e,t),ke(e,Z()),r;if(r===6)throw Error(N(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qt(e,ve,it),ke(e,Z()),null}function pl(e,t){var r=F;F|=1;try{return e(t)}finally{F=r,F===0&&(Wr=Z()+500,Ni&&Bt())}}function or(e){Ct!==null&&Ct.tag===0&&!(F&6)&&Mr();var t=F;F|=1;var r=Ie.transition,n=U;try{if(Ie.transition=null,U=1,e)return e()}finally{U=n,Ie.transition=r,F=t,!(F&6)&&Bt()}}function gl(){Ee=Ar.current,H(Ar)}function tr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Xm(r)),ee!==null)for(r=ee.return;r!==null;){var n=r;switch(Jo(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ri();break;case 3:qr(),H(_e),H(fe),il();break;case 5:sl(n);break;case 4:qr();break;case 13:H(Q);break;case 19:H(Q);break;case 10:el(n.type._context);break;case 22:case 23:gl()}r=r.return}if(ae=e,ee=e=Dt(e.current,null),le=Ee=t,re=0,Wn=null,fl=Pi=ar=0,ve=Nn=null,Zt!==null){for(t=0;t<Zt.length;t++)if(r=Zt[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}Zt=null}return e}function ph(e,t){do{var r=ee;try{if(Zo(),Ds.current=di,ui){for(var n=G.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ui=!1}if(ir=0,ie=te=G=null,jn=!1,Bn=0,hl.current=null,r===null||r.return===null){re=1,Wn=t,ee=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=le,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Nc(o);if(m!==null){m.flags&=-257,Sc(m,o,l,i,t),m.mode&1&&kc(i,u,t),t=m,c=u;var x=t.updateQueue;if(x===null){var v=new Set;v.add(c),t.updateQueue=v}else x.add(c);break e}else{if(!(t&1)){kc(i,u,t),yl();break e}c=Error(N(426))}}else if(K&&l.mode&1){var k=Nc(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Sc(k,o,l,i,t),Yo(Vr(c,l));break e}}i=c=Vr(c,l),re!==4&&(re=2),Nn===null?Nn=[i]:Nn.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Xd(i,c,t);xc(i,g);break e;case 1:l=c;var p=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&($t===null||!$t.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var b=Zd(i,l,t);xc(i,b);break e}}i=i.return}while(i!==null)}xh(r)}catch(_){t=_,ee===r&&r!==null&&(ee=r=r.return);continue}break}while(!0)}function gh(){var e=hi.current;return hi.current=di,e===null?di:e}function yl(){(re===0||re===3||re===2)&&(re=4),ae===null||!(ar&268435455)&&!(Pi&268435455)||kt(ae,le)}function pi(e,t){var r=F;F|=2;var n=gh();(ae!==e||le!==t)&&(it=null,tr(e,t));do try{jp();break}catch(s){ph(e,s)}while(!0);if(Zo(),F=r,hi.current=n,ee!==null)throw Error(N(261));return ae=null,le=0,re}function jp(){for(;ee!==null;)yh(ee)}function kp(){for(;ee!==null&&!Gf();)yh(ee)}function yh(e){var t=wh(e.alternate,e,Ee);e.memoizedProps=e.pendingProps,t===null?xh(e):ee=t,hl.current=null}function xh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=yp(r,t),r!==null){r.flags&=32767,ee=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{re=6,ee=null;return}}else if(r=gp(r,t,Ee),r!==null){ee=r;return}if(t=t.sibling,t!==null){ee=t;return}ee=t=e}while(t!==null);re===0&&(re=5)}function Qt(e,t,r){var n=U,s=Ie.transition;try{Ie.transition=null,U=1,Np(e,t,r,n)}finally{Ie.transition=s,U=n}return null}function Np(e,t,r,n){do Mr();while(Ct!==null);if(F&6)throw Error(N(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(N(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(im(e,i),e===ae&&(ee=ae=null,le=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||_s||(_s=!0,bh(Js,function(){return Mr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ie.transition,Ie.transition=null;var o=U;U=1;var l=F;F|=4,hl.current=null,vp(e,r),hh(r,e),Wm(Ka),Xs=!!Ha,Ka=Ha=null,e.current=r,wp(r),Jf(),F=l,U=o,Ie.transition=i}else e.current=r;if(_s&&(_s=!1,Ct=e,mi=s),i=e.pendingLanes,i===0&&($t=null),Zf(r.stateNode),ke(e,Z()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(fi)throw fi=!1,e=mo,mo=null,e;return mi&1&&e.tag!==0&&Mr(),i=e.pendingLanes,i&1?e===po?Sn++:(Sn=0,po=e):Sn=0,Bt(),null}function Mr(){if(Ct!==null){var e=Xu(mi),t=Ie.transition,r=U;try{if(Ie.transition=null,U=16>e?16:e,Ct===null)var n=!1;else{if(e=Ct,Ct=null,mi=0,F&6)throw Error(N(331));var s=F;for(F|=4,P=e.current;P!==null;){var i=P,o=i.child;if(P.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(P=u;P!==null;){var d=P;switch(d.tag){case 0:case 11:case 15:kn(8,d,i)}var f=d.child;if(f!==null)f.return=d,P=f;else for(;P!==null;){d=P;var h=d.sibling,m=d.return;if(ch(d),d===u){P=null;break}if(h!==null){h.return=m,P=h;break}P=m}}}var x=i.alternate;if(x!==null){var v=x.child;if(v!==null){x.child=null;do{var k=v.sibling;v.sibling=null,v=k}while(v!==null)}}P=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,P=o;else e:for(;P!==null;){if(i=P,i.flags&2048)switch(i.tag){case 0:case 11:case 15:kn(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,P=g;break e}P=i.return}}var p=e.current;for(P=p;P!==null;){o=P;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,P=y;else e:for(o=p;P!==null;){if(l=P,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ci(9,l)}}catch(_){Y(l,l.return,_)}if(l===o){P=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,P=b;break e}P=l.return}}if(F=s,Bt(),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(wi,e)}catch{}n=!0}return n}finally{U=r,Ie.transition=t}}return!1}function zc(e,t,r){t=Vr(r,t),t=Xd(e,t,1),e=Ot(e,t,1),t=pe(),e!==null&&(Gn(e,1,t),ke(e,t))}function Y(e,t,r){if(e.tag===3)zc(e,e,r);else for(;t!==null;){if(t.tag===3){zc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($t===null||!$t.has(n))){e=Vr(r,e),e=Zd(t,e,1),t=Ot(t,e,1),e=pe(),t!==null&&(Gn(t,1,e),ke(t,e));break}}t=t.return}}function Sp(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=pe(),e.pingedLanes|=e.suspendedLanes&r,ae===e&&(le&r)===r&&(re===4||re===3&&(le&130023424)===le&&500>Z()-ml?tr(e,0):fl|=r),ke(e,t)}function vh(e,t){t===0&&(e.mode&1?(t=hs,hs<<=1,!(hs&130023424)&&(hs=4194304)):t=1);var r=pe();e=ft(e,t),e!==null&&(Gn(e,t,r),ke(e,r))}function Ep(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),vh(e,r)}function Cp(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(N(314))}n!==null&&n.delete(t),vh(e,r)}var wh;wh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||_e.current)be=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return be=!1,pp(e,t,r);be=!!(e.flags&131072)}else be=!1,K&&t.flags&1048576&&kd(t,ii,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Is(e,t),e=t.pendingProps;var s=Fr(t,fe.current);Dr(t,r),s=ol(null,t,n,e,s,r);var i=ll();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,je(n)?(i=!0,ni(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,rl(t),s.updater=Ei,t.stateNode=s,s._reactInternals=t,ro(t,n,e,r),t=io(null,t,n,!0,i,r)):(t.tag=0,K&&i&&Go(t),me(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Is(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Tp(n),e=Ve(n,e),s){case 0:t=so(null,t,n,e,r);break e;case 1:t=Pc(null,t,n,e,r);break e;case 11:t=Ec(null,t,n,e,r);break e;case 14:t=Cc(null,t,n,Ve(n.type,e),r);break e}throw Error(N(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ve(n,s),so(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ve(n,s),Pc(e,t,n,s,r);case 3:e:{if(nh(t),e===null)throw Error(N(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Td(e,t),li(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=Vr(Error(N(423)),t),t=Tc(e,t,n,r,s);break e}else if(n!==s){s=Vr(Error(N(424)),t),t=Tc(e,t,n,r,s);break e}else for(Ce=Lt(t.stateNode.containerInfo.firstChild),Te=t,K=!0,Ke=null,r=Cd(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ur(),n===s){t=mt(e,t,r);break e}me(e,t,n,r)}t=t.child}return t;case 5:return Ad(t),e===null&&Za(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Qa(n,s)?o=null:i!==null&&Qa(n,i)&&(t.flags|=32),rh(e,t),me(e,t,o,r),t.child;case 6:return e===null&&Za(t),null;case 13:return sh(e,t,r);case 4:return nl(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Br(t,null,n,r):me(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ve(n,s),Ec(e,t,n,s,r);case 7:return me(e,t,t.pendingProps,r),t.child;case 8:return me(e,t,t.pendingProps.children,r),t.child;case 12:return me(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,V(ai,n._currentValue),n._currentValue=o,i!==null)if(Je(i.value,o)){if(i.children===s.children&&!_e.current){t=mt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ut(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),eo(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(N(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),eo(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}me(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Dr(t,r),s=Fe(s),n=n(s),t.flags|=1,me(e,t,n,r),t.child;case 14:return n=t.type,s=Ve(n,t.pendingProps),s=Ve(n.type,s),Cc(e,t,n,s,r);case 15:return eh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Ve(n,s),Is(e,t),t.tag=1,je(n)?(e=!0,ni(t)):e=!1,Dr(t,r),Yd(t,n,s),ro(t,n,s,r),io(null,t,n,!0,e,r);case 19:return ih(e,t,r);case 22:return th(e,t,r)}throw Error(N(156,t.tag))};function bh(e,t){return Qu(e,t)}function Pp(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Me(e,t,r,n){return new Pp(e,t,r,n)}function xl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tp(e){if(typeof e=="function")return xl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Mo)return 11;if(e===Io)return 14}return 2}function Dt(e,t){var r=e.alternate;return r===null?(r=Me(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Us(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")xl(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case br:return rr(r.children,s,i,t);case Do:o=8,s|=8;break;case Sa:return e=Me(12,r,t,s|2),e.elementType=Sa,e.lanes=i,e;case Ea:return e=Me(13,r,t,s),e.elementType=Ea,e.lanes=i,e;case Ca:return e=Me(19,r,t,s),e.elementType=Ca,e.lanes=i,e;case Au:return Ti(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Pu:o=10;break e;case Tu:o=9;break e;case Mo:o=11;break e;case Io:o=14;break e;case wt:o=16,n=null;break e}throw Error(N(130,e==null?e:typeof e,""))}return t=Me(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function rr(e,t,r,n){return e=Me(7,e,n,t),e.lanes=r,e}function Ti(e,t,r,n){return e=Me(22,e,n,t),e.elementType=Au,e.lanes=r,e.stateNode={isHidden:!1},e}function xa(e,t,r){return e=Me(6,e,null,t),e.lanes=r,e}function va(e,t,r){return t=Me(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ap(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zi(0),this.expirationTimes=Zi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zi(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function vl(e,t,r,n,s,i,o,l,c){return e=new Ap(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Me(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},rl(i),e}function Lp(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function _h(e){if(!e)return It;e=e._reactInternals;e:{if(cr(e)!==e||e.tag!==1)throw Error(N(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(je(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(N(171))}if(e.tag===1){var r=e.type;if(je(r))return _d(e,r,t)}return t}function jh(e,t,r,n,s,i,o,l,c){return e=vl(r,n,!0,e,s,i,o,l,c),e.context=_h(null),r=e.current,n=pe(),s=Rt(r),i=ut(n,s),i.callback=t??null,Ot(r,i,s),e.current.lanes=s,Gn(e,s,n),ke(e,n),e}function Ai(e,t,r,n){var s=t.current,i=pe(),o=Rt(s);return r=_h(r),t.context===null?t.context=r:t.pendingContext=r,t=ut(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ot(s,t,o),e!==null&&(Ge(e,s,o,i),Rs(e,s,o)),o}function gi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function wl(e,t){Fc(e,t),(e=e.alternate)&&Fc(e,t)}function Op(){return null}var kh=typeof reportError=="function"?reportError:function(e){console.error(e)};function bl(e){this._internalRoot=e}Li.prototype.render=bl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(N(409));Ai(e,t,null,null)};Li.prototype.unmount=bl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;or(function(){Ai(null,e,null,null)}),t[ht]=null}};function Li(e){this._internalRoot=e}Li.prototype.unstable_scheduleHydration=function(e){if(e){var t=td();e={blockedOn:null,target:e,priority:t};for(var r=0;r<jt.length&&t!==0&&t<jt[r].priority;r++);jt.splice(r,0,e),r===0&&nd(e)}};function _l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Oi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Uc(){}function $p(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=gi(o);i.call(u)}}var o=jh(t,n,e,0,null,!1,!1,"",Uc);return e._reactRootContainer=o,e[ht]=o.current,Mn(e.nodeType===8?e.parentNode:e),or(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=gi(c);l.call(u)}}var c=vl(e,0,!1,null,null,!1,!1,"",Uc);return e._reactRootContainer=c,e[ht]=c.current,Mn(e.nodeType===8?e.parentNode:e),or(function(){Ai(t,c,r,n)}),c}function $i(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=gi(o);l.call(c)}}Ai(t,o,e,s)}else o=$p(r,t,e,s,n);return gi(o)}Zu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=pn(t.pendingLanes);r!==0&&(Uo(t,r|1),ke(t,Z()),!(F&6)&&(Wr=Z()+500,Bt()))}break;case 13:or(function(){var n=ft(e,1);if(n!==null){var s=pe();Ge(n,e,1,s)}}),wl(e,1)}};Bo=function(e){if(e.tag===13){var t=ft(e,134217728);if(t!==null){var r=pe();Ge(t,e,134217728,r)}wl(e,134217728)}};ed=function(e){if(e.tag===13){var t=Rt(e),r=ft(e,t);if(r!==null){var n=pe();Ge(r,e,t,n)}wl(e,t)}};td=function(){return U};rd=function(e,t){var r=U;try{return U=e,t()}finally{U=r}};Ia=function(e,t,r){switch(t){case"input":if(Aa(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=ki(n);if(!s)throw Error(N(90));Ou(n),Aa(n,s)}}}break;case"textarea":Ru(e,r);break;case"select":t=r.value,t!=null&&Lr(e,!!r.multiple,t,!1)}};Bu=pl;qu=or;var Rp={usingClientEntryPoint:!1,Events:[Yn,Nr,ki,Fu,Uu,pl]},cn={findFiberByHostInstance:Xt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dp={bundleType:cn.bundleType,version:cn.version,rendererPackageName:cn.rendererPackageName,rendererConfig:cn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hu(e),e===null?null:e.stateNode},findFiberByHostInstance:cn.findFiberByHostInstance||Op,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var js=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!js.isDisabled&&js.supportsFiber)try{wi=js.inject(Dp),tt=js}catch{}}Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rp;Le.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_l(t))throw Error(N(200));return Lp(e,t,null,r)};Le.createRoot=function(e,t){if(!_l(e))throw Error(N(299));var r=!1,n="",s=kh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=vl(e,1,!1,null,null,r,!1,n,s),e[ht]=t.current,Mn(e.nodeType===8?e.parentNode:e),new bl(t)};Le.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(N(188)):(e=Object.keys(e).join(","),Error(N(268,e)));return e=Hu(t),e=e===null?null:e.stateNode,e};Le.flushSync=function(e){return or(e)};Le.hydrate=function(e,t,r){if(!Oi(t))throw Error(N(200));return $i(null,e,t,!0,r)};Le.hydrateRoot=function(e,t,r){if(!_l(e))throw Error(N(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=kh;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=jh(t,null,e,1,r??null,s,!1,i,o),e[ht]=t.current,Mn(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Li(t)};Le.render=function(e,t,r){if(!Oi(t))throw Error(N(200));return $i(null,e,t,!1,r)};Le.unmountComponentAtNode=function(e){if(!Oi(e))throw Error(N(40));return e._reactRootContainer?(or(function(){$i(null,null,e,!1,function(){e._reactRootContainer=null,e[ht]=null})}),!0):!1};Le.unstable_batchedUpdates=pl;Le.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Oi(r))throw Error(N(200));if(e==null||e._reactInternals===void 0)throw Error(N(38));return $i(e,t,r,!1,n)};Le.version="18.3.1-next-f1338f8080-20240426";function Nh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Nh)}catch(e){console.error(e)}}Nh(),Nu.exports=Le;var Mp=Nu.exports,Sh,Bc=Mp;Sh=Bc.createRoot,Bc.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ip={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zp=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),$=(e,t)=>{const r=w.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>w.createElement("svg",{ref:d,...Ip,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${zp(e)}`,l].join(" "),...u},[...t.map(([f,h])=>w.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fp=$("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=$("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eh=$("ArrowRightCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=$("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=$("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Up=$("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bp=$("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qp=$("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vp=$("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wp=$("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=$("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=$("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=$("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=$("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=$("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=$("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=$("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kp=$("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=$("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qp=$("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gp=$("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kl=$("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=$("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=$("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jp=$("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=$("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yp=$("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xp=$("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=$("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=$("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=$("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=$("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eg=$("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=$("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=$("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=$("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=$("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=$("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sl=$("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=$("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=$("Stamp",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=$("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=$("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const El=$("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=$("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=$("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=$("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=$("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=$("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=$("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=$("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),dg="modulepreload",hg=function(e){return"/"+e},Vc={},Kr=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=hg(c),c in Vc)return;Vc[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":dg,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},fg=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Kr(async()=>{const{default:n}=await Promise.resolve().then(()=>Xr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Cl extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class mg extends Cl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class pg extends Cl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class gg extends Cl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var vo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(vo||(vo={}));var yg=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class xg{constructor(t,{headers:r={},customFetch:n,region:s=vo.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=fg(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return yg(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(x=>{throw new mg(x)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new pg(d);if(!d.ok)throw new gg(d);let h=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield d.json():h==="application/octet-stream"?m=yield d.blob():h==="text/event-stream"?m=d:h==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}var we={},Pl={},Ii={},ts={},zi={},Fi={},vg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Qr=vg();const wg=Qr.fetch,$h=Qr.fetch.bind(Qr),Rh=Qr.Headers,bg=Qr.Request,_g=Qr.Response,Xr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Rh,Request:bg,Response:_g,default:$h,fetch:wg},Symbol.toStringTag,{value:"Module"})),jg=df(Xr);var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});class kg extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}Ui.default=kg;var Dh=ze&&ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fi,"__esModule",{value:!0});const Ng=Dh(jg),Sg=Dh(Ui);let Eg=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Ng.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,f=null,h=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=g:d=JSON.parse(g))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),k=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&k&&k.length>1&&(f=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const v=await i.text();try{u=JSON.parse(v),Array.isArray(u)&&i.status===404&&(d=[],u=null,h=200,m="OK")}catch{i.status===404&&v===""?(h=204,m="No Content"):u={message:v}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,m="OK"),u&&this.shouldThrowOnError)throw new Sg.default(u)}return{error:u,data:d,count:f,status:h,statusText:m}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}};Fi.default=Eg;var Cg=ze&&ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zi,"__esModule",{value:!0});const Pg=Cg(Fi);let Tg=class extends Pg.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};zi.default=Tg;var Ag=ze&&ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ts,"__esModule",{value:!0});const Lg=Ag(zi);let Og=class extends Lg.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};ts.default=Og;var $g=ze&&ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ii,"__esModule",{value:!0});const un=$g(ts);let Rg=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new un.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new un.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new un.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new un.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new un.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ii.default=Rg;var Bi={},qi={};Object.defineProperty(qi,"__esModule",{value:!0});qi.version=void 0;qi.version="0.0.0-automated";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.DEFAULT_HEADERS=void 0;const Dg=qi;Bi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Dg.version}`};var Mh=ze&&ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pl,"__esModule",{value:!0});const Mg=Mh(Ii),Ig=Mh(ts),zg=Bi;let Fg=class Ih{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},zg.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new Mg.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ih(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Ig.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Pl.default=Fg;var Zr=ze&&ze.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(we,"__esModule",{value:!0});we.PostgrestError=we.PostgrestBuilder=we.PostgrestTransformBuilder=we.PostgrestFilterBuilder=we.PostgrestQueryBuilder=we.PostgrestClient=void 0;const zh=Zr(Pl);we.PostgrestClient=zh.default;const Fh=Zr(Ii);we.PostgrestQueryBuilder=Fh.default;const Uh=Zr(ts);we.PostgrestFilterBuilder=Uh.default;const Bh=Zr(zi);we.PostgrestTransformBuilder=Bh.default;const qh=Zr(Fi);we.PostgrestBuilder=qh.default;const Vh=Zr(Ui);we.PostgrestError=Vh.default;var Ug=we.default={PostgrestClient:zh.default,PostgrestQueryBuilder:Fh.default,PostgrestFilterBuilder:Uh.default,PostgrestTransformBuilder:Bh.default,PostgrestBuilder:qh.default,PostgrestError:Vh.default};const{PostgrestClient:Bg,PostgrestQueryBuilder:xv,PostgrestFilterBuilder:vv,PostgrestTransformBuilder:wv,PostgrestBuilder:bv}=Ug,qg="2.11.2",Vg={"X-Client-Info":`realtime-js/${qg}`},Wg="1.0.0",Wh=1e4,Hg=1e3;var Ir;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ir||(Ir={}));var Se;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Se||(Se={}));var He;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(He||(He={}));var wo;(function(e){e.websocket="websocket"})(wo||(wo={}));var Yt;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Yt||(Yt={}));class Kg{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Hh{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var q;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(q||(q={}));const Wc=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=Qg(o,e,t,s),i),{})},Qg=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?Kh(i,o):bo(o)},Kh=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Xg(t,r)}switch(e){case q.bool:return Gg(t);case q.float4:case q.float8:case q.int2:case q.int4:case q.int8:case q.numeric:case q.oid:return Jg(t);case q.json:case q.jsonb:return Yg(t);case q.timestamp:return Zg(t);case q.abstime:case q.date:case q.daterange:case q.int4range:case q.int8range:case q.money:case q.reltime:case q.text:case q.time:case q.timestamptz:case q.timetz:case q.tsrange:case q.tstzrange:return bo(t);default:return bo(t)}},bo=e=>e,Gg=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Jg=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Yg=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Xg=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Kh(t,l))}return e},Zg=e=>typeof e=="string"?e.replace(" ","T"):e,Qh=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class wa{constructor(t,r,n={},s=Wh){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Hc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Hc||(Hc={}));class En{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=En.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=En.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=En.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(k=>k.presence_ref),m=f.map(k=>k.presence_ref),x=d.filter(k=>m.indexOf(k.presence_ref)<0),v=f.filter(k=>h.indexOf(k.presence_ref)<0);x.length>0&&(l[u]=x),v.length>0&&(c[u]=v)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Kc;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Kc||(Kc={}));var Qc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Qc||(Qc={}));var at;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(at||(at={}));class Tl{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new wa(this,He.join,this.params,this.timeout),this.rejoinTimer=new Hh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Se.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(He.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new En(this),this.broadcastEndpointURL=Qh(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(at.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(at.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(at.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,x=[];for(let v=0;v<m;v++){const k=h[v],{filter:{event:g,schema:p,table:y,filter:b}}=k,_=d&&d[v];if(_&&_.event===g&&_.schema===p&&_.table===y&&_.filter===b)x.push(Object.assign(Object.assign({},k),{id:_.id}));else{this.unsubscribe(),t==null||t(at.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(at.SUBSCRIBED);return}}).receive("error",d=>{t==null||t(at.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(at.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Se.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(He.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new wa(this,He.leave,{},t);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new wa(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=He;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var x,v,k;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((k=(v=m.filter)===null||v===void 0?void 0:v.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var x,v,k,g,p,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const b=m.id,_=(x=m.filter)===null||x===void 0?void 0:x.event;return b&&((v=r.ids)===null||v===void 0?void 0:v.includes(b))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const b=(p=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return b==="*"||b===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const x=h.data,{schema:v,table:k,commit_timestamp:g,type:p,errors:y}=x;h=Object.assign(Object.assign({},{schema:v,table:k,commit_timestamp:g,eventType:p,new:{},old:{},errors:y}),this._getPayloadRecords(x))}m.callback(h,n)})}_isClosed(){return this.state===Se.closed}_isJoined(){return this.state===Se.joined}_isJoining(){return this.state===Se.joining}_isLeaving(){return this.state===Se.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Tl.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(He.close,{},t)}_onError(t){this._on(He.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Se.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Wc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Wc(t.columns,t.old_record)),r}}const e0=()=>{},t0=typeof WebSocket<"u",r0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class n0{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Vg,this.params={},this.timeout=Wh,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=e0,this.conn=null,this.sendBuffer=[],this.serializer=new Kg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Kr(async()=>{const{default:c}=await Promise.resolve().then(()=>Xr);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${wo.websocket}`,this.httpEndpoint=Qh(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Hh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(t0){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new s0(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Kr(async()=>{const{default:t}=await import("./browser-BE1Cz1VN.js").then(r=>r.b);return{default:t}},[]).then(({default:t})=>{this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Wg}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Ir.connecting:return Yt.Connecting;case Ir.open:return Yt.Open;case Ir.closing:return Yt.Closing;default:return Yt.Closed}}isConnected(){return this.connectionState()===Yt.Open}channel(t,r={config:{}}){const n=new Tl(`realtime:${t}`,r,this);return this.channels.push(n),n}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(s=>{r&&s.updateJoinPayload({access_token:r}),s.joinedOnce&&s._isJoined()&&s._push(He.access_token,{access_token:r})})}}async sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(Hg,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:o}=r;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(He.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([r0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class s0{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Ir.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class Al extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function se(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class i0 extends Al{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class _o extends Al{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var a0=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Gh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Kr(async()=>{const{default:n}=await Promise.resolve().then(()=>Xr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},o0=()=>a0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Kr(()=>Promise.resolve().then(()=>Xr),void 0)).Response:Response}),jo=e=>{if(Array.isArray(e))return e.map(r=>jo(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=jo(n)}),t};var dr=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const ba=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),l0=(e,t,r)=>dr(void 0,void 0,void 0,function*(){const n=yield o0();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new i0(ba(s),e.status||500))}).catch(s=>{t(new _o(ba(s),s))}):t(new _o(ba(e),e))}),c0=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function rs(e,t,r,n,s,i){return dr(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,c0(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>l0(c,l,n))})})}function yi(e,t,r,n){return dr(this,void 0,void 0,function*(){return rs(e,"GET",t,r,n)})}function _t(e,t,r,n,s){return dr(this,void 0,void 0,function*(){return rs(e,"POST",t,n,s,r)})}function u0(e,t,r,n,s){return dr(this,void 0,void 0,function*(){return rs(e,"PUT",t,n,s,r)})}function d0(e,t,r,n){return dr(this,void 0,void 0,function*(){return rs(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Jh(e,t,r,n,s){return dr(this,void 0,void 0,function*(){return rs(e,"DELETE",t,n,s,r)})}var xe=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const h0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class f0{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Gh(s)}uploadOrUpdate(t,r,n,s){return xe(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Gc),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(se(i))return{data:null,error:i};throw i}})}upload(t,r,n){return xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return xe(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Gc.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),h=yield f.json();return f.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(se(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return xe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield _t(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Al("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}})}update(t,r,n){return xe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return xe(this,void 0,void 0,function*(){try{return{data:yield _t(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}})}copy(t,r,n){return xe(this,void 0,void 0,function*(){try{return{data:{path:(yield _t(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return xe(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield _t(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return xe(this,void 0,void 0,function*(){try{const s=yield _t(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}})}download(t,r){return xe(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield yi(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(se(l))return{data:null,error:l};throw l}})}info(t){return xe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield yi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:jo(n),error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}})}exists(t){return xe(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield d0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(se(n)&&n instanceof _o){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return xe(this,void 0,void 0,function*(){try{return{data:yield Jh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}})}list(t,r,n){return xe(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},h0),r),{prefix:t||""});return{data:yield _t(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(se(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const m0="2.7.1",p0={"X-Client-Info":`storage-js/${m0}`};var gr=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class g0{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},p0),r),this.fetch=Gh(n)}listBuckets(){return gr(this,void 0,void 0,function*(){try{return{data:yield yi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(se(t))return{data:null,error:t};throw t}})}getBucket(t){return gr(this,void 0,void 0,function*(){try{return{data:yield yi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return gr(this,void 0,void 0,function*(){try{return{data:yield _t(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return gr(this,void 0,void 0,function*(){try{return{data:yield u0(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(se(n))return{data:null,error:n};throw n}})}emptyBucket(t){return gr(this,void 0,void 0,function*(){try{return{data:yield _t(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}})}deleteBucket(t){return gr(this,void 0,void 0,function*(){try{return{data:yield Jh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(se(r))return{data:null,error:r};throw r}})}}class y0 extends g0{constructor(t,r={},n){super(t,r,n)}from(t){return new f0(this.url,this.headers,t,this.fetch)}}const x0="2.47.3";let yn="";typeof Deno<"u"?yn="deno":typeof document<"u"?yn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?yn="react-native":yn="node";const v0={"X-Client-Info":`supabase-js-${yn}/${x0}`},w0={headers:v0},b0={schema:"public"},_0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},j0={};var k0=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const N0=e=>{let t;return e?t=e:typeof fetch>"u"?t=$h:t=fetch,(...r)=>t(...r)},S0=()=>typeof Headers>"u"?Rh:Headers,E0=(e,t,r)=>{const n=N0(r),s=S0();return(i,o)=>k0(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var C0=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function P0(e){return e.replace(/\/$/,"")}function T0(e,t){const{db:r,auth:n,realtime:s,global:i}=e,{db:o,auth:l,realtime:c,global:u}=t,d={db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},l),n),realtime:Object.assign(Object.assign({},c),s),global:Object.assign(Object.assign({},u),i),accessToken:()=>C0(this,void 0,void 0,function*(){return""})};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}const Yh="2.66.1",A0="http://localhost:9999",L0="supabase.auth.token",O0={"X-Client-Info":`gotrue-js/${Yh}`},Jc=10,ko="X-Supabase-Api-Version",Xh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function $0(e){return Math.round(Date.now()/1e3)+e}function R0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const qe=()=>typeof document<"u",Ht={tested:!1,writable:!1},Cn=()=>{if(!qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ht.tested)return Ht.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ht.tested=!0,Ht.writable=!0}catch{Ht.tested=!0,Ht.writable=!1}return Ht.writable};function _a(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const Zh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Kr(async()=>{const{default:n}=await Promise.resolve().then(()=>Xr);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},D0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",ef=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ks=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ns=async(e,t)=>{await e.removeItem(t)};function M0(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r="",n,s,i,o,l,c,u,d=0;for(e=e.replace("-","+").replace("_","/");d<e.length;)o=t.indexOf(e.charAt(d++)),l=t.indexOf(e.charAt(d++)),c=t.indexOf(e.charAt(d++)),u=t.indexOf(e.charAt(d++)),n=o<<2|l>>4,s=(l&15)<<4|c>>2,i=(c&3)<<6|u,r=r+String.fromCharCode(n),c!=64&&s!=0&&(r=r+String.fromCharCode(s)),u!=64&&i!=0&&(r=r+String.fromCharCode(i));return r}class Vi{constructor(){this.promise=new Vi.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Vi.promiseConstructor=Promise;function Yc(e){const t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,r=e.split(".");if(r.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(r[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=r[1];return JSON.parse(M0(n))}async function I0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function z0(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function F0(e){return("0"+e.toString(16)).substr(-2)}function U0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,F0).join("")}async function B0(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}function q0(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function V0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await B0(e);return q0(r)}async function yr(e,t,r=!1){const n=U0();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await ef(e,`${t}-code-verifier`,s);const i=await V0(n);return[i,n===i?"plain":"s256"]}const W0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function H0(e){const t=e.headers.get(ko);if(!t||!t.match(W0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}class Ll extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function D(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class K0 extends Ll{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Q0(e){return D(e)&&e.name==="AuthApiError"}class tf extends Ll{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class hr extends Ll{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class xt extends hr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function G0(e){return D(e)&&e.name==="AuthSessionMissingError"}class ja extends hr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ss extends hr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Es extends hr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function J0(e){return D(e)&&e.name==="AuthImplicitGrantRedirectError"}class Xc extends hr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class No extends hr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ka(e){return D(e)&&e.name==="AuthRetryableFetchError"}class Zc extends hr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}var Y0=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Gt=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),X0=[502,503,504];async function eu(e){var t;if(!D0(e))throw new No(Gt(e),0);if(X0.includes(e.status))throw new No(Gt(e),e.status);let r;try{r=await e.json()}catch(i){throw new tf(Gt(i),i)}let n;const s=H0(e);if(s&&s.getTime()>=Xh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Zc(Gt(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new xt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Zc(Gt(r),e.status,r.weak_password.reasons);throw new K0(Gt(r),e.status||500,n)}const Z0=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function z(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[ko]||(i[ko]=Xh["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await ey(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function ey(e,t,r,n,s,i){const o=Z0(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new No(Gt(c),0)}if(l.ok||await eu(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await eu(c)}}function vt(e){var t;let r=null;sy(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=$0(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function tu(e){const t=vt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Nt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function ty(e){return{data:e,error:null}}function ry(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=Y0(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function ny(e){return e}function sy(e){return e.access_token&&e.refresh_token&&e.expires_in}var iy=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class ay{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Zh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r="global"){try{return await z(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await z(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Nt})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=iy(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await z(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:ry,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(D(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await z(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Nt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await z(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ny});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(x=>{const v=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(x.split(";")[1].split("=")[1]);u[`${k}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(D(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){try{return await z(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Nt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){try{return await z(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Nt})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){try{return await z(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Nt})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){try{const{data:r,error:n}=await z(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(D(r))return{data:null,error:r};throw r}}async _deleteFactor(t){try{return{data:await z(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}}const oy={getItem:e=>Cn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Cn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Cn()&&globalThis.localStorage.removeItem(e)}};function ru(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function ly(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xr={debug:!!(globalThis&&Cn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class rf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class cy extends rf{}async function uy(e,t,r){xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),xr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw xr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new cy(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(xr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}})}ly();const dy={url:A0,storageKey:L0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:O0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},dn=30*1e3,nu=3;async function su(e,t,r){return await r()}class Kn{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Kn.nextInstanceID,Kn.nextInstanceID+=1,this.instanceID>0&&qe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},dy),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new ay({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Zh(s.fetch),this.lock=s.lock||su,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:qe()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=uy:this.lock=su,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Cn()?this.storage=oy:(this.memoryStorage={},this.storage=ru(this.memoryStorage)):(this.memoryStorage={},this.storage=ru(this.memoryStorage)),qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yh}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=qe()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",r),r||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:s}=await this._getSessionFromURL(r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),J0(s)){const l=(t=s.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:i,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return D(r)?{error:r}:{error:new tf("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:vt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(D(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await yr(this.storage,this.storageKey)),i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:x},xform:vt})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await z(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:vt})}else throw new Ss("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(D(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tu})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await z(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tu})}else throw new Ss("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new ja}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async _exchangeCodeForSession(t){const r=await ks(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await z(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:vt});if(await Ns(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new ja}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(D(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await z(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:vt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new ja}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await yr(this.storage,this.storageKey));const{error:f}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await z(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ss("You must provide either an email or phone number.")}catch(l){if(D(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await z(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:vt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(D(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await yr(this.storage,this.storageKey)),await z(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:ty})}catch(i){if(D(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new xt;const{error:s}=await z(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await z(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await z(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ss("You must provide either an email or phone number and a type")}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await ks(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Nt}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new xt}:await z(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Nt})})}catch(r){if(D(r))return G0(r)&&(await this._removeSession(),await Ns(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new xt;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await yr(this.storage,this.storageKey));const{data:u,error:d}=await z(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Nt});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}_decodeJWT(t){return Yc(t)}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new xt;const r=Date.now()/1e3;let n=r,s=!0,i=null;const o=Yc(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(D(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new xt;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(D(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t){try{if(!qe())throw new Es("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Es("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!t)throw new Xc("Not a valid PKCE flow url.");const r=_a(window.location.href);if(t){if(!r.code)throw new Xc("No code detected.");const{data:p,error:y}=await this._exchangeCodeForSession(r.code);if(y)throw y;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:p.session,redirectType:null},error:null}}if(r.error||r.error_description||r.error_code)throw new Es(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=r;if(!i||!l||!o||!u)throw new Es("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=dn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const x=h-f;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,h,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,h,d);const{data:v,error:k}=await this._getUser(i);if(k)throw k;const g={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:r.type},error:null}}catch(r){if(D(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantFlow(){const t=_a(window.location.href);return!!(qe()&&(t.access_token||t.error_description))}async _isPKCEFlow(){const t=_a(window.location.href),r=await ks(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Q0(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ns(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=R0(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await yr(this.storage,this.storageKey,!0));try{return await z(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(D(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await z(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return qe()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(D(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await z(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await z0(async s=>(s>0&&await I0(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await z(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:vt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&ka(i)&&Date.now()+o-n<dn})}catch(n){if(this._debug(r,"error",n),D(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),qe()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await ks(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),i=((t=n.expires_at)!==null&&t!==void 0?t:1/0)<s+Jc;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Jc}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),ka(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new xt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Vi;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new xt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),D(i)){const o={session:null,error:i};return ka(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await ef(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await Ns(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&qe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),dn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/dn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${dn}ms, refresh threshold is ${nu} ticks`),s<=nu&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof rf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await yr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await z(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await z(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(D(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await z(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(D(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}}Kn.nextInstanceID=0;const hy=Kn;class fy extends hy{constructor(t){super(t)}}var my=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class py{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=P0(t);this.realtimeUrl=`${l}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${l}/auth/v1`,this.storageUrl=`${l}/storage/v1`,this.functionsUrl=`${l}/functions/v1`;const c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:b0,realtime:j0,auth:Object.assign(Object.assign({},_0),{storageKey:c}),global:w0},d=T0(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=E0(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Bg(`${l}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new xg(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new y0(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return my(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,d){var f;const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new fy({url:this.authUrl,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:(f="Authorization"in this.headers)!==null&&f!==void 0?f:!1})}_initRealtimeClient(t){return new n0(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const gy=(e,t,r)=>new py(e,t,r),yy={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ6ZWJ4c3JlaW54cXp1YWV1bWxwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzM4NDYzMjksImV4cCI6MjA0OTQyMjMyOX0.qiWAt3FkTIjGi6VG6n5ZAmoYu02x9rmp2I-1iPHQ9Sk",VITE_SUPABASE_URL:"https://rzebxsreinxqzuaeumlp.supabase.co"};function iu(e){return yy[e]||""}const au={url:iu("VITE_SUPABASE_URL"),anonKey:iu("VITE_SUPABASE_ANON_KEY")};class ou extends Error{constructor(t){super(t),this.name="NetworkError"}}function xy(){const e=window.fetch;window.fetch=async(...t)=>{try{const r=await e(...t);if(!r.ok)throw new ou(`HTTP error! status: ${r.status}`);return r}catch(r){throw console.error("Network error:",r),new ou("Network error occurred. Please check your connection.")}}}const L=gy(au.url,au.anonKey,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{"X-Client-Info":"loopify-web"}},db:{schema:"public"}});xy();function Ol(){const[e,t]=w.useState({user:null,isLoading:!0,error:null});w.useEffect(()=>{L.auth.getSession().then(({data:{session:o}})=>{o!=null&&o.user?r(o.user.id):t(l=>({...l,isLoading:!1}))});const{data:{subscription:i}}=L.auth.onAuthStateChange(async(o,l)=>{l!=null&&l.user?r(l.user.id):t({user:null,isLoading:!1,error:null})});return()=>{i.unsubscribe()}},[]);const r=async i=>{try{const{data:o,error:l}=await L.from("users").select("*").eq("id",i).single();if(l)throw l;o&&t({user:o,isLoading:!1,error:null})}catch(o){console.error("Error fetching user profile:",o),t(l=>({...l,isLoading:!1,error:"Error loading user profile"}))}},n=async(i,o)=>{t(l=>({...l,isLoading:!0,error:null}));try{const{data:l,error:c}=await L.auth.signInWithPassword({email:i,password:o});if(c){let u="Invalid email or password";return c.message.includes("Email not confirmed")&&(u="Please verify your email address"),t(d=>({...d,isLoading:!1,error:u})),!1}return l.user?!0:(t(u=>({...u,isLoading:!1,error:"Login failed. Please try again."})),!1)}catch{return t(c=>({...c,isLoading:!1,error:"An unexpected error occurred. Please try again."})),!1}},s=async()=>{try{const{error:i}=await L.auth.signOut();if(i)throw i}catch(i){throw console.error("Logout error:",i),i}};return{user:e.user,isLoading:e.isLoading,error:e.error,login:n,logout:s}}let vy={data:""},wy=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||vy,by=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,_y=/\/\*[^]*?\*\/|  +/g,lu=/\n+/g,St=(e,t)=>{let r="",n="",s="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?St(o,i):i+"{"+St(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=St(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=St.p?St.p(i,o):i+":"+o+";")}return r+(t&&s?t+"{"+s+"}":s)+n},st={},nf=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+nf(e[r]);return t}return e},jy=(e,t,r,n,s)=>{let i=nf(e),o=st[i]||(st[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!st[o]){let c=i!==e?e:(u=>{let d,f,h=[{}];for(;d=by.exec(u.replace(_y,""));)d[4]?h.shift():d[3]?(f=d[3].replace(lu," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][d[1]]=d[2].replace(lu," ").trim();return h[0]})(e);st[o]=St(s?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&st.g?st.g:null;return r&&(st.g=st[o]),((c,u,d,f)=>{f?u.data=u.data.replace(f,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(st[o],t,n,l),o},ky=(e,t,r)=>e.reduce((n,s,i)=>{let o=t[i];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":St(l,""):l===!1?"":l}return n+s+(o??"")},"");function Wi(e){let t=this||{},r=e.call?e(t.p):e;return jy(r.unshift?r.raw?ky(r,[].slice.call(arguments,1),t.p):r.reduce((n,s)=>Object.assign(n,s&&s.call?s(t.p):s),{}):r,wy(t.target),t.g,t.o,t.k)}let sf,So,Eo;Wi.bind({g:1});let pt=Wi.bind({k:1});function Ny(e,t,r,n){St.p=t,sf=e,So=r,Eo=n}function qt(e,t){let r=this||{};return function(){let n=arguments;function s(i,o){let l=Object.assign({},i),c=l.className||s.className;r.p=Object.assign({theme:So&&So()},l),r.o=/ *go\d+/.test(c),l.className=Wi.apply(r,n)+(c?" "+c:"");let u=e;return e[0]&&(u=l.as||e,delete l.as),Eo&&u[0]&&Eo(l),sf(u,l)}return s}}var Sy=e=>typeof e=="function",xi=(e,t)=>Sy(e)?e(t):e,Ey=(()=>{let e=0;return()=>(++e).toString()})(),af=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Cy=20,Vs=new Map,Py=1e3,cu=e=>{if(Vs.has(e))return;let t=setTimeout(()=>{Vs.delete(e),fr({type:4,toastId:e})},Py);Vs.set(e,t)},Ty=e=>{let t=Vs.get(e);t&&clearTimeout(t)},Co=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,Cy)};case 1:return t.toast.id&&Ty(t.toast.id),{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:r}=t;return e.toasts.find(i=>i.id===r.id)?Co(e,{type:1,toast:r}):Co(e,{type:0,toast:r});case 3:let{toastId:n}=t;return n?cu(n):e.toasts.forEach(i=>{cu(i.id)}),{...e,toasts:e.toasts.map(i=>i.id===n||n===void 0?{...i,visible:!1}:i)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+s}))}}},Ws=[],Hs={toasts:[],pausedAt:void 0},fr=e=>{Hs=Co(Hs,e),Ws.forEach(t=>{t(Hs)})},Ay={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ly=(e={})=>{let[t,r]=w.useState(Hs);w.useEffect(()=>(Ws.push(r),()=>{let s=Ws.indexOf(r);s>-1&&Ws.splice(s,1)}),[t]);let n=t.toasts.map(s=>{var i,o;return{...e,...e[s.type],...s,duration:s.duration||((i=e[s.type])==null?void 0:i.duration)||(e==null?void 0:e.duration)||Ay[s.type],style:{...e.style,...(o=e[s.type])==null?void 0:o.style,...s.style}}});return{...t,toasts:n}},Oy=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Ey()}),ns=e=>(t,r)=>{let n=Oy(t,e,r);return fr({type:2,toast:n}),n.id},Pe=(e,t)=>ns("blank")(e,t);Pe.error=ns("error");Pe.success=ns("success");Pe.loading=ns("loading");Pe.custom=ns("custom");Pe.dismiss=e=>{fr({type:3,toastId:e})};Pe.remove=e=>fr({type:4,toastId:e});Pe.promise=(e,t,r)=>{let n=Pe.loading(t.loading,{...r,...r==null?void 0:r.loading});return e.then(s=>(Pe.success(xi(t.success,s),{id:n,...r,...r==null?void 0:r.success}),s)).catch(s=>{Pe.error(xi(t.error,s),{id:n,...r,...r==null?void 0:r.error})}),e};var $y=(e,t)=>{fr({type:1,toast:{id:e,height:t}})},Ry=()=>{fr({type:5,time:Date.now()})},Dy=e=>{let{toasts:t,pausedAt:r}=Ly(e);w.useEffect(()=>{if(r)return;let i=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&Pe.dismiss(l.id);return}return setTimeout(()=>Pe.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,r]);let n=w.useCallback(()=>{r&&fr({type:6,time:Date.now()})},[r]),s=w.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},d=t.filter(m=>(m.position||u)===(i.position||u)&&m.height),f=d.findIndex(m=>m.id===i.id),h=d.filter((m,x)=>x<f&&m.visible).length;return d.filter(m=>m.visible).slice(...l?[h+1]:[0,h]).reduce((m,x)=>m+(x.height||0)+c,0)},[t]);return{toasts:t,handlers:{updateHeight:$y,startPause:Ry,endPause:n,calculateOffset:s}}},My=pt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Iy=pt`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zy=pt`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Fy=qt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${My} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Iy} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${zy} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Uy=pt`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,By=qt("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Uy} 1s linear infinite;
`,qy=pt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Vy=pt`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Wy=qt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${qy} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Vy} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Hy=qt("div")`
  position: absolute;
`,Ky=qt("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Qy=pt`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Gy=qt("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Qy} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Jy=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?w.createElement(Gy,null,t):t:r==="blank"?null:w.createElement(Ky,null,w.createElement(By,{...n}),r!=="loading"&&w.createElement(Hy,null,r==="error"?w.createElement(Fy,{...n}):w.createElement(Wy,{...n})))},Yy=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Xy=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,Zy="0%{opacity:0;} 100%{opacity:1;}",ex="0%{opacity:1;} 100%{opacity:0;}",tx=qt("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,rx=qt("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,nx=(e,t)=>{let r=e.includes("top")?1:-1,[n,s]=af()?[Zy,ex]:[Yy(r),Xy(r)];return{animation:t?`${pt(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${pt(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},sx=w.memo(({toast:e,position:t,style:r,children:n})=>{let s=e.height?nx(e.position||t||"top-center",e.visible):{opacity:0},i=w.createElement(Jy,{toast:e}),o=w.createElement(rx,{...e.ariaProps},xi(e.message,e));return w.createElement(tx,{className:e.className,style:{...s,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):w.createElement(w.Fragment,null,i,o))});Ny(w.createElement);var ix=({id:e,className:t,style:r,onHeightUpdate:n,children:s})=>{let i=w.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return w.createElement("div",{ref:i,className:t,style:r},s)},ax=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},s=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:af()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...s}},ox=Wi`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Cs=16,uu=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:s,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:c}=Dy(r);return w.createElement("div",{style:{position:"fixed",zIndex:9999,top:Cs,left:Cs,right:Cs,bottom:Cs,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||t,f=c.calculateOffset(u,{reverseOrder:e,gutter:n,defaultPosition:t}),h=ax(d,f);return w.createElement(ix,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?ox:"",style:h},u.type==="custom"?xi(u.message,u):s?s(u):w.createElement(sx,{toast:u,position:d}))}))},E=Pe;function lx({onShowLogin:e}){const[t,r]=Jt.useState(!1);return a.jsxs("nav",{className:"fixed top-0 left-0 right-0 bg-white/90 backdrop-blur-md z-50 border-b",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[a.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:a.jsx(Zn,{className:"w-6 h-6 text-white"})}),a.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Loopify"})]}),a.jsx("button",{className:"md:hidden p-2 rounded-lg hover:bg-gray-100",onClick:()=>r(!t),children:t?a.jsx(Mi,{className:"w-6 h-6 text-gray-600"}):a.jsx(Xp,{className:"w-6 h-6 text-gray-600"})}),a.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[a.jsx("a",{href:"#features",className:"text-gray-600 hover:text-gray-900",children:"Features"}),a.jsx("a",{href:"#pricing",className:"text-gray-600 hover:text-gray-900",children:"Pricing"}),a.jsx("a",{href:"#contact",className:"text-gray-600 hover:text-gray-900",children:"Contact"}),a.jsx("button",{onClick:e,className:"px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg",children:"Sign In"}),a.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:opacity-90",children:"Get Started"})]})]})}),t&&a.jsx("div",{className:"md:hidden border-t bg-white",children:a.jsxs("div",{className:"px-4 py-3 space-y-3",children:[a.jsx("a",{href:"#features",className:"block text-gray-600 hover:text-gray-900",children:"Features"}),a.jsx("a",{href:"#pricing",className:"block text-gray-600 hover:text-gray-900",children:"Pricing"}),a.jsx("a",{href:"#contact",className:"block text-gray-600 hover:text-gray-900",children:"Contact"}),a.jsxs("div",{className:"pt-3 border-t space-y-3",children:[a.jsx("button",{onClick:()=>{e(),r(!1)},className:"w-full px-4 py-2 text-blue-600 hover:bg-blue-50 rounded-lg text-left",children:"Sign In"}),a.jsx("button",{className:"w-full px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:opacity-90",children:"Get Started"})]})]})})]})}function cx(){return a.jsxs("div",{className:"relative min-h-[90vh] md:min-h-screen bg-gradient-to-b from-slate-900 to-indigo-900 flex items-center pt-20 md:pt-0",children:[a.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1550305080-4e029753abcf?auto=format&fit=crop&q=80')] bg-cover bg-center opacity-5"}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-32",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-500/10 backdrop-blur-sm text-blue-300 px-4 py-2 rounded-full mb-6",children:[a.jsx(Sl,{className:"w-5 h-5"}),a.jsx("span",{children:"E-commerce Loyalty Platform"})]}),a.jsxs("h1",{className:"text-3xl sm:text-5xl md:text-6xl font-bold text-white mb-8",children:["Pelanggan Beli Berkali-kali",a.jsx("span",{className:"block mt-2 bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent",children:"Dengan Kad Loyalti Digital"})]}),a.jsx("p",{className:"text-lg md:text-xl text-blue-100 mb-8 md:mb-12",children:"Tingkatkan REPEAT ORDER di website anda dengan Kad Loyalti Digital, Sistem Points, Lucky Draw, Whatsapp Blaster - Semua di satu platform."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[a.jsxs("button",{className:"group px-8 py-4 bg-gradient-to-r from-blue-500 to-indigo-500 text-white rounded-lg hover:opacity-90 font-medium inline-flex items-center justify-center gap-2 text-lg",children:["Start Free Trial",a.jsx(Ch,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),a.jsx("button",{className:"px-8 py-4 bg-white/10 text-white hover:bg-white/20 rounded-lg font-medium text-lg backdrop-blur-sm",children:"Hubungi Kami"})]})]}),a.jsxs("div",{className:"relative hidden lg:block",children:[a.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl blur-2xl opacity-30"}),a.jsx("div",{className:"relative bg-white/5 backdrop-blur-sm rounded-2xl p-4 border border-white/10",children:a.jsx("img",{src:"https://da7e222249b86929a6e8d7df12b6e53c.cdn.bubble.io/f1734362922576x583642774442858800/Untitled%20design%20%2815%29.png?_gl=1*40hhnj*_gcl_au*MjA4MjkyMDkxMC4xNzM0MzE5MjM1*_ga*MTI1NDY4NTQ0MS4xNzAzMDgwNTEw*_ga_BFPVR2DEE2*MTczNDM2Mjc5Ny4yNDEuMS4xNzM0MzYyODM3LjIwLjAuMA..?auto=format&fit=crop&q=80",alt:"Loyalty Dashboard",className:"rounded-lg shadow-2xl w-full"})})]})]})})]})}function ux(){const e=[{icon:es,title:"Hilang Customer ",description:"Customer masuk web anda tapi beli dekat website pesaing sebab mereka tawarkan offer yang lebih menarik",stat:"70%",statLabel:"customer cari website yang bagi offer yang menarik dan berbaloi."},{icon:Th,title:"Repeat Sales Rendah",description:"Customer sedia ada lari dan beli di website pesaing menyebabkan kos marketing tinggi.",stat:"5x",statLabel:"ganda lebih mahal untuk cari customer baru berbanding jaga customer sedia ada."},{icon:Hn,title:"Follow-up Secara Manual",description:"Membazir banyak masa sehari untuk hantar Whatsapp kepada customer",stat:"15hrs",statLabel:"dihabiskan dalam seminggu untuk Whatsapp customer"}];return a.jsxs("div",{className:"relative bg-slate-900 py-16 md:py-24",children:[a.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(to_right,#4f46e5_1px,transparent_1px),linear-gradient(to_bottom,#4f46e5_1px,transparent_1px)] bg-[size:4rem_4rem] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_0%,#000_70%,transparent_110%)] opacity-10"}),a.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-8 md:mb-16",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-red-500/10 text-red-400 px-4 py-2 rounded-full mb-6",children:[a.jsx(Fp,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Masalah Utama"})]}),a.jsxs("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:["Anda mesti selalu hadapi masalah ni dalam",a.jsx("span",{className:"block mt-2 bg-gradient-to-r from-red-400 to-orange-400 bg-clip-text text-transparent",children:"Bisnes E-Commerce anda?"})]}),a.jsx("p",{className:"text-lg md:text-xl text-slate-300 max-w-3xl mx-auto",children:'Jangan biarkan masalah ni menghalang anda. Masa untuk buat customer "GILAKAN" kedai anda!'})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:e.map((t,r)=>a.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-8 border border-white/10 hover:bg-white/10 transition-colors",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-red-500/10 rounded-xl mb-6",children:a.jsx(t.icon,{className:"w-6 h-6 text-red-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:t.title}),a.jsx("p",{className:"text-slate-300 mb-6",children:t.description}),a.jsxs("div",{className:"pt-6 border-t border-white/10",children:[a.jsx("div",{className:"text-3xl font-bold text-red-400 mb-1",children:t.stat}),a.jsx("div",{className:"text-sm text-slate-400",children:t.statLabel})]})]},r))})]})]})}function dx(){return a.jsxs("div",{className:"relative bg-gray-50 py-24",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px] opacity-30"}),a.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"text-center mb-16",children:a.jsxs("div",{className:"inline-flex items-center gap-3 bg-blue-50 px-6 py-3 rounded-full mb-6",children:[a.jsx(ig,{className:"w-6 h-6 text-blue-600"}),a.jsx("span",{className:"text-2xl font-bold text-blue-600",children:"Jangan Risau!"})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:["Memperkenalkan Loopify, All-in-One",a.jsx("span",{className:"block mt-2 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Customer Loyalty Platform"})]}),a.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Transform one-time buyers into loyal brand advocates with our powerful suite of loyalty tools and automation features."}),a.jsx("div",{className:"space-y-6",children:[{icon:Sl,title:"Boost Repeat Sales",description:"Digital stamp cards and points rewards incentivize customers to keep coming back"},{icon:es,title:"Build Customer Loyalty",description:"Create meaningful connections through personalized rewards and engagement"},{icon:Zn,title:"Track Everything",description:"Get detailed insights into customer behavior and campaign performance"}].map((e,t)=>a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-12 h-12 bg-blue-50 rounded-xl flex items-center justify-center",children:a.jsx(e.icon,{className:"w-6 h-6 text-blue-600"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:e.title}),a.jsx("p",{className:"text-gray-600",children:e.description})]})]},t))})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -inset-4 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl blur-2xl opacity-20"}),a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-200",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-600 p-8 text-white",children:[a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Dashboard Overview"}),a.jsx("p",{className:"text-blue-100",children:"Real-time insights at your fingertips"})]}),a.jsxs("div",{className:"p-8",children:[a.jsx("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[{label:"Active Customers",value:"1,234"},{label:"Total Points Issued",value:"45.6K"},{label:"Stamps Collected",value:"789"},{label:"Repeat Purchase Rate",value:"+27%"}].map((e,t)=>a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:e.value}),a.jsx("div",{className:"text-sm text-gray-600",children:e.label})]},t))}),a.jsx("div",{className:"space-y-4",children:[...Array(3)].map((e,t)=>a.jsx("div",{className:"h-4 bg-gray-100 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-blue-600 to-indigo-600",style:{width:`${85-t*20}%`}})},t))})]})]})]})]})]})]})}function hx(){const e=[{icon:Hr,title:"Digital Stamp Cards",description:"Replace physical stamp cards with a digital solution. Customers earn stamps with every purchase.",image:"https://da7e222249b86929a6e8d7df12b6e53c.cdn.bubble.io/f1734363952048x897568228443306200/Untitled%20design%20%2817%29.png?_gl=1*rthfci*_gcl_au*MjA4MjkyMDkxMC4xNzM0MzE5MjM1*_ga*MTI1NDY4NTQ0MS4xNzAzMDgwNTEw*_ga_BFPVR2DEE2*MTczNDM2Mjc5Ny4yNDEuMS4xNzM0MzYyODM3LjIwLjAuMA..?auto=format&fit=crop&q=80"},{icon:jl,title:"Points System",description:"Reward customers with points for every purchase that they can redeem for discounts.",image:"https://da7e222249b86929a6e8d7df12b6e53c.cdn.bubble.io/f1734364487525x959118896993393000/Untitled%20design%20%2818%29.png?_gl=1*1clsuni*_gcl_au*MjA4MjkyMDkxMC4xNzM0MzE5MjM1*_ga*MTI1NDY4NTQ0MS4xNzAzMDgwNTEw*_ga_BFPVR2DEE2*MTczNDM2Mjc5Ny4yNDEuMS4xNzM0MzYyODM3LjIwLjAuMA..?auto=format&fit=crop&q=80"},{icon:Ri,title:"Lucky Draws",description:"Run exciting lucky draw campaigns to engage customers and drive repeat purchases.",image:"https://da7e222249b86929a6e8d7df12b6e53c.cdn.bubble.io/f1734364888382x698249194395321100/Untitled%20design%20%2819%29.png?_gl=1*18n4h2d*_gcl_au*MjA4MjkyMDkxMC4xNzM0MzE5MjM1*_ga*MTI1NDY4NTQ0MS4xNzAzMDgwNTEw*_ga_BFPVR2DEE2*MTczNDM2Mjc5Ny4yNDEuMS4xNzM0MzYyODM3LjIwLjAuMA..?auto=format&fit=crop&q=80"},{icon:zt,title:"WhatsApp Blaster",description:"Send bulk WhatsApp messages to your customers for promotions, updates, and announcements.",image:"https://images.unsplash.com/photo-1611746872915-64382b5c76da?auto=format&fit=crop&q=80"},{icon:Eh,title:"WhatsApp Auto-followup",description:"Automatically follow up with customers after purchases, abandoned carts, or special events.",image:"https://images.unsplash.com/photo-1577563908411-5077b6dc7624?auto=format&fit=crop&q=80"}];return a.jsxs("div",{className:"relative bg-white py-16 md:py-24 border-t border-gray-100",children:[a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(#e5e7eb_1px,transparent_1px)] [background-size:16px_16px] opacity-30"}),a.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-8 md:mb-16",children:[a.jsx("div",{className:"inline-block bg-blue-50 px-4 py-2 rounded-full mb-4",children:a.jsx("span",{className:"text-blue-600 font-medium",children:"Core Features"})}),a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-6",children:"Everything You Need to Build Customer Loyalty"}),a.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:"A complete suite of tools to create, manage and grow your customer loyalty program"})]}),a.jsx("div",{className:"grid grid-cols-1 gap-12 md:gap-16",children:e.map((t,r)=>a.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-2 gap-8 md:gap-12 items-center ${r%2===1?"lg:flex-row-reverse":"lg:flex-row"}`,children:[a.jsxs("div",{children:[a.jsxs("div",{className:"inline-flex items-center gap-2 bg-blue-50 text-blue-600 px-4 py-2 rounded-full mb-6",children:[a.jsx(t.icon,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:t.title})]}),a.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-6",children:t.description}),t.title==="WhatsApp Blaster"&&a.jsxs("div",{className:"space-y-4 text-lg text-gray-600",children:[a.jsx("p",{children:"• Send personalized bulk messages"}),a.jsx("p",{children:"• Schedule messages for optimal timing"}),a.jsx("p",{children:"• Track message delivery and open rates"}),a.jsx("p",{children:"• Filter customers by purchase history"})]}),t.title==="WhatsApp Auto-followup"&&a.jsxs("div",{className:"space-y-4 text-lg text-gray-600",children:[a.jsx("p",{children:"• Automated order confirmations"}),a.jsx("p",{children:"• Abandoned cart recovery messages"}),a.jsx("p",{children:"• Post-purchase feedback requests"}),a.jsx("p",{children:"• Re-engagement campaigns"})]})]}),a.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-50 p-8 rounded-2xl",children:a.jsx("img",{src:t.image,alt:t.title,className:"rounded-xl shadow-2xl w-full"})})]},r))}),a.jsx("div",{className:"mt-16 md:mt-24 grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8",children:[{icon:es,value:"10,000+",label:"Active Users"},{icon:Zn,value:"RM500K+",label:"Sales Generated"},{icon:zt,value:"98%",label:"Customer Satisfaction"}].map((t,r)=>a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-50 rounded-2xl mb-4",children:a.jsx(t.icon,{className:"w-8 h-8 text-blue-600"})}),a.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-2",children:t.value}),a.jsx("div",{className:"text-gray-600",children:t.label})]},r))})]})]})}const fx=[{name:"Sarah Chen",role:"Owner, Beauty Haven",image:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?auto=format&fit=crop&q=80",content:"Since implementing Loopify's digital stamp cards, our customer retention has increased by 40%. The system is incredibly easy to use and our customers love it!",rating:5},{name:"David Wong",role:"CEO, Urban Cafe Group",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&q=80",content:"The points system has transformed how we reward our loyal customers. We've seen a 25% increase in repeat visits since launching our rewards program with Loopify.",rating:5},{name:"Lisa Rahman",role:"Marketing Director, Fashion Boutique",image:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&q=80",content:"Our lucky draw campaigns are a huge hit! The automated system saves us hours of work, and customers are excited about the chance to win. It's a win-win.",rating:5}];function mx(){return a.jsx("div",{className:"bg-gray-50 py-24",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("div",{className:"inline-block bg-blue-50 px-4 py-2 rounded-full mb-4",children:a.jsx("span",{className:"text-blue-600 font-medium",children:"Success Stories"})}),a.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-6",children:"Trusted by Leading Businesses"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"See how businesses are transforming their customer loyalty programs with Loopify"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:fx.map((e,t)=>a.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("img",{src:e.image,alt:e.name,className:"w-16 h-16 rounded-full object-cover"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.name}),a.jsx("p",{className:"text-gray-600 text-sm",children:e.role})]})]}),a.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(e.rating)].map((r,n)=>a.jsx(ag,{className:"w-5 h-5 text-yellow-400 fill-current"},n))}),a.jsxs("p",{className:"text-gray-600 italic",children:['"',e.content,'"']})]},t))})]})})}const px=[{name:"Basic",price:"49",features:["1 Store Location","Digital Stamp Cards","WhatsApp Notifications","Basic Analytics","Email Support"]},{name:"Premium",price:"149",popular:!0,features:["3 Store Locations","All Basic Features","Points Rewards","Lucky Draws","Advanced Analytics","Priority Support"]},{name:"Enterprise",price:"399",features:["6 Store Locations","All Premium Features","API Integration","Custom Branding","Account Manager","24/7 Support"]}];function gx(){return a.jsx("div",{className:"py-20 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Choose Your Perfect Plan"}),a.jsx("p",{className:"text-lg text-gray-600",children:"Affordable pricing for businesses of all sizes"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:px.map((e,t)=>a.jsxs("div",{className:`relative bg-white rounded-xl ${e.popular?"shadow-xl ring-2 ring-blue-600":"shadow-sm border border-gray-200"}`,children:[e.popular&&a.jsx("div",{className:"absolute -top-4 left-0 right-0 flex justify-center",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-1 rounded-full text-sm font-medium",children:"Popular"})}),a.jsxs("div",{className:"p-8",children:[a.jsx("h3",{className:"text-xl font-semibold mb-2",children:e.name}),a.jsxs("div",{className:"flex items-baseline gap-1 mb-6",children:[a.jsxs("span",{className:"text-4xl font-bold",children:["RM",e.price]}),a.jsx("span",{className:"text-gray-500",children:"/month"})]}),a.jsx("ul",{className:"space-y-4 mb-8",children:e.features.map((r,n)=>a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Vp,{className:`w-5 h-5 ${e.popular?"text-blue-600":"text-green-500"}`}),a.jsx("span",{children:r})]},n))}),a.jsx("button",{className:`w-full py-3 rounded-lg font-medium ${e.popular?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:opacity-90":"border-2 border-blue-600 text-blue-600 hover:bg-blue-50"}`,children:"Get Started"})]})]},t))})]})})}function yx(){return a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 py-16",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Get Started?"}),a.jsx("p",{className:"text-lg text-blue-100 mb-8 max-w-2xl mx-auto",children:"Sign up today and launch your customer loyalty program in just 5 minutes."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsxs("button",{className:"group px-8 py-4 bg-white text-blue-600 rounded-lg hover:bg-blue-50 font-medium inline-flex items-center justify-center gap-2",children:["Start 14-Day Free Trial",a.jsx(Ch,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),a.jsx("button",{className:"px-8 py-4 text-white border-2 border-white/20 hover:bg-white/10 rounded-lg font-medium",children:"Contact Sales"})]})]})})}function xx(){return a.jsx("footer",{className:"bg-gray-900 text-gray-300 py-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8 mb-8",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:a.jsx(Zn,{className:"w-6 h-6 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-white",children:"Loopify"})]}),a.jsx("p",{className:"text-sm text-gray-400",children:"Digital customer loyalty platform for businesses in Malaysia."})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-medium mb-4",children:"Product"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white",children:"Digital Stamp Cards"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white",children:"Points Rewards"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white",children:"Lucky Draws"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white",children:"WhatsApp Integration"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-medium mb-4",children:"Company"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white",children:"About Us"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white",children:"Contact Us"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white",children:"Careers"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white",children:"Blog"})})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-white font-medium mb-4",children:"Follow Us"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("a",{href:"#",className:"hover:text-white",children:a.jsx(Kp,{className:"w-6 h-6"})}),a.jsx("a",{href:"#",className:"hover:text-white",children:a.jsx(Gp,{className:"w-6 h-6"})})]})]})]}),a.jsx("div",{className:"border-t border-gray-800 pt-8 text-sm text-gray-400",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[a.jsx("div",{children:"© 2024 Loopify. All rights reserved."}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("a",{href:"#",className:"hover:text-white",children:"Terms of Service"}),a.jsx("a",{href:"#",className:"hover:text-white",children:"Privacy Policy"})]})]})})]})})}const vx={basic:1,premium:3,enterprise:6};function mr(){const[e,t]=w.useState([]),[r,n]=w.useState(!0),[s,i]=w.useState(null),[o,l]=w.useState("basic"),[c,u]=w.useState(1),d=async()=>{n(!0);try{const{data:{user:h}}=await L.auth.getUser();if(!h)throw new Error("User not found");const{data:m,error:x}=await L.from("users").select("plan").eq("id",h.id).single();if(x)throw x;const v=(m==null?void 0:m.plan)||"basic";l(v),u(vx[v]);const{data:k,error:g}=await L.from("stores").select("*").eq("user_id",h.id);if(g)throw g;t(k||[]),i(null)}catch(h){console.error("Error fetching stores:",h),i(h instanceof Error?h.message:"Error fetching stores"),t([])}finally{n(!1)}};w.useEffect(()=>{d()},[]);const f=e.length<c;return{stores:e,isLoading:r,error:s,refetch:d,canAddStore:f,storeLimit:c}}function of({selectedStore:e,onStoreChange:t}){const{stores:r,isLoading:n,error:s}=mr();return a.jsxs("div",{className:"relative w-full sm:w-64",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(ur,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400 absolute left-3"}),a.jsxs("select",{disabled:n,value:e,onChange:i=>t(i.target.value),className:"pl-9 sm:pl-10 pr-4 py-2.5 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none bg-white w-full",children:[a.jsx("option",{value:"",children:"Select a store"}),!n&&r.map(i=>a.jsx("option",{value:i.id,children:i.name},i.id))]})]}),s&&a.jsx("p",{className:"mt-1.5 text-xs sm:text-sm text-red-500",children:s})]})}function wx(e="all"){const[t,r]=w.useState({totalCustomers:0,totalSales:0,pendingPayments:0,isLoading:!0,error:null});return w.useEffect(()=>{(async()=>{try{let s=L.from("customers").select("*",{count:"exact",head:!0});e!=="all"&&(s=s.eq("store_id",e));const{count:i,error:o}=await s;if(o)throw o;let l=L.from("customers").select("id, total_spent, store_id");e!=="all"&&(l=l.eq("store_id",e));const{data:c,error:u}=await l;if(u)throw u;const d=(c||[]).reduce((v,k)=>v+(parseFloat(k.total_spent)||0),0);let f=L.from("orders").select("total_amount, store_id").eq("status","pending");e!=="all"&&(f=f.eq("store_id",e));const{data:h,error:m}=await f;if(m)throw m;const x=(h||[]).reduce((v,k)=>v+(parseFloat(k.total_amount)||0),0);r({totalCustomers:i||0,totalSales:d,pendingPayments:x,isLoading:!1,error:null})}catch(s){console.error("Error fetching dashboard metrics:",s),r(i=>({...i,isLoading:!1,error:s instanceof Error?s.message:"Error fetching dashboard metrics"}))}})()},[e]),t}function bx({title:e,value:t,icon:r,color:n}){return a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:`p-2 rounded-lg ${n}`,children:a.jsx(r,{className:"w-5 h-5 text-white"})}),a.jsx("h3",{className:"text-gray-600 font-medium",children:e})]}),a.jsx("p",{className:"text-2xl font-bold",children:t})]})}function _x(e="all"){const[t,r]=w.useState([]),[n,s]=w.useState(!0),[i,o]=w.useState(null);return w.useEffect(()=>{(async()=>{try{let c=L.from("customers").select(`
          id,
          first_name,
          last_name,
          total_spent,
          last_order_amount,
          last_order_date,
          store:stores (
            name
          )
        `).not("last_order_date","is",null).not("last_order_amount","eq",0).order("last_order_date",{ascending:!1});e!=="all"&&(c=c.eq("store_id",e)),c=c.limit(5);const{data:u,error:d}=await c;if(d)throw d;const f=(u||[]).map(h=>{var m;return{id:h.id,customer_name:`${h.first_name} ${h.last_name}`,amount:Number(h.last_order_amount),created_at:h.last_order_date,store_name:((m=h.store)==null?void 0:m.name)||"Unknown Store"}});r(f),o(null)}catch(c){console.error("Error fetching recent transactions:",c),o(c instanceof Error?c.message:"Error fetching transactions")}finally{s(!1)}})()},[e]),{transactions:t,isLoading:n,error:i}}function jx({storeId:e}){const{transactions:t,isLoading:r,error:n}=_x(e);return r?a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx(Hn,{className:"w-5 h-5 text-gray-500"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Recent Transactions"})]}),a.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((s,i)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"})]}),a.jsxs("div",{className:"space-y-2 text-right",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]},i))})]}):a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx(Hn,{className:"w-5 h-5 text-gray-500"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Recent Transactions"})]}),n?a.jsx("p",{className:"text-sm text-red-500 text-center py-4",children:n}):t.length===0?a.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No recent transactions found"}):a.jsx("div",{className:"space-y-4",children:t.map(s=>a.jsxs("div",{className:"flex items-center justify-between py-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:s.customer_name}),a.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-medium",children:["RM ",s.amount.toLocaleString("en-MY",{minimumFractionDigits:2})]}),a.jsx("p",{className:"text-xs text-gray-500",children:s.store_name})]})]},s.id))})]})}function kx(e="all"){const[t,r]=w.useState({customers:[],isLoading:!0,error:null});return w.useEffect(()=>{(async()=>{r(s=>({...s,isLoading:!0}));try{let s=L.from("customers").select(`
            id,
            first_name,
            last_name,
            phone,
            total_spent,
            orders_count,
            last_order_date
          `).not("total_spent","eq",0).not("last_order_date","is",null).order("orders_count",{ascending:!1});e!=="all"&&(s=s.eq("store_id",e));const{data:i,error:o}=await s.limit(5);if(o)throw o;const l=(i==null?void 0:i.map(c=>({id:c.id,name:`${c.first_name} ${c.last_name}`,phone:c.phone,total_purchases:parseInt(c.orders_count)||0,total_spent:parseFloat(c.total_spent)||0,last_purchase:c.last_order_date})))||[];r({customers:l,isLoading:!1,error:null})}catch(s){console.error("Error fetching top customers:",s),r(i=>({...i,isLoading:!1,error:s instanceof Error?s.message:"Error fetching top customers"}))}})()},[e]),t}function Nx({storeId:e}){const{customers:t,isLoading:r,error:n}=kx(e);return r?a.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),a.jsx("div",{className:"space-y-3",children:[...Array(5)].map((s,i)=>a.jsxs("div",{className:"flex justify-between",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]},i))})]})}):n?a.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:a.jsx("p",{className:"text-red-500 text-center",children:n})}):a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx(es,{className:"w-5 h-5 text-gray-500"}),a.jsx("h2",{className:"text-lg font-semibold",children:"Top Customers"})]}),a.jsx("div",{className:"space-y-4",children:t.map(s=>a.jsxs("div",{className:"flex items-center justify-between py-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:s.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm text-gray-500",children:s.phone}),a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:[s.total_purchases," purchases"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-medium",children:["RM ",s.total_spent.toLocaleString()]}),a.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.last_purchase).toLocaleDateString()})]})]},s.id))})]})}function Sx(){return a.jsx("div",{className:"bg-white shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex items-center h-16",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"bg-blue-600 p-2 rounded-lg",children:a.jsx(Zn,{className:"w-6 h-6 text-white"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Loopify"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Your E-Commerce Loyalty System"})]})]})})})})}function Ex(){const[e,t]=Jt.useState("all"),{totalCustomers:r,totalSales:n,pendingPayments:s,isLoading:i}=wx(e),o=[{title:"Total Customers",value:i?"-":r.toLocaleString(),icon:es,color:"bg-blue-500"},{title:"Total Sales",value:i?"-":`RM ${n.toLocaleString()}`,icon:Th,color:"bg-green-500"},{title:"Pending Payments",value:i?"-":`RM ${s.toLocaleString()}`,icon:Hn,color:"bg-amber-500"}];return a.jsxs("div",{className:"min-h-screen bg-gray-50 pb-32",children:[a.jsx(Sx,{}),a.jsx("div",{className:"p-4 sm:p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"mb-6",children:a.jsx(of,{selectedStore:e,onStoreChange:t})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:o.map(l=>a.jsx(bx,{...l},l.title))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(jx,{storeId:e}),a.jsx(Nx,{storeId:e})]})]})})]})}function du({title:e,icon:t,children:r}){return a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(t,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r})]})}function hn({title:e,description:t,icon:r,onClick:n}){return a.jsx("button",{onClick:n,className:"w-full bg-white p-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 text-left",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:a.jsx(r,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:e}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t})]})]})})}function Cx(e){const[t,r]=w.useState([]),[n,s]=w.useState(!0),[i,o]=w.useState(null),l=async()=>{try{let c=L.from("loyalty_stamp_cards").select("*").order("created_at",{ascending:!1});e&&(c=c.eq("store_id",e));const{data:u,error:d}=await c;if(d)throw d;r(u||[]),o(null)}catch(c){console.error("Error fetching loyalty stamp cards:",c),o(c instanceof Error?c.message:"Error fetching loyalty stamp cards")}finally{s(!1)}};return w.useEffect(()=>{l()},[e]),{cards:t,isLoading:n,error:i,refetch:l}}function Px({config:e}){const r=Math.max(4,Math.min(20,Number(e.totalStamps)||12));return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden max-w-md mx-auto",children:[a.jsx("div",{className:"h-40 sm:h-48 bg-cover bg-center",style:{backgroundImage:'url("https://images.unsplash.com/photo-1531058020387-3be344556be6?auto=format&fit=crop&q=80")'},children:a.jsx("div",{className:"h-full w-full bg-black/50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold mb-1 sm:mb-2 px-4",children:e.eventName||"Your Promotion Name"}),a.jsx("p",{className:"text-sm opacity-90",children:e.eventLocation||"Tagline"})]})})}),a.jsxs("div",{className:"bg-blue-50 px-3 py-4 sm:p-4 text-center border-b border-blue-100",children:[a.jsxs("h2",{className:"text-blue-800 font-semibold",children:["Reward: ",e.reward||"Your Reward Description"]}),e.minSpendPerStamp>0&&a.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["Spend RM ",e.minSpendPerStamp.toFixed(2)," to earn 1 stamp"]}),a.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Valid: ",e.startDate?new Date(e.startDate).toLocaleDateString():"Start Date"," - ",e.endDate?new Date(e.endDate).toLocaleDateString():"End Date"]}),a.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["Collect all ",r," stamps to participate"]})]}),a.jsxs("div",{className:"p-4 sm:p-6",children:[a.jsx("div",{className:`grid gap-4 mb-6 ${r<=12?"grid-cols-4":"grid-cols-5"}`,children:Array.from({length:r}).map((n,s)=>a.jsx("div",{className:`aspect-square rounded-full flex items-center justify-center border-2 transition-all ${s<0?"border-blue-500 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:a.jsx(Hr,{className:`w-4 h-4 sm:w-6 sm:h-6 ${s<0?"text-blue-500":"text-gray-300"}`})},s))}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsxs("p",{className:"text-gray-600",children:[a.jsx("span",{className:"font-semibold text-gray-800",children:0}),a.jsx("span",{className:"mx-1",children:"/"}),a.jsx("span",{className:"font-semibold text-gray-800",children:r}),a.jsx("span",{className:"ml-1",children:"stamps collected"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:e.terms||"Terms and conditions will appear here"})]}),a.jsx("div",{className:`w-full py-3 px-4 bg-blue-600 text-white rounded-xl font-medium
            text-center opacity-50`,children:"Preview Mode"})]})]})}function Tx({config:e,onChange:t,onSave:r,isSaving:n,isValid:s}){const i=(o,l)=>{if(o==="totalStamps"||o==="minSpendPerStamp"){const c=Number(l);o==="totalStamps"?l=c>=4&&c<=20?c:12:o==="minSpendPerStamp"&&(l=Math.max(0,c))}t({...e,[o]:l})};return a.jsxs("div",{className:"space-y-6 relative",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Promotion Details"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Promotion Name"}),a.jsx("input",{type:"text",value:e.eventName,onChange:o=>i("eventName",o.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Promosi Akhir Tahun"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tagline"}),a.jsx("input",{type:"text",value:e.eventLocation,onChange:o=>i("eventLocation",o.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., everyday is sale day"})]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Stamp Configuration"}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Stamps Required"}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3",children:[a.jsx("input",{type:"number",min:"4",max:"20",value:Number(e.totalStamps)||12,onChange:o=>{const l=Number(o.target.value);!isNaN(l)&&l>=4&&l<=20&&i("totalStamps",l)},className:`w-20 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 
                  focus:border-blue-500 text-center text-sm`}),a.jsx("input",{type:"range",min:"4",max:"20",value:Number(e.totalStamps)||12,onChange:o=>i("totalStamps",Number(o.target.value)),className:"w-full sm:w-48 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"}),a.jsx("div",{className:"flex gap-1",children:[...Array(3)].map((o,l)=>a.jsx(Hr,{className:"w-5 h-5 text-blue-500"},l))})]}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Use slider or type a number (4-20 stamps)"}),a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Spend per Stamp (RM)"}),a.jsx("input",{type:"number",min:"0",step:"0.01",value:e.minSpendPerStamp||0,onChange:o=>i("minSpendPerStamp",Number(o.target.value)),className:"w-32 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Minimum purchase amount required to earn one stamp"})]})]})})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Promotion Period"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),a.jsx("input",{type:"date",required:!0,value:e.startDate,min:new Date().toISOString().split("T")[0],onChange:o=>i("startDate",o.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),a.jsx("input",{type:"date",required:!0,value:e.endDate,min:e.startDate||new Date().toISOString().split("T")[0],onChange:o=>i("endDate",o.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"The loyalty card will automatically deactivate after the end date"})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Reward Configuration"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reward Description"}),a.jsx("input",{type:"text",value:e.reward,onChange:o=>i("reward",o.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., collect 10 stamps and get 1 iphone 16 for free"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Terms & Conditions"}),a.jsx("textarea",{value:e.terms,onChange:o=>i("terms",o.target.value),rows:4,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Valid for 3 months from date of first stamp. One stamp per visit with minimum purchase of RM50."})]})]})]}),a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-24",children:a.jsx("p",{className:"text-sm text-blue-600",children:"All changes are automatically saved and reflected in the preview. Your customers will see the loyalty card exactly as shown in the preview."})}),a.jsx("div",{className:"fixed bottom-32 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 md:relative md:mt-8 md:bg-transparent md:border-none",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("button",{onClick:r,disabled:n||!s,className:`w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium
              hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 
              focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsx(Di,{className:"w-4 h-4"}),n?"Saving Changes...":"Save Changes"]})})})]})}function Ax({onBack:e}){const{stores:t}=mr(),[r,n]=w.useState(""),{cards:s,refetch:i}=Cx(r),[o,l]=w.useState(!1),[c,u]=w.useState(null),d=!!(r&&(c!=null&&c.eventName)&&(c!=null&&c.reward)&&(c!=null&&c.startDate)&&(c!=null&&c.endDate));w.useEffect(()=>{if(r&&s.length>0){const h=s[0];u({totalStamps:h.total_stamps,minSpendPerStamp:h.min_spend_per_stamp||0,minSpendPerStamp:h.min_spend_per_stamp||0,eventName:h.promotion_name,eventLocation:h.tagline||"",reward:h.reward,terms:h.terms||"",startDate:h.start_date||"",endDate:h.end_date||""})}else u({totalStamps:12,minSpendPerStamp:0,minSpendPerStamp:0,reward:"",terms:"",eventName:"",eventLocation:"",startDate:"",endDate:""})},[r,s]);const f=async()=>{if(!r||!c){E.error("Please select a store");return}const h=parseInt(c.totalStamps)||12;if(h<4||h>20){E.error("Number of stamps must be between 4 and 20");return}if(!c.startDate||!c.endDate){E.error("Please select both start and end dates");return}const m=new Date(c.startDate);if(new Date(c.endDate)<m){E.error("End date must be after start date");return}l(!0);try{const v=s.find(y=>y.store_id===r),k=new Date().toISOString(),g={store_id:r,promotion_name:c.eventName,min_spend_per_stamp:c.minSpendPerStamp||0,tagline:c.eventLocation,min_spend_per_stamp:c.minSpendPerStamp||0,total_stamps:h,reward:c.reward,terms:c.terms,start_date:c.startDate,end_date:c.endDate,updated_at:k};let p;if(v){const{error:y}=await L.from("loyalty_stamp_cards").update(g).eq("id",v.id);p=y}else{const{error:y}=await L.from("loyalty_stamp_cards").insert({...g,created_at:k});p=y}if(p)throw p;E.success(v?"Card updated successfully":"New card created successfully"),i()}catch(v){console.error("Error saving loyalty stamp card:",v),E.error("Failed to save loyalty stamp card")}finally{l(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-50 pb-40",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[a.jsx(nt,{className:"w-4 h-4"}),a.jsx("span",{children:"Back to Tools"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Loyalty Stamp Card Setup"}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[a.jsxs("div",{className:"text-sm text-gray-500",children:[s.length," card",s.length!==1?"s":""," configured"]}),a.jsxs("select",{value:r,onChange:h=>n(h.target.value),className:"px-3 py-2.5 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[a.jsx("option",{value:"",children:"Select a store"}),t.map(h=>a.jsx("option",{value:h.id,children:h.name},h.id))]}),a.jsxs("button",{onClick:f,disabled:o||!r,className:`flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg text-sm
                hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 
                focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsx(Di,{className:"w-4 h-4"}),o?"Saving...":"Save Card"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8",children:[a.jsx("div",{children:c&&a.jsx(Tx,{config:c,onChange:u,onSave:f,isSaving:o,isValid:d})}),a.jsxs("div",{className:"xl:sticky xl:top-8 order-first xl:order-last mb-20",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-4",children:[a.jsx("h2",{className:"font-medium text-gray-900",children:"Live Preview"}),a.jsx("p",{className:"text-sm text-gray-500",children:"This is how your loyalty card will appear to customers"})]}),c&&a.jsx(Px,{config:c})]})]})]})})}function Lx(e){const[t,r]=w.useState(null),[n,s]=w.useState(!0),[i,o]=w.useState(null),l=async()=>{if(!e){r(null),s(!1);return}try{const{data:c,error:u}=await L.from("loyalty_points_config").select("*").eq("store_id",e).order("created_at",{ascending:!1}).limit(1).single();if(u)if(u.code==="PGRST116")r(null);else throw u;else r(c);o(null)}catch(c){console.error("Error fetching loyalty points config:",c),o(c instanceof Error?c.message:"Error fetching config")}finally{s(!1)}};return w.useEffect(()=>{l()},[e]),{config:t,isLoading:n,error:i,refetch:l}}function Ox({config:e}){return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden max-w-md mx-auto transform transition-all duration-300 hover:scale-[1.02] relative",children:[a.jsxs("div",{className:"relative bg-gradient-to-br from-indigo-600 via-blue-600 to-blue-700 pt-12 pb-8 px-8 text-white overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 transform translate-x-32 -translate-y-32",children:a.jsx("div",{className:"absolute inset-0 bg-white opacity-10 rounded-full"})}),a.jsx("h2",{className:"text-2xl font-bold mb-3 relative",children:"Loyalty Points Program"}),a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 mt-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-2",children:[a.jsx(jl,{className:"w-8 h-8 text-yellow-300"}),a.jsx("span",{className:"text-xl font-medium text-blue-50",children:"Current Points"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-6xl font-bold tracking-tight",children:"0"}),a.jsx("span",{className:"text-2xl ml-2 text-blue-200",children:"pts"})]})]})}),e.min_spend>0&&a.jsxs("div",{className:"mt-4 py-2 px-4 bg-white/10 rounded-lg backdrop-blur-sm text-sm text-center",children:["Min. spend: RM ",e.min_spend.toFixed(2)," per transaction"]}),a.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3",children:[a.jsx("div",{className:"text-sm text-blue-100",children:"Next Reward At"}),a.jsx("div",{className:"text-xl font-bold",children:"1,000 pts"})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-3",children:[a.jsx("div",{className:"text-sm text-blue-100",children:"Points to Earn"}),a.jsx("div",{className:"text-xl font-bold",children:"1,000 pts"})]})]})]}),a.jsx("div",{className:"p-6 border-b border-gray-100",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl shadow-sm",children:a.jsx(Ri,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Available Rewards"}),a.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:e.reward_description})]})]})}),a.jsx("div",{className:"p-6 bg-gradient-to-b from-white to-gray-50",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl shadow-sm",children:a.jsx(qp,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Program Period"}),a.jsxs("p",{className:"text-sm text-gray-600 bg-white px-4 py-2 rounded-lg border border-gray-100 inline-block",children:["Valid from ",new Date(e.start_date).toLocaleDateString()," to"," ",new Date(e.end_date).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"mt-6 text-sm text-gray-500",children:[a.jsx("p",{className:"font-semibold text-gray-700 mb-3",children:"Terms & Conditions:"}),a.jsx("ul",{className:"space-y-2",children:e.terms.split(`
`).map((t,r)=>a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 mt-1.5 flex-shrink-0"}),a.jsx("span",{children:t})]},r))})]})]})}),a.jsx("div",{className:"absolute top-4 right-4 px-3 py-1.5 bg-black/50 text-white text-xs font-medium rounded-full backdrop-blur-sm",children:"Preview Mode"})]})}function $x({config:e,onChange:t,onSave:r,isSaving:n,isValid:s}){const i=(o,l)=>{(o==="points_per_rm"||o==="min_spend")&&(l=l===""?0:parseFloat(l),isNaN(l)&&(l=0)),t({...e,[o]:l})};return a.jsxs("div",{className:"space-y-6 relative",children:[a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Points Configuration"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Points per RM1 *"}),a.jsx("input",{type:"number",min:"0.1",step:"0.1",required:!0,value:e.points_per_rm,onChange:o=>i("points_per_rm",parseFloat(o.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Spend (RM)"}),a.jsx("input",{type:"number",min:"0",step:"0.01",value:e.min_spend,onChange:o=>i("min_spend",parseFloat(o.target.value)),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., 30"})]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Program Period"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),a.jsx("input",{type:"date",required:!0,value:e.start_date,min:new Date().toISOString().split("T")[0],onChange:o=>i("start_date",o.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),a.jsx("input",{type:"date",required:!0,value:e.end_date,min:e.start_date||new Date().toISOString().split("T")[0],onChange:o=>i("end_date",o.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),a.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Reward Configuration"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reward Description *"}),a.jsx("textarea",{required:!0,value:e.reward_description,onChange:o=>i("reward_description",o.target.value),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Redeem RM10 voucher for every 1000 points collected"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Terms & Conditions"}),a.jsx("textarea",{value:e.terms,onChange:o=>i("terms",o.target.value),rows:4,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Points are valid for 12 months from the date of issue. Points cannot be transferred or exchanged for cash."})]})]})]}),a.jsx("div",{className:"fixed bottom-32 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 md:relative md:mt-8 md:bg-transparent md:border-none",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("button",{onClick:r,disabled:n||!s,className:`w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg text-sm font-medium
              hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 
              focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsx(Di,{className:"w-4 h-4"}),n?"Saving Changes...":"Save Changes"]})})})]})}function Rx({onBack:e}){const{stores:t}=mr(),[r,n]=w.useState(""),{config:s,refetch:i}=Lx(r),[o,l]=w.useState(!1),[c,u]=w.useState({points_per_rm:1,reward_description:"",terms:"",min_spend:0,start_date:"",end_date:""}),d=!!(r&&c.points_per_rm>0&&c.reward_description&&c.start_date&&c.end_date);w.useEffect(()=>{u(r&&s?{points_per_rm:s.points_per_rm,reward_description:s.reward_description,terms:s.terms||"",min_spend:s.min_spend,start_date:s.start_date,end_date:s.end_date}:{points_per_rm:1,reward_description:"",terms:"",min_spend:0,start_date:"",end_date:""})},[r,s]);const f=async()=>{if(!r){E.error("Please select a store");return}if(!d){E.error("Please fill in all required fields");return}const h=new Date(c.start_date);if(new Date(c.end_date)<h){E.error("End date must be after start date");return}l(!0);try{const x=new Date().toISOString(),v={store_id:r,points_per_rm:c.points_per_rm,reward_description:c.reward_description,terms:c.terms,min_spend:c.min_spend,start_date:c.start_date,end_date:c.end_date,updated_at:x};let k;if(s){const{error:g}=await L.from("loyalty_points_config").update(v).eq("id",s.id);k=g}else{const{error:g}=await L.from("loyalty_points_config").insert({...v,created_at:x});k=g}if(k)throw k;E.success(s?"Points program updated":"Points program created"),i()}catch(x){console.error("Error saving loyalty points config:",x),E.error("Failed to save points program")}finally{l(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-50 pb-40",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[a.jsx(nt,{className:"w-4 h-4"}),a.jsx("span",{children:"Back to Tools"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Loyalty Points Setup"}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-4",children:[a.jsxs("select",{value:r,onChange:h=>n(h.target.value),className:"px-3 py-2.5 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[a.jsx("option",{value:"",children:"Select a store"}),t.map(h=>a.jsx("option",{value:h.id,children:h.name},h.id))]}),a.jsxs("button",{onClick:f,disabled:o||!r,className:`flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 text-white rounded-lg text-sm
                hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 
                focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsx(Di,{className:"w-4 h-4"}),o?"Saving...":"Save Program"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6 lg:gap-8",children:[a.jsx("div",{children:a.jsx($x,{config:c,onChange:u,onSave:f,isSaving:o,isValid:d})}),a.jsxs("div",{className:"xl:sticky xl:top-8 order-first xl:order-last mb-20",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm mb-4",children:[a.jsx("h2",{className:"font-medium text-gray-900",children:"Live Preview"}),a.jsx("p",{className:"text-sm text-gray-500",children:"This is how your points program will appear to customers"})]}),a.jsx(Ox,{config:c})]})]})]})})}const Dx="https://onsend.io/api/v1/send",Mx=async(e,t)=>{try{const r=await fetch(Dx,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){throw console.error("Error sending message:",r),r}},lf=(e,t,r)=>{if(!e)throw new Error("WhatsApp API key not configured. Please configure it in Settings > WhatsApp API.");if(!t)throw new Error("Invalid phone number for WhatsApp message");if(!r.trim())throw new Error("WhatsApp message content cannot be empty");return Mx(e,{phone_number:t,message:r,type:"text"})};function Ix(e){const[t,r]=w.useState([]),[n,s]=w.useState(!0),[i,o]=w.useState(null),[l,c]=w.useState([]),u=async f=>{if(!e)return[];try{const{data:h,error:m}=await L.from("customers").select("*").eq("store_id",e).gte("total_spent",f).order("last_order_date",{ascending:!1});if(m)throw m;return c(h||[]),h||[]}catch(h){return console.error("Error fetching eligible customers:",h),[]}},d=async()=>{if(!e){r([]),s(!1);return}try{const{data:f,error:h}=await L.from("lucky_draw_campaigns").select(`
          *,
          prizes:lucky_draw_prizes(*)
        `).eq("store_id",e).order("created_at",{ascending:!1});if(h)throw h;r(f||[]),o(null)}catch(f){console.error("Error fetching lucky draw campaigns:",f),o(f instanceof Error?f.message:"Error fetching campaigns")}finally{s(!1)}};return w.useEffect(()=>{d()},[e]),{campaigns:t,isLoading:n,error:i,refetch:d,fetchEligibleCustomers:u,eligibleCustomers:l}}function zx({prizes:e,onSpinEnd:t,isSpinning:r,selectedPrize:n,winner:s}){const i=w.useRef(null),[o,l]=w.useState(0),[c,u]=w.useState(!1);return w.useEffect(()=>{if(!i.current||e.length===0)return;const d=i.current,f=d.getContext("2d");if(!f)return;const h=d.width/2,m=d.height/2,x=Math.min(h,m)-10;f.clearRect(0,0,d.width,d.height),f.save(),f.translate(h,m),f.rotate(o*Math.PI/180),f.translate(-h,-m);const v=e.reduce((g,p)=>g+p.probability,0);let k=0;e.forEach((g,p)=>{const y=g.probability/v*2*Math.PI;f.beginPath(),f.moveTo(h,m),f.arc(h,m,x,k,k+y),f.closePath(),f.fillStyle=p%2===0?"#4F46E5":"#6366F1",f.fill(),f.stroke(),f.save(),f.translate(h,m),f.rotate(k+y/2),f.textAlign="right",f.fillStyle="#ffffff",f.font="14px Arial",f.fillText(g.name,x-20,5),f.restore(),k+=y}),f.beginPath(),f.arc(h,m,20,0,2*Math.PI),f.fillStyle="#ffffff",f.fill(),f.stroke(),f.beginPath(),f.moveTo(h+30,m),f.lineTo(h+50,m-10),f.lineTo(h+50,m+10),f.closePath(),f.fillStyle="#EF4444",f.fill(),f.restore()},[e,o]),w.useEffect(()=>{if(r&&!c&&n){u(!0);const d=e.reduce((k,g)=>k+g.probability,0);let f=0,h=0;for(const k of e){if(k.id===n.id)break;h+=k.probability,f+=k.probability/d*360}const m=3600+f;let x=o;const v=()=>{if(x>=m){u(!1),t==null||t(n,s);return}const k=m-x,g=Math.max(1,k*.05);x+=g,l(x%360),requestAnimationFrame(v)};v()}},[r,n]),w.useEffect(()=>{r&&u(!1)},[r]),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsxs("div",{className:"relative",children:[a.jsx("canvas",{ref:i,width:400,height:400,className:"max-w-full h-auto rounded-full shadow-xl"}),c&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/10 rounded-full",children:a.jsx("div",{className:"text-lg font-medium text-white animate-pulse",children:"Spinning..."})})]}),s&&a.jsx("div",{className:"mt-6 text-center animate-fade-up",children:a.jsxs("div",{className:"inline-flex flex-col items-center px-8 py-6 bg-gradient-to-r from-yellow-500 to-amber-500 rounded-xl shadow-lg",children:[a.jsx(og,{className:"w-6 h-6 text-white"}),a.jsxs("div",{className:"text-white",children:[a.jsx("div",{className:"text-lg font-medium",children:"Congratulations!"}),a.jsxs("div",{className:"text-2xl font-bold mt-2",children:[s.first_name," ",s.last_name]}),a.jsx("div",{className:"text-base mt-1",children:s.phone}),a.jsxs("div",{className:"text-lg font-medium mt-3 px-4 py-2 bg-white/20 rounded-lg",children:["Won: ",s.prize_name]})]})]})})]})}function Fx({isOpen:e,onClose:t,onSuccess:r,storeId:n}){const[s,i]=w.useState(!1),[o,l]=w.useState({name:"",description:"",min_spend:0,winner_message:"Congratulations {first_name}! You've won {prize_name} in our lucky draw!",start_date:"",end_date:"",prizes:[{name:"",description:"",quantity:1,probability:100}]}),c=()=>{const h=o.prizes.reduce((x,v)=>x+(v.probability||0),0),m=Math.max(0,100-h);l(x=>({...x,prizes:[...x.prizes,{name:"",description:"",quantity:1,probability:m}]}))},u=h=>{l(m=>({...m,prizes:m.prizes.filter((x,v)=>v!==h)}))},d=(h,m,x)=>{l(v=>({...v,prizes:v.prizes.map((k,g)=>g===h?{...k,[m]:x}:k)}))},f=async h=>{h.preventDefault(),i(!0);try{if(!o.name||!o.start_date||!o.end_date)throw new Error("Please fill in all required fields");const m=new Date(o.start_date);if(new Date(o.end_date)<m)throw new Error("End date must be after start date");const v=o.prizes.reduce((b,_)=>b+_.probability,0);if(Math.abs(v-100)>.01)throw new Error("Total probability must equal 100%");if(!o.prizes.every(b=>b.name&&b.quantity>0))throw new Error("Please fill in all prize details");const{data:k,error:g}=await L.from("lucky_draw_campaigns").insert({store_id:n,name:o.name,description:o.description,min_spend:parseFloat(o.min_spend)||0,start_date:o.start_date,end_date:o.end_date,is_active:!0,winner_message:o.winner_message}).select().single();if(g)throw g;const p=o.prizes.map(b=>({campaign_id:k.id,name:b.name,description:b.description,quantity:b.quantity,remaining_quantity:b.quantity,probability:b.probability})),{error:y}=await L.from("lucky_draw_prizes").insert(p);if(y)throw y;l({name:"",description:"",min_spend:0,winner_message:"Congratulations {first_name}! You've won {prize_name} in our lucky draw!",start_date:"",end_date:"",prizes:[{name:"",description:"",quantity:1,probability:100}]}),E.success("Lucky draw campaign created successfully"),r(),t()}catch(m){console.error("Error creating campaign:",m),E.error(m instanceof Error?m.message:"Failed to create campaign")}finally{i(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-start justify-center p-4 pt-8 pb-56 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Create Lucky Draw Campaign"}),a.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full",children:a.jsx(Mi,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:f,className:"p-4 space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Name *"}),a.jsx("input",{type:"text",required:!0,value:o.name,onChange:h=>l(m=>({...m,name:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., Year End Lucky Draw"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:o.description,onChange:h=>l(m=>({...m,description:h.target.value})),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe your lucky draw campaign"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Minimum Spend (RM) *"}),a.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:o.min_spend||"0",onChange:h=>l(m=>({...m,min_spend:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Winner Message Template *"}),a.jsx("textarea",{value:o.winner_message,onChange:h=>l(m=>({...m,winner_message:h.target.value})),rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Message to send to winners"}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Available variables: ","{first_name}",", ","{last_name}",", ","{prize_name}"]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),a.jsx("input",{type:"date",required:!0,value:o.start_date,min:new Date().toISOString().split("T")[0],onChange:h=>l(m=>({...m,start_date:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),a.jsx("input",{type:"date",required:!0,value:o.end_date,min:o.start_date||new Date().toISOString().split("T")[0],onChange:h=>l(m=>({...m,end_date:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Prizes"}),a.jsxs("button",{type:"button",onClick:c,className:"flex items-center gap-2 px-3 py-1.5 text-sm text-blue-600 hover:bg-blue-50 rounded-lg",children:[a.jsx(Oh,{className:"w-4 h-4"}),"Add Prize"]})]}),a.jsx("div",{className:"space-y-4",children:o.prizes.map((h,m)=>a.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg relative",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prize Name *"}),a.jsx("input",{type:"text",required:!0,value:h.name,onChange:x=>d(m,"name",x.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"e.g., iPhone 15"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("input",{type:"text",value:h.description,onChange:x=>d(m,"description",x.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Prize details"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),a.jsx("input",{type:"number",required:!0,min:"1",step:"1",value:h.quantity,onChange:x=>d(m,"quantity",parseInt(x.target.value)||1),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Win Probability (%) *"}),a.jsx("input",{type:"number",required:!0,min:"0",max:"100",step:"0.01",value:h.probability||0,onChange:x=>d(m,"probability",parseFloat(x.target.value)||0),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]})]}),o.prizes.length>1&&a.jsx("button",{type:"button",onClick:()=>u(m),className:"absolute top-2 right-2 p-1.5 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg",children:a.jsx(El,{className:"w-4 h-4"})})]},m))}),a.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Total probability must equal 100%. Current total:"," ",a.jsxs("span",{className:`font-medium ${Math.abs(o.prizes.reduce((h,m)=>h+m.probability,0)-100)<.01?"text-green-600":"text-red-600"}`,children:[o.prizes.reduce((h,m)=>h+m.probability,0),"%"]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx("button",{type:"submit",disabled:s,className:"px-6 py-2.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:s?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Creating..."})]}):"Create Campaign"}),a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancel"})]})]})]})}):null}function Ux({onBack:e}){const{stores:t}=mr(),[r,n]=w.useState(""),{campaigns:s,isLoading:i,refetch:o,fetchEligibleCustomers:l,eligibleCustomers:c}=Ix(r),[u,d]=w.useState(!1),[f,h]=w.useState(null),[m,x]=w.useState(null),[v,k]=w.useState(!1),g=s.length>0&&s.every(j=>j.is_ended),p=async j=>{if(confirm("Are you sure you want to end this campaign? This action cannot be undone."))try{const{error:C}=await L.from("lucky_draw_campaigns").update({is_ended:!0}).eq("id",j.id);if(C)throw C;E.success("Campaign ended successfully"),o(),s.every(A=>A.id===j.id||A.is_ended)&&k(!0)}catch(C){console.error("Error ending campaign:",C),E.error("Failed to end campaign")}},y=async(j,C)=>{try{if(!(j!=null&&j.phone))throw new Error("Winner has no valid phone number");const{data:A,error:O}=await L.from("stores").select("api_key, name").eq("id",C.store_id).single();if(O)throw O;if(!(A!=null&&A.api_key))throw new Error(`WhatsApp API key not configured for store: ${(A==null?void 0:A.name)||"Unknown"}`);let B=C.winner_message||"Congratulations {first_name}! You've won {prize_name} in our lucky draw!";B=B.replace(/{first_name}/g,j.first_name||"there").replace(/{last_name}/g,j.last_name||"").replace(/{prize_name}/g,j.prize_name||"a prize"),await lf(A.api_key,j.phone,B),E.success("Winner notification sent")}catch(A){const O=A instanceof Error?A.message:"Unknown error";console.error("Error sending winner message:",O),E.error(O.includes("API key")?O:"Failed to send winner notification. Please check WhatsApp settings.")}},b=()=>{if(!r){E.error("Please select a store first");return}k(!0)},_=async j=>{if(!j.prizes||j.prizes.length===0){E.error("No prizes available");return}x(null),h(null);const C=await l(j.min_spend);if(C.length===0){E.error("No eligible customers found");return}d(!0),await new Promise(Ne=>setTimeout(Ne,500));const A=Math.random()*100;let O=0,B=j.prizes[j.prizes.length-1];for(const Ne of j.prizes)if(!(Ne.remaining_quantity<=0)&&(O+=Ne.probability,A<=O)){B=Ne;break}if(B.remaining_quantity<=0){d(!1),E.error("No more prizes available");return}const $e=C[Math.floor(Math.random()*C.length)],Ye={...$e,prize_name:B.name};try{const{error:Ne}=await L.from("lucky_draw_prizes").update({remaining_quantity:B.remaining_quantity-1}).eq("id",B.id);if(Ne)throw Ne;const{error:ss}=await L.from("lucky_draw_entries").insert({campaign_id:j.id,customer_id:$e.id,prize_id:B.id,is_winner:!0,created_at:new Date().toISOString()});if(ss)throw ss;x(Ye),h(B);try{await y(Ye,j)}catch(en){console.error("Error sending winner message:",en),E.error("Winner selected but notification failed to send. Please check WhatsApp settings.")}o()}catch(Ne){console.error("Error recording winner:",Ne),E.error("Error recording winner"),d(!1);return}},S=(j,C)=>{d(!1),E.success(`${C.first_name} ${C.last_name} won: ${j.name}!`),o()};return a.jsxs("div",{className:"min-h-screen bg-gray-50 pb-56",children:[a.jsxs("div",{className:"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[a.jsx(nt,{className:"w-4 h-4"}),a.jsx("span",{children:"Back to Tools"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Lucky Draw"}),a.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:a.jsxs("select",{value:r,onChange:j=>n(j.target.value),className:"px-3 py-2.5 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[a.jsx("option",{value:"",children:"Select a store"}),t.map(j=>a.jsx("option",{value:j.id,children:j.name},j.id))]})})]}),i?a.jsx("div",{className:"text-center py-12",children:"Loading..."}):s.length===0||g?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ri,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s.length===0?"No Lucky Draw Campaigns":"All Campaigns Ended"}),a.jsx("p",{className:"text-gray-500 mb-6",children:s.length===0?"Create your first campaign to start engaging customers":"Create a new campaign to continue engaging customers"}),a.jsxs("button",{onClick:b,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[a.jsx(Oh,{className:"w-4 h-4"}),"Create Campaign"]})]}):a.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.map(j=>{var C;return!j.is_ended&&a.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:j.name}),a.jsx("p",{className:"text-gray-500 mt-1",children:j.description})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>_(j),disabled:u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:"Spin Wheel"}),a.jsx("button",{onClick:()=>p(j),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"End Campaign"})]})]}),a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx(zx,{prizes:j.prizes||[],isSpinning:u,selectedPrize:f,winner:m,onSpinEnd:S})}),a.jsxs("div",{className:"mt-6",children:[a.jsx("h3",{className:"text-lg font-medium mb-3",children:"Available Prizes"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(C=j.prizes)==null?void 0:C.map(A=>a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-100",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:A.name}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:A.description})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[A.remaining_quantity,"/",A.quantity]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[A.probability,"% chance"]})]})]})},A.id))}),a.jsxs("div",{className:"mt-4 text-sm text-gray-500",children:["Minimum spend: RM ",j.min_spend.toLocaleString()]})]})]})},j.id)})})]}),a.jsx(Fx,{isOpen:v,onClose:()=>k(!1),onSuccess:o,storeId:r})]})}function cf(e,t){const[r,n]=w.useState([]),[s,i]=w.useState(!0),[o,l]=w.useState(null),c=async()=>{i(!0);try{if(!e||e===""){n([]),l(null),i(!1);return}const u=L.from("customers").select(`
          *,
          store:stores(name)
        `).order("created_at",{ascending:!1});e!=="all"&&u.eq("store_id",e),t&&u.or(`first_name.ilike.%${t}%,last_name.ilike.%${t}%,email.ilike.%${t}%,phone.ilike.%${t}%`);const{data:d,error:f}=await u;if(f)throw f;n(d||[]),l(null)}catch(u){console.error("Error fetching customers:",u),l(u instanceof Error?u.message:"Error fetching customers")}finally{i(!1)}};return w.useEffect(()=>{c()},[e,t]),{customers:r,isLoading:s,error:o,refetch:c}}function Bx({onBack:e}){const[t,r]=w.useState(""),[n,s]=w.useState([]),[i,o]=w.useState(""),[l,c]=w.useState(""),{customers:u,isLoading:d}=cf(t,""),[f,h]=w.useState(30),[m,x]=w.useState({message:""}),[v,k]=w.useState(!1);w.useEffect(()=>{g()},[]),w.useEffect(()=>{const _=n.find(S=>S.id===t);_!=null&&_.whatsapp_interval&&h(_.whatsapp_interval)},[t,n]);const g=async()=>{try{const{data:_,error:S}=await L.from("stores").select("id, name, api_key, whatsapp_interval").order("created_at",{ascending:!1});if(S)throw S;s((_==null?void 0:_.map(j=>({...j,whatsapp_interval:j.whatsapp_interval||30})))||[]),(_==null?void 0:_.length)===1&&r(_[0].id)}catch(_){console.error("Error fetching stores:",_),E.error("Failed to load stores")}},p=u.filter(_=>{if(!i&&!l)return!0;if(!_.last_order_date)return!1;const S=new Date(_.last_order_date);S.setHours(S.getHours()+8);const j=S.toISOString().slice(0,10);return(!i||j>=i)&&(!l||j<=l)}),y=async _=>{var S;if(t)try{const{error:j}=await L.from("stores").update({whatsapp_interval:_}).eq("id",t);if(j)throw j;h(_),s(C=>C.map(A=>A.id===t?{...A,whatsapp_interval:_}:A)),E.success("Message interval updated")}catch(j){console.error("Error updating interval:",j),E.error("Failed to update message interval"),h(((S=n.find(C=>C.id===t))==null?void 0:S.whatsapp_interval)||30)}},b=async _=>{if(_.preventDefault(),!t){E.error("Please select a store");return}const S=n.find(A=>A.id===t);if(!(S!=null&&S.api_key)){E.error("Please configure WhatsApp API key in Settings first");return}if(!m.message.trim()){E.error("Please enter a message");return}if(p.length===0){E.error("No customers selected");return}k(!0);let j=1;const C=p.length;try{let A=0,O=0;for(const B of p)try{E.loading(`Sending message ${j} of ${C}...`,{id:"progress"});const $e=S.api_key;await lf($e,B.phone,m.message),j++,await new Promise(Ye=>setTimeout(Ye,f*1e3)),E.dismiss("progress"),A++}catch($e){console.error(`Failed to send message to ${B.phone}:`,$e),O++,j++}A>0&&E.success(`Successfully sent ${A} messages`),O>0&&E.error(`Failed to send ${O} messages`),x({message:""})}catch(A){console.error("Error sending messages:",A),E.error("Failed to send messages")}finally{k(!1),E.dismiss("progress")}};return a.jsx("div",{className:"min-h-screen bg-gray-50 pb-32",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[a.jsx(nt,{className:"w-4 h-4"}),a.jsx("span",{children:"Back to Tools"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(zt,{className:"w-5 h-5 text-green-600"})}),a.jsx("h1",{className:"text-xl font-semibold",children:"WhatsApp Blaster"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Store *"}),a.jsxs("select",{value:t,onChange:_=>r(_.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,children:[a.jsx("option",{value:"",children:"Choose a store"}),n.map(_=>a.jsx("option",{value:_.id,children:_.name},_.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),a.jsx("input",{type:"date",value:i,max:l||void 0,onChange:_=>o(_.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),a.jsx("input",{type:"date",value:l,min:i||void 0,onChange:_=>c(_.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message Interval"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex-1",children:[a.jsx("input",{type:"radio",name:"interval",className:"sr-only peer",checked:f===30,onChange:()=>y(30)}),a.jsxs("div",{className:"p-4 text-center border rounded-lg cursor-pointer peer-checked:border-green-600 peer-checked:bg-green-50 peer-checked:text-green-600 hover:bg-gray-50",children:[a.jsx("div",{className:"font-medium",children:"30 Seconds"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Recommended for small batches"})]})]}),a.jsxs("label",{className:"flex-1",children:[a.jsx("input",{type:"radio",name:"interval",className:"sr-only peer",checked:f===60,onChange:()=>y(60)}),a.jsxs("div",{className:"p-4 text-center border rounded-lg cursor-pointer peer-checked:border-green-600 peer-checked:bg-green-50 peer-checked:text-green-600 hover:bg-gray-50",children:[a.jsx("div",{className:"font-medium",children:"60 Seconds"}),a.jsx("div",{className:"text-sm text-gray-500",children:"Safer for large batches"})]})]})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Choose a longer interval to reduce the risk of WhatsApp temporary blocks"})]}),a.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:a.jsxs("p",{className:"text-sm text-green-600",children:[a.jsx("span",{className:"font-medium",children:"Selected Recipients:"})," ",d?"Loading...":a.jsxs(a.Fragment,{children:[p.length," customer",p.length===1?"":"s",(i||l)&&a.jsxs("span",{className:"block mt-1 text-xs",children:["Orders between ",i||"any date"," and ",l||"any date"," (UTC+8)"]})]})]})}),a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message Content *"}),a.jsx("textarea",{required:!0,value:m.message,onChange:_=>x(S=>({...S,message:_.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 min-h-[200px]",placeholder:"Enter your WhatsApp message here..."}),a.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Available variables: ","{first_name}",", ","{last_name}",", ","{phone}"]})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{type:"submit",disabled:v||p.length===0||!t,className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:v?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Sending..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(rg,{className:"w-4 h-4"}),a.jsx("span",{children:"Send WhatsApp Messages"})]})})})]})]})]})]})})}function qx({enabled:e,onChange:t,label:r,description:n}){return a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{role:"switch","aria-checked":e,tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),t(!e))},type:"button",onClick:()=>t(!e),className:`
            relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 
            border-transparent transition-colors duration-200 ease-in-out focus:outline-none 
            focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 hover:bg-opacity-90
            ${e?"bg-blue-600":"bg-gray-200"}
          `,children:[a.jsx("span",{className:"sr-only",children:"Use setting"}),a.jsx("span",{className:`
              pointer-events-none inline-block h-5 w-5 transform rounded-full 
              bg-white shadow-sm ring-0 transition duration-200 ease-in-out
              ${e?"translate-x-5":"translate-x-0"}
            `})]}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:r})]}),n&&a.jsx("p",{className:"mt-1 text-xs text-gray-500 ml-14",children:n})]})}function hu({title:e,description:t,config:r,onChange:n}){return a.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e}),a.jsx("p",{className:"text-sm text-gray-500",children:t})]}),a.jsx(qx,{enabled:r.enabled,onChange:s=>n({...r,enabled:s}),label:"Enable"})]}),r.enabled&&a.jsxs("div",{className:"space-y-4 pt-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Send After (Days)"}),a.jsx("input",{type:"number",min:"1",max:"30",value:r.delay,onChange:s=>n({...r,delay:parseInt(s.target.value)||1}),className:"w-24 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Message will be sent this many days after the trigger event"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message Template"}),a.jsx("textarea",{value:r.message,onChange:s=>n({...r,message:s.target.value}),rows:4,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your message template..."}),a.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Available variables: ","{first_name}",", ","{last_name}",", ","{phone}"]})]})]})]})})}function fu({title:e,message:t,delay:r}){const n=t.replace("{first_name}","John").replace("{last_name}","Doe").replace("{phone}","60123456789");return a.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg border border-gray-200",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:e}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"bg-green-600 p-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(zt,{className:"w-5 h-5 text-white"}),a.jsx("span",{className:"text-sm text-white",children:"WhatsApp Message"})]})}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"bg-green-50 rounded-lg p-3 text-sm",children:n}),a.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:["Will be sent ",r," day",r>1?"s":""," after trigger"]})]})]})]})}function Vx({onBack:e}){const{stores:t}=mr(),[r,n]=w.useState(""),[s,i]=w.useState(!0),[o,l]=w.useState(!1),[c,u]=w.useState({store_id:"",new_customer_enabled:!1,new_customer_delay:1,new_customer_message:"Hi {first_name}, thank you for your purchase! We hope you enjoy your items.",pending_payment_enabled:!1,pending_payment_delay:1,pending_payment_message:"Hi {first_name}, we noticed your payment is still pending. Need help?"});w.useEffect(()=>{r&&d()},[r]);const d=async()=>{try{const{data:h,error:m}=await L.from("whatsapp_followup_config").select("*").eq("store_id",r).single();if(m)if(m.code==="PGRST116"){const{data:x,error:v}=await L.from("whatsapp_followup_config").insert({store_id:r,new_customer_enabled:!1,new_customer_delay:1,new_customer_message:"Hi {first_name}, thank you for your purchase! We hope you enjoy your items.",pending_payment_enabled:!1,pending_payment_delay:1,pending_payment_message:"Hi {first_name}, we noticed your payment is still pending. Need help?"}).select().single();if(v)throw v;u(x)}else throw m;else u(h)}catch(h){console.error("Error fetching followup config:",h),E.error("Failed to load configuration")}finally{i(!1)}},f=async()=>{if(!r){E.error("Please select a store");return}l(!0);try{const{error:h}=await L.from("whatsapp_followup_config").upsert({...c,store_id:r,updated_at:new Date().toISOString()});if(h)throw h;E.success("Settings saved successfully")}catch(h){console.error("Error saving followup config:",h),E.error("Failed to save settings")}finally{l(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-50 pb-32",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[a.jsx(nt,{className:"w-4 h-4"}),a.jsx("span",{children:"Back to Tools"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(zt,{className:"w-5 h-5 text-green-600"})}),a.jsx("h1",{className:"text-xl font-semibold",children:"WhatsApp Auto-followup"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Store *"}),a.jsxs("div",{className:"relative",children:[a.jsx(ur,{className:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"}),a.jsxs("select",{value:r,onChange:h=>n(h.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,children:[a.jsx("option",{value:"",children:"Choose a store"}),t.map(h=>a.jsx("option",{value:h.id,children:h.name},h.id))]})]})]}),r&&!s&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsx(hu,{title:"New Customer Follow-up",description:"Send a welcome message to new customers",config:{enabled:c.new_customer_enabled,delay:c.new_customer_delay,message:c.new_customer_message},onChange:h=>u(m=>({...m,new_customer_enabled:h.enabled,new_customer_delay:h.delay,new_customer_message:h.message}))}),a.jsx(hu,{title:"Pending Payment Follow-up",description:"Send a reminder for pending payments",config:{enabled:c.pending_payment_enabled,delay:c.pending_payment_delay,message:c.pending_payment_message},onChange:h=>u(m=>({...m,pending_payment_enabled:h.enabled,pending_payment_delay:h.delay,pending_payment_message:h.message}))})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.new_customer_enabled&&a.jsx(fu,{title:"New Customer Message Preview",message:c.new_customer_message,delay:c.new_customer_delay}),c.pending_payment_enabled&&a.jsx(fu,{title:"Pending Payment Message Preview",message:c.pending_payment_message,delay:c.pending_payment_delay})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{onClick:f,disabled:o,className:"w-full flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Saving..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Hn,{className:"w-4 h-4"}),a.jsx("span",{children:"Save Auto-followup Settings"})]})})})]})]})]})]})})}function Wx({onNavigate:e}){const[t,r]=w.useState("main"),n=i=>{r(i)},s=()=>{r("main")};return t==="loyalty-stamp"?a.jsx(Ax,{onBack:s}):t==="loyalty-points"?a.jsx(Rx,{onBack:s}):t==="lucky-draw"?a.jsx(Ux,{onBack:s}):t==="whatsapp-blaster"?a.jsx(Bx,{onBack:s}):t==="whatsapp-followup"?a.jsx(Vx,{onBack:s}):a.jsx("div",{className:"min-h-screen bg-gray-50 pb-32",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-8 pb-32",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Tools"}),a.jsxs(du,{title:"Loyalty",icon:Hr,children:[a.jsx(hn,{title:"Loyalty Stamp",description:"Create and manage digital loyalty stamp cards",icon:Hr,onClick:()=>n("loyalty-stamp")}),a.jsx(hn,{title:"Loyalty Points",description:"Set up points-based rewards program",icon:jl,onClick:()=>n("loyalty-points")}),a.jsx(hn,{title:"Lucky Draw",description:"Run exciting lucky draw campaigns",icon:Ri,onClick:()=>n("lucky-draw")})]}),a.jsxs(du,{title:"Monetization",icon:Ph,children:[a.jsx(hn,{title:"WhatsApp Blaster",description:"Send bulk WhatsApp messages to your customers",icon:zt,onClick:()=>n("whatsapp-blaster")}),a.jsx(hn,{title:"WhatsApp Auto-Followup",description:"Automate follow-up messages to customers",icon:Eh,onClick:()=>n("whatsapp-followup")})]})]})})}function Hx({customer:e,onDelete:t}){const[r,n]=w.useState(!1),[s,i]=w.useState(!1),o=async l=>{if(l.stopPropagation(),!!confirm("Are you sure you want to delete this customer? This action cannot be undone.")){i(!0);try{const{error:c}=await L.from("customers").delete().eq("id",e.id);if(c)throw c;E.success("Customer deleted successfully"),t()}catch(c){console.error("Error deleting customer:",c),E.error("Failed to delete customer")}finally{i(!1)}}};return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-3 sm:p-4 cursor-pointer hover:bg-gray-50",onClick:()=>n(!r),children:a.jsxs("div",{className:"flex items-start sm:items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("h3",{className:"text-sm sm:text-base font-medium text-gray-900 truncate",children:[e.first_name," ",e.last_name]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1.5 sm:gap-4 mt-1.5 sm:mt-2 text-xs sm:text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1 truncate",children:[a.jsx(Lh,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),a.jsx("span",{className:"truncate",children:e.phone})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Sl,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),e.orders_count," orders"]}),a.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[a.jsx(cg,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0"}),"RM ",e.last_order_amount.toLocaleString()]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:o,disabled:s,className:"p-1.5 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(El,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),a.jsx("button",{className:"p-1.5 hover:bg-gray-100 rounded-full flex-shrink-0",children:r?a.jsx(Hp,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400"}):a.jsx(Wp,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400"})})]})]})}),r&&a.jsx("div",{className:"px-3 sm:px-4 pb-3 sm:pb-4 pt-2 border-t border-gray-100",children:a.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm sm:text-base font-medium text-gray-900 mb-2 sm:mb-3",children:"Contact Information"}),a.jsxs("div",{className:"space-y-2 sm:space-y-3 text-xs sm:text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Ah,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"break-all",children:e.email})]}),a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Yp,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-gray-400 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("div",{children:e.address_line1}),e.address_line2&&a.jsx("div",{children:e.address_line2}),a.jsxs("div",{children:[e.city,", ",e.state," ",e.postcode]}),a.jsx("div",{children:e.country})]})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm sm:text-base font-medium text-gray-900 mb-2 sm:mb-3",children:"Order History"}),a.jsxs("div",{className:"space-y-2 sm:space-y-3 text-xs sm:text-sm text-gray-600",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-6",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"font-medium",children:"Total Spent:"})," ","RM ",e.total_spent.toLocaleString()]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("span",{className:"font-medium",children:"Last Order:"})," ",new Date(e.last_order_date).toLocaleDateString()]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Customer Since:"})," ",new Date(e.created_at).toLocaleDateString()]}),e.total_spent>0&&a.jsx("span",{className:"inline-flex items-center px-2 sm:px-2.5 py-0.5 sm:py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 mt-2",children:"Active Customer"})]})]})]})})]})}function Kx({storeFilter:e,searchQuery:t}){const{customers:r,isLoading:n,error:s,refetch:i}=cf(e,t);return n?a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:a.jsx("div",{className:"space-y-4",children:[...Array(3)].map((o,l)=>a.jsxs("div",{className:"animate-pulse bg-gray-100 rounded-lg p-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-3"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]})]},l))})}):s?a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:a.jsxs("p",{className:"text-red-500",children:["Error loading customers: ",s]})}):r.length===0?a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:a.jsx("p",{className:"text-gray-500",children:"No customers found"})}):a.jsx("div",{className:"space-y-4",children:r.map(o=>a.jsx(Hx,{customer:o,onDelete:i},o.id))})}function Qx({isOpen:e,onClose:t,onSuccess:r}){const[n,s]=w.useState(!1),{stores:i}=mr(),[o,l]=w.useState({store_id:"",first_name:"",last_name:"",email:"",phone:"",address_line1:"",address_line2:"",city:"",state:"",postcode:"",country:"MY",item:"",amount:""});if(!e)return null;const c=async u=>{u.preventDefault(),s(!0);try{if(!o.store_id||!o.first_name||!o.last_name||!o.phone)throw new Error("Please fill in all required fields");let d=o.phone.replace(/\D/g,"");if(d.startsWith("60")||(d="60"+d.replace(/^0+/,"")),!/^(60)(1[0-46-9])[0-9]{7,8}$/.test(d))throw new Error("Please enter a valid Malaysian phone number (e.g., 60123456789)");const h=parseFloat(o.amount);if(isNaN(h)||h<=0)throw new Error("Please enter a valid amount");const m=new Date().toISOString(),x=parseFloat(o.amount),{data:v,error:k}=await L.from("customers").select("*").eq("phone",d);if(k)throw k;let g;const p=(v==null?void 0:v[0])||{total_spent:0,orders_count:0},y={first_name:o.first_name,last_name:o.last_name,email:o.email||null,phone:d,address_line1:o.address_line1||null,address_line2:o.address_line2||null,city:o.city||null,state:o.state||null,postcode:o.postcode||null,country:o.country,total_spent:p.total_spent+x,orders_count:p.orders_count+1,last_order_date:m,last_order_amount:x,updated_at:m};if(v&&v.length>0){const S=v[0],{error:j}=await L.from("customers").update(y).eq("id",S.id);if(j)throw j;g=S.id,E.success("Customer information updated")}else{const{data:S,error:j}=await L.from("customers").insert({...y,store_id:o.store_id,created_at:m}).select().single();if(j)throw j;g=S.id,E.success("New customer added successfully")}const{error:b}=await L.from("orders").insert({customer_id:g,store_id:o.store_id,order_number:`ORD-${Date.now()}`,total_amount:h,status:"completed",item:o.item,created_at:m,updated_at:m});if(b)throw b;const{data:_}=await L.from("loyalty_stamp_cards").select("*").eq("store_id",o.store_id).eq("is_ended",!1).single();if(_&&parseFloat(o.amount)>=_.min_spend_per_stamp){const{data:S}=await L.from("loyalty_cards").select("stamps").eq("customer_id",g).eq("store_id",o.store_id).single(),C=((S==null?void 0:S.stamps)||0)+1,{error:A}=await L.from("loyalty_cards").upsert({customer_id:g,store_id:o.store_id,stamps:C,updated_at:m});if(A)throw A;try{await sendStampNotification(o.store_id,g,C,_.total_stamps)}catch(O){console.error("Failed to send stamp notification:",O)}}l({store_id:"",first_name:"",last_name:"",email:"",phone:"",address_line1:"",address_line2:"",city:"",state:"",postcode:"",country:"MY",item:"",amount:""}),r(),t()}catch(d){console.error("Error:",d),E.error(d instanceof Error?d.message:"Failed to add customer")}finally{s(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[a.jsx("h2",{className:"text-lg font-semibold",children:"Add New Customer"}),a.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full",children:a.jsx(Mi,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:c,className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store *"}),a.jsxs("div",{className:"relative",children:[a.jsx(ur,{className:"w-5 h-5 text-gray-400 absolute left-3 top-2"}),a.jsxs("select",{name:"store_id",required:!0,value:o.store_id,onChange:u=>l(d=>({...d,store_id:u.target.value})),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none",children:[a.jsx("option",{value:"",children:"Select a store"}),i.map(u=>a.jsx("option",{value:u.id,children:u.name},u.id))]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),a.jsx("input",{type:"text",name:"first_name",required:!0,value:o.first_name,onChange:u=>l(d=>({...d,first_name:u.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),a.jsx("input",{type:"text",name:"last_name",required:!0,value:o.last_name,onChange:u=>l(d=>({...d,last_name:u.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",name:"email",value:o.email,onChange:u=>l(d=>({...d,email:u.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone *"}),a.jsx("input",{type:"tel",name:"phone",placeholder:"e.g., 60123456789",required:!0,value:o.phone,onChange:u=>l(d=>({...d,phone:u.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter Malaysian phone number starting with 60 (e.g., 60123456789)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 1"}),a.jsx("input",{type:"text",name:"address_line1",value:o.address_line1,onChange:u=>l(d=>({...d,address_line1:u.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address Line 2"}),a.jsx("input",{type:"text",name:"address_line2",value:o.address_line2,onChange:u=>l(d=>({...d,address_line2:u.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),a.jsx("input",{type:"text",name:"city",value:o.city,onChange:u=>l(d=>({...d,city:u.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),a.jsx("input",{type:"text",name:"state",value:o.state,onChange:u=>l(d=>({...d,state:u.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Postcode"}),a.jsx("input",{type:"text",name:"postcode",value:o.postcode,onChange:u=>l(d=>({...d,postcode:u.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),a.jsx("input",{type:"text",name:"country",readOnly:!0,value:o.country,className:"w-full px-3 py-2 border rounded-lg bg-gray-50 cursor-not-allowed"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item *"}),a.jsx("input",{type:"text",name:"item",required:!0,value:o.item,onChange:u=>l(d=>({...d,item:u.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Item purchased"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount (RM) *"}),a.jsx("input",{type:"number",name:"amount",required:!0,min:"0",step:"0.01",value:o.amount,onChange:u=>l(d=>({...d,amount:u.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx("button",{type:"submit",disabled:n,className:"flex-1 sm:flex-none px-6 py-2.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:n?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Adding Customer..."})]}):"Confirm Add Customer"}),a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancel"})]})]})]})})}function Gx(){const[e,t]=w.useState(""),[r,n]=w.useState(""),[s,i]=w.useState(!1);return a.jsx("div",{className:"min-h-screen bg-gray-50 pb-32",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 sm:py-8",children:[a.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:"Customer Database"}),a.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[a.jsx(lg,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Add Customer"})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx("input",{type:"text",placeholder:"Search customers...",className:"pl-10 pr-4 py-2.5 text-sm sm:text-base border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full",value:r,onChange:o=>n(o.target.value)}),a.jsx(tg,{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400 absolute left-3 top-3"})]}),a.jsx(of,{selectedStore:e,onStoreChange:t})]})]}),a.jsx(Kx,{storeFilter:e,searchQuery:r}),a.jsx(Qx,{isOpen:s,onClose:()=>i(!1),onSuccess:()=>{i(!1),n(o=>o+" "),setTimeout(()=>n(o=>o.trim()),100)}})]})})}function Ps({title:e,icon:t,children:r}){return a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(t,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:e})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r})]})}function vr({title:e,description:t,icon:r,onClick:n}){return a.jsx("button",{onClick:n,className:"w-full bg-white p-4 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 text-left",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:a.jsx(r,{className:"w-6 h-6 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:e}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t})]})]})})}function Jx({store:e,onClose:t,onSuccess:r}){const[n,s]=w.useState(!1),[i,o]=w.useState({name:"",url:""});w.useEffect(()=>{o(e?{name:e.name,url:e.url||""}:{name:"",url:""})},[e]);const l=async c=>{c.preventDefault(),s(!0);try{const{data:{user:u}}=await L.auth.getUser();if(!u){E.error("You must be logged in to perform this action");return}const d=new Date().toISOString();if(e!=null&&e.id){const{error:f}=await L.from("stores").update({name:i.name,url:i.url||null,updated_at:d}).eq("id",e.id);if(f)throw f;E.success("Store updated successfully")}else{const{error:f}=await L.from("stores").insert({name:i.name,url:i.url||null,user_id:u.id,created_at:d,updated_at:d});if(f)throw f;E.success("Store added successfully")}r()}catch(u){console.error("Error saving store:",u),E.error(u instanceof Error?u.message:"Failed to save store")}finally{s(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[a.jsx("h2",{className:"text-lg font-semibold",children:e?"Edit Store":"Add New Store"}),a.jsx("button",{onClick:t,className:"p-1 hover:bg-gray-100 rounded-full",children:a.jsx(Mi,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:l,className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store Name *"}),a.jsxs("div",{className:"relative",children:[a.jsx(ur,{className:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"}),a.jsx("input",{type:"text",required:!0,value:i.name,onChange:c=>o(u=>({...u,name:c.target.value})),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter store name"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Store URL"}),a.jsxs("div",{className:"relative",children:[a.jsx(Nl,{className:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"}),a.jsx("input",{type:"url",value:i.url,onChange:c=>o(u=>({...u,url:c.target.value})),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://your-store.com"})]})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[a.jsx("button",{type:"submit",disabled:n,className:"px-6 py-2.5 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:n?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:e?"Updating...":"Adding..."})]}):e?"Update Store":"Add Store"}),a.jsx("button",{type:"button",onClick:t,className:"px-6 py-2.5 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancel"})]})]})]})})}function Yx(){const{stores:e,isLoading:t,error:r,refetch:n,canAddStore:s,storeLimit:i}=mr(),[o,l]=w.useState(),[c,u]=w.useState(!1),d=async f=>{if(confirm("Are you sure you want to delete this store? This action cannot be undone."))try{const{error:h}=await L.from("stores").delete().eq("id",f);if(h)throw h;E.success("Store deleted successfully"),n()}catch(h){console.error("Error deleting store:",h),E.error("Failed to delete store")}};return t?a.jsx("div",{className:"space-y-4",children:[...Array(3)].map((f,h)=>a.jsxs("div",{className:"animate-pulse bg-white p-4 rounded-xl shadow-sm",children:[a.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4 mb-3"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]},h))}):r?a.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg",children:["Error loading stores: ",r]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("button",{onClick:()=>{if(!s){E.error(`Your plan allows a maximum of ${i} store${i===1?"":"s"}. Please upgrade to add more stores.`);return}l(void 0),u(!0)},className:`w-full bg-white p-4 rounded-xl shadow-sm transition-all duration-200 border-2 border-dashed ${s?"hover:shadow-md border-gray-300 hover:border-blue-500 cursor-pointer":"border-red-200 cursor-not-allowed opacity-75"} text-center`,disabled:!s,children:a.jsxs("div",{className:"flex items-center justify-center gap-2 text-gray-600 hover:text-blue-600",children:[a.jsx(ur,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:s?"Add New Store":`Store Limit Reached (${e.length}/${i})`})]})}),e.map(f=>a.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-gray-900",children:f.name}),f.url&&a.jsx("a",{href:f.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline mt-1 block",children:f.url})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{l(f),u(!0)},className:"p-1.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:a.jsx(Zp,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>d(f.id),className:"p-1.5 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded-lg",children:a.jsx(El,{className:"w-4 h-4"})})]})]})},f.id)),c&&a.jsx(Jx,{store:o,onClose:()=>u(!1),onSuccess:()=>{u(!1),n()}})]})}function Xx({onBack:e}){return a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-3xl mx-auto p-8 pb-32",children:[a.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[a.jsx(nt,{className:"w-4 h-4"}),a.jsx("span",{children:"Back to Settings"})]}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Store Management"}),a.jsx("p",{className:"text-gray-500 mt-2",children:"Add, edit, or remove your store locations and manage their WooCommerce integrations."})]}),a.jsx(Yx,{})]})})}function Zx({onBack:e}){const[t,r]=w.useState(!1),[n,s]=w.useState(!1),[i,o]=w.useState(!1),[l,c]=w.useState(!1),[u,d]=w.useState({currentPassword:"",newPassword:"",confirmPassword:""}),f=async h=>{if(h.preventDefault(),u.newPassword!==u.confirmPassword){E.error("New passwords do not match");return}if(u.newPassword.length<6){E.error("New password must be at least 6 characters long");return}r(!0);try{const{error:m}=await L.auth.updateUser({password:u.newPassword});if(m)throw m;E.success("Password updated successfully"),d({currentPassword:"",newPassword:"",confirmPassword:""}),e()}catch(m){console.error("Error updating password:",m),E.error(m instanceof Error?m.message:"Failed to update password")}finally{r(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-2xl mx-auto p-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[a.jsx(nt,{className:"w-4 h-4"}),a.jsx("span",{children:"Back to Settings"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(kl,{className:"w-5 h-5 text-blue-600"})}),a.jsx("h1",{className:"text-xl font-semibold",children:"Change Password"})]}),a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:n?"text":"password",required:!0,value:u.currentPassword,onChange:h=>d(m=>({...m,currentPassword:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10"}),a.jsx("button",{type:"button",onClick:()=>s(!n),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:n?a.jsx(Bs,{className:"w-5 h-5"}):a.jsx(qs,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:i?"text":"password",required:!0,value:u.newPassword,onChange:h=>d(m=>({...m,newPassword:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10"}),a.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:i?a.jsx(Bs,{className:"w-5 h-5"}):a.jsx(qs,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:l?"text":"password",required:!0,value:u.confirmPassword,onChange:h=>d(m=>({...m,confirmPassword:h.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 pr-10"}),a.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-2.5 text-gray-400 hover:text-gray-600",children:l?a.jsx(Bs,{className:"w-5 h-5"}):a.jsx(qs,{className:"w-5 h-5"})})]})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{type:"submit",disabled:t,className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:t?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Updating Password..."})]}):"Update Password"})})]})]})]})})}function ev({onBack:e}){const{user:t}=Ol(),[r,n]=w.useState(!1),[s,i]=w.useState({name:"",email:"",role:""}),o=async l=>{l.preventDefault(),n(!0);try{const{error:c}=await L.from("users").update({name:s.name||(t==null?void 0:t.name),email:s.email||(t==null?void 0:t.email),role:s.role||(t==null?void 0:t.role),updated_at:new Date().toISOString()}).eq("id",t==null?void 0:t.id);if(c)throw c;E.success("Profile updated successfully"),i({name:"",email:"",role:""})}catch(c){console.error("Error updating profile:",c),E.error("Failed to update profile")}finally{n(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-2xl mx-auto p-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[a.jsx(nt,{className:"w-4 h-4"}),a.jsx("span",{children:"Back to Settings"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(xo,{className:"w-5 h-5 text-blue-600"})}),a.jsx("h1",{className:"text-xl font-semibold",children:"Profile Information"})]}),a.jsxs("form",{onSubmit:o,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User ID"}),a.jsx("input",{type:"text",value:(t==null?void 0:t.id)||"",readOnly:!0,className:"w-full px-3 py-2 bg-gray-50 border rounded-lg text-gray-500 cursor-not-allowed"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This is your unique identifier in the system"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{type:"text",required:!0,value:s.name,onChange:l=>i(c=>({...c,name:l.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:(t==null?void 0:t.name)||""})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),a.jsx("input",{type:"email",required:!0,value:s.email,onChange:l=>i(c=>({...c,email:l.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:(t==null?void 0:t.email)||""})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),a.jsxs("select",{value:s.role||(t==null?void 0:t.role)||"user",onChange:l=>i(c=>({...c,role:l.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-gray-50 cursor-not-allowed",disabled:!0,children:[a.jsx("option",{value:"user",children:"User"}),a.jsx("option",{value:"admin",children:"Admin"})]})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{type:"submit",disabled:r,className:"w-full px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Updating Profile..."})]}):"Update Profile"})})]})]})]})})}function tv({onBack:e}){const[t,r]=w.useState(!1),[n,s]=w.useState(!1),[i,o]=w.useState(""),[l,c]=w.useState([]);w.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:h,error:m}=await L.from("stores").select("id, name, api_key");if(m)throw m;c(h||[]),(h==null?void 0:h.length)===1&&o(h[0].id)}catch(h){console.error("Error fetching stores:",h),E.error("Failed to load stores")}},d=async h=>{if(h.preventDefault(),!i){E.error("Please select a store");return}const x=new FormData(h.currentTarget).get("apiKey");r(!0);try{const{error:v}=await L.from("stores").update({api_key:x}).eq("id",i);if(v)throw v;E.success("WhatsApp API key updated successfully"),await u()}catch(v){console.error("Error updating API key:",v),E.error("Failed to update API key")}finally{r(!1)}},f=l.find(h=>h.id===i);return a.jsx("div",{className:"min-h-screen bg-gray-50 pb-32",children:a.jsxs("div",{className:"max-w-2xl mx-auto p-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[a.jsx(nt,{className:"w-4 h-4"}),a.jsx("span",{children:"Back to Settings"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:a.jsx(zt,{className:"w-5 h-5 text-green-600"})}),a.jsx("h1",{className:"text-xl font-semibold",children:"WhatsApp API Settings"})]}),a.jsxs("form",{onSubmit:d,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Store"}),a.jsxs("select",{value:i,onChange:h=>o(h.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",required:!0,children:[a.jsx("option",{value:"",children:"Choose a store"}),l.map(h=>a.jsx("option",{value:h.id,children:h.name},h.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"OnSend.io API Key"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(kl,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:n?"text":"password",name:"apiKey",required:!0,defaultValue:(f==null?void 0:f.api_key)||"",className:"w-full pl-10 pr-12 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Enter your OnSend.io API key"}),a.jsx("button",{type:"button",onClick:()=>s(!n),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:n?a.jsx(Bs,{className:"h-5 w-5 text-gray-400"}):a.jsx(qs,{className:"h-5 w-5 text-gray-400"})})]}),a.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Get your API key from ",a.jsx("a",{href:"https://onsend.io/r/loopify",target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700",children:"OnSend.io"})]})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Important Notes:"}),a.jsxs("ul",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[a.jsx("li",{children:"• Your API key is securely stored and encrypted"}),a.jsx("li",{children:"• Required for sending WhatsApp messages through the platform"}),a.jsx("li",{children:"• Message charges are based on OnSend.io's pricing"})]})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{type:"submit",disabled:t||!i,className:"w-full px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:t?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Saving..."})]}):"Save API Key"})})]})]})]})})}async function rv(e){try{const t=await fetch(`${e.url}/wp-json/wc/v3/orders?per_page=100&status=completed`,{headers:{Authorization:"Basic "+btoa(`${e.consumerKey}:${e.consumerSecret}`)}});if(!t.ok)throw new Error(`HTTP error fetching orders! status: ${t.status}`);const r=await t.json(),n=await fetch(`${e.url}/wp-json/wc/v3/customers?per_page=100`,{headers:{Authorization:"Basic "+btoa(`${e.consumerKey}:${e.consumerSecret}`)}});if(!n.ok)throw new Error(`HTTP error fetching customers! status: ${n.status}`);return(await n.json()).map(i=>{const o=r.filter(u=>u.customer_id===i.id),l=o.reduce((u,d)=>u+parseFloat(d.total),0),c=o.sort((u,d)=>new Date(d.date_created).getTime()-new Date(u.date_created).getTime())[0];return{...i,orders_count:o.length,total_spent:l,last_order_date:(c==null?void 0:c.date_created)||null,last_order_amount:c?parseFloat(c.total):0}})}catch(t){throw console.error("Error fetching WooCommerce customers:",t),t}}async function nv(e,t){try{const r=new Date().toISOString(),n=t.map(i=>{const o=i.last_order_date?new Date(i.last_order_date):null;return o&&o.setHours(o.getHours()+8),{store_id:e,first_name:i.first_name,last_name:i.last_name,email:i.email,phone:sv(i.billing.phone),address_line1:i.billing.address_1,address_line2:i.billing.address_2||null,city:i.billing.city,state:i.billing.state,postcode:i.billing.postcode,country:i.billing.country,total_spent:i.total_spent||0,orders_count:i.orders_count||0,last_order_date:(o==null?void 0:o.toISOString())||null,last_order_amount:i.last_order_amount||0,created_at:r,updated_at:r}}),s=50;for(let i=0;i<n.length;i+=s){const o=n.slice(i,i+s),{error:l}=await L.from("customers").upsert(o,{onConflict:"store_id,phone",ignoreDuplicates:!1});if(l)throw console.error("Error upserting batch:",l),l}}catch(r){throw console.error("Error syncing customers:",r),r}}function sv(e){let t=e.replace(/\D/g,"");return t.startsWith("60")||(t="60"+t.replace(/^0+/,"")),t}function iv({onBack:e}){const[t,r]=w.useState(!1),[n,s]=w.useState(!1),[i,o]=w.useState(""),[l,c]=w.useState([]);w.useEffect(()=>{u()},[]);const u=async()=>{try{const{data:m,error:x}=await L.from("stores").select("id, name, url, woo_consumer_key, woo_consumer_secret");if(x)throw x;c(m||[]),(m==null?void 0:m.length)===1&&o(m[0].id)}catch(m){console.error("Error fetching stores:",m),E.error("Failed to load stores")}},d=async m=>{if(m.preventDefault(),!i){E.error("Please select a store");return}const x=new FormData(m.currentTarget),v=x.get("url"),k=x.get("consumerKey"),g=x.get("consumerSecret");r(!0);try{const{error:p}=await L.from("stores").update({url:v,woo_consumer_key:k,woo_consumer_secret:g}).eq("id",i);if(p)throw p;E.success("WooCommerce settings updated successfully"),await u()}catch(p){console.error("Error updating WooCommerce settings:",p),E.error("Failed to update settings")}finally{r(!1)}},f=async()=>{const m=l.find(v=>v.id===i);if(!(m!=null&&m.url)||!(m!=null&&m.woo_consumer_key)||!(m!=null&&m.woo_consumer_secret)){E.error("Please configure WooCommerce settings first");return}s(!0);let x=E.loading("Starting sync...");try{const v=await rv({url:m.url,consumerKey:m.woo_consumer_key,consumerSecret:m.woo_consumer_secret});E.loading("Fetched customers, syncing to database...",{id:x}),await nv(m.id,v),E.success(`Successfully synced ${v.length} customers`,{id:x})}catch(v){console.error("Error syncing customers:",v),E.error("Failed to sync customers: "+(v instanceof Error?v.message:"Unknown error"),{id:x})}finally{s(!1)}},h=l.find(m=>m.id===i);return a.jsx("div",{className:"min-h-screen bg-gray-50 pb-32",children:a.jsxs("div",{className:"max-w-2xl mx-auto p-8",children:[a.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6",children:[a.jsx(nt,{className:"w-4 h-4"}),a.jsx("span",{children:"Back to Settings"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:a.jsx(Nl,{className:"w-5 h-5 text-blue-600"})}),a.jsx("h1",{className:"text-xl font-semibold",children:"WooCommerce Integration"})]}),a.jsxs("form",{onSubmit:d,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Store"}),a.jsxs("select",{value:i,onChange:m=>o(m.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Choose a store"}),l.map(m=>a.jsx("option",{value:m.id,children:m.name},m.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"WooCommerce Store URL"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(ur,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{type:"url",name:"url",required:!0,defaultValue:(h==null?void 0:h.url)||"",className:"w-full pl-10 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"https://your-store.com"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Consumer Key"}),a.jsx("input",{type:"text",name:"consumerKey",required:!0,defaultValue:(h==null?void 0:h.woo_consumer_key)||"",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your WooCommerce consumer key"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Consumer Secret"}),a.jsx("input",{type:"password",name:"consumerSecret",required:!0,defaultValue:(h==null?void 0:h.woo_consumer_secret)||"",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your WooCommerce consumer secret"})]}),a.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Integration Steps:"}),a.jsxs("ol",{className:"mt-2 text-sm text-gray-600 space-y-1 list-decimal list-inside",children:[a.jsx("li",{children:"Go to WooCommerce → Settings → Advanced → REST API"}),a.jsx("li",{children:'Click "Add Key" to create new API credentials'}),a.jsx("li",{children:'Set permissions to "Read" if you only want to sync customers'}),a.jsx("li",{children:"Copy the Consumer Key and Consumer Secret"}),a.jsx("li",{children:"Paste them in the fields above"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"submit",disabled:t||!i,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:t?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Saving..."})]}):"Save Settings"}),a.jsx("button",{type:"button",onClick:f,disabled:n||!(h!=null&&h.url),className:"px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-lg hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Syncing..."})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(eg,{className:"w-4 h-4"}),a.jsx("span",{children:"Sync Customers"})]})})]})]})]})]})})}function av(){const{user:e,logout:t}=Ol(),[r,n]=w.useState("main"),s=async()=>{try{await t(),E.success("Logged out successfully")}catch{E.error("Failed to logout")}};return r==="stores"?a.jsx(Xx,{onBack:()=>n("main")}):r==="change-password"?a.jsx(Zx,{onBack:()=>n("main")}):r==="profile"?a.jsx(ev,{onBack:()=>n("main")}):r==="whatsapp-api"?a.jsx(tv,{onBack:()=>n("main")}):r==="woocommerce"?a.jsx(iv,{onBack:()=>n("main")}):a.jsx("div",{className:"min-h-screen bg-gray-50 pb-32",children:a.jsxs("div",{className:"max-w-7xl mx-auto p-8 pb-32",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Settings"}),a.jsxs(Ps,{title:"Account",icon:xo,children:[a.jsx(vr,{title:"Profile Information",description:"Update your account details and preferences",icon:xo,onClick:()=>n("profile")}),a.jsx(vr,{title:"Change Password",description:"Update your password and security settings",icon:kl,onClick:()=>n("change-password")})]}),a.jsxs(Ps,{title:"Store Management",icon:ur,children:[a.jsx(vr,{title:"Manage Stores",description:"Add, edit, or remove your store locations",icon:Bp,onClick:()=>n("stores")}),a.jsx(vr,{title:"WooCommerce Integration",description:"Connect and manage your WooCommerce stores",icon:Nl,onClick:()=>n("woocommerce")})]}),a.jsx(Ps,{title:"Notifications",icon:Up,children:a.jsx(vr,{title:"WhatsApp API",description:"Manage your WhatsApp API settings",icon:zt,onClick:()=>n("whatsapp-api")})}),a.jsx(Ps,{title:"Security",icon:sg,children:a.jsx(vr,{title:"Logout",description:"Sign out of your account",icon:Jp,onClick:s})})]})})}function ov({onSignIn:e}){const[t,r]=w.useState(""),[n,s]=w.useState(!1),i=async o=>{if(o.preventDefault(),!t.trim()){E.error("Please enter your phone number");return}let l=t.replace(/\D/g,"");if(l.startsWith("60")||(l="60"+l.replace(/^0+/,"")),!/^(60)(1[0-46-9])[0-9]{7,8}$/.test(l)){E.error("Please enter a valid Malaysian phone number (e.g., 60123456789)");return}s(!0);try{const{data:u,error:d}=await L.from("customers").select("phone").eq("phone",l).limit(1);if(d)throw d;if(!(u!=null&&u.length)){E.error("Phone number not found. Please make a purchase first.");return}e(l),E.success("Signed in successfully")}catch(u){console.error("Error signing in:",u),E.error("Failed to sign in")}finally{s(!1)}};return a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"View Your Loyalty Card"}),a.jsxs("form",{onSubmit:i,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),a.jsxs("div",{className:"relative",children:[a.jsx(Lh,{className:"w-5 h-5 text-gray-400 absolute left-3 top-2.5"}),a.jsx("input",{type:"tel",value:t,onChange:o=>r(o.target.value),placeholder:"e.g., 60123456789",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter your Malaysian phone number starting with 60"})]}),a.jsx("button",{type:"submit",disabled:n,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Signing In..."})]}):"View Loyalty Card"})]})]})}function lv({totalStamps:e,collectedStamps:t,reward:r,expiryDate:n}){return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-600 p-6 text-white relative",children:[a.jsx("h2",{className:"text-xl font-bold mb-2",children:"Your Loyalty Card"}),a.jsx("p",{className:"text-sm text-blue-100",children:"Collect stamps with every purchase"}),t>=e&&a.jsx("div",{className:"absolute top-0 right-0 bg-yellow-400 text-gray-900 px-3 py-1 rounded-bl-lg font-medium text-sm",children:"Reward Earned!"})]}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:`grid gap-4 mb-6 ${e<=12?"grid-cols-4":"grid-cols-5"}`,children:Array.from({length:e}).map((s,i)=>a.jsx("div",{className:`aspect-square rounded-full flex items-center justify-center border-2 transition-all ${i<t?"border-blue-500 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:a.jsx(Hr,{className:`w-6 h-6 ${i<t?"text-blue-500":"text-gray-300"}`})},i))}),a.jsxs("div",{className:"text-center mb-6",children:[a.jsxs("p",{className:"text-gray-600",children:[a.jsx("span",{className:"font-semibold text-gray-800",children:t}),a.jsx("span",{className:"mx-1",children:"/"}),a.jsx("span",{className:"font-semibold text-gray-800",children:e}),a.jsx("span",{className:"ml-1",children:"stamps collected"})]}),n&&a.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Valid until ",new Date(n).toLocaleDateString()]})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[a.jsx("p",{className:"text-sm font-medium text-blue-900",children:r}),t>=e&&a.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Show this card to claim your reward!"})]})]})]})}function cv(){const[e,t]=w.useState(null),[r,n]=w.useState(null),[s,i]=w.useState(!0),[o,l]=w.useState(null);w.useEffect(()=>{e?c(e):i(!1)},[e]);const c=async u=>{try{const{data:d,error:f}=await L.from("customers").select("*").eq("phone",u).single();if(f)throw f;const{data:h,error:m}=await L.from("loyalty_stamp_cards").select("*").eq("store_id",d.store_id).eq("is_ended",!1).single();if(m&&m.code!=="PGRST116")throw m;l(h);const{data:x,error:v}=await L.from("loyalty_cards").select("*").eq("customer_id",d.id).eq("store_id",d.store_id).single();if(v&&v.code==="PGRST116"){const{data:k,error:g}=await L.from("loyalty_cards").insert({customer_id:d.id,store_id:d.store_id,stamps:0,created_at:new Date().toISOString()}).select().single();if(g)throw g;n({id:d.id,first_name:d.first_name,last_name:d.last_name,store_id:d.store_id,stamps:k.stamps})}else{if(v)throw v;n({id:d.id,first_name:d.first_name,last_name:d.last_name,store_id:d.store_id,stamps:x.stamps||0})}}catch(d){console.error("Error fetching customer data:",d),E.error("Failed to load customer data")}finally{i(!1)}};return s?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"})}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsx("div",{className:"w-full max-w-md",children:e?r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"mb-4 text-center",children:a.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome, ",r.first_name,"!"]})}),a.jsx(lv,{totalStamps:(o==null?void 0:o.total_stamps)||12,collectedStamps:r.stamps,reward:(o==null?void 0:o.reward)||"Collect all stamps to earn rewards!",expiryDate:o==null?void 0:o.end_date}),a.jsx("button",{onClick:()=>t(null),className:"w-full mt-4 px-4 py-2 text-gray-600 hover:text-gray-900",children:"Sign Out"})]}):a.jsx("div",{className:"text-center text-gray-500",children:"No customer data found"}):a.jsx(ov,{onSignIn:t})})})}function uv({icon:e,label:t,isActive:r=!1,onClick:n}){return a.jsxs("button",{onClick:n,className:`flex flex-col items-center justify-center p-3 flex-1 transition-all duration-200 ${r?"bg-white text-blue-600 scale-110 shadow-lg rounded-xl":"text-gray-400 hover:text-blue-600 hover:bg-white/90 hover:scale-105"}`,children:[a.jsx(e,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs mt-1 font-medium",children:t})]})}const dv=[{id:"home",icon:Qp,label:"Home"},{id:"tools",icon:ug,label:"Tools"},{id:"database",icon:Ph,label:"Database"},{id:"settings",icon:ng,label:"Settings"}];function hv({activeItem:e,onNavigate:t}){return a.jsx("div",{className:"fixed bottom-4 sm:bottom-6 left-0 right-0 px-4 sm:px-6 z-50",children:a.jsx("div",{className:"flex items-center bg-gray-900/90 backdrop-blur-lg rounded-2xl shadow-xl max-w-lg mx-auto",children:dv.map(r=>a.jsx(uv,{icon:r.icon,label:r.label,isActive:e===r.id,onClick:()=>t(r.id)},r.id))})})}function fv(){const[e,t]=Jt.useState(!1);Jt.useState(!1);const{user:r,login:n,isLoading:s}=Ol(),[i,o]=Jt.useState("home"),[l,c]=Jt.useState({email:"",password:""});Jt.useEffect(()=>{r&&(o("home"),t(!1))},[r]);const u=async d=>{if(d.preventDefault(),!l.email||!l.password){E.error("Please enter both email and password");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)){E.error("Please enter a valid email address");return}try{await n(l.email,l.password)||E.error("Invalid email or password")}catch{E.error("An unexpected error occurred. Please try again later.")}};return r?a.jsxs(a.Fragment,{children:[i==="tools"&&a.jsx(Wx,{onNavigate:o}),i==="database"&&a.jsx(Gx,{}),i==="settings"&&a.jsx(av,{}),i==="customer"&&a.jsx(cv,{}),i==="home"&&a.jsx(Ex,{}),a.jsx(hv,{onNavigate:o,activeItem:i}),a.jsx(uu,{position:"top-right"})]}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-white",children:[a.jsx(uu,{position:"top-right"}),e&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md overflow-hidden",children:[a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"mx-auto h-12 w-12 bg-blue-600 rounded-lg flex items-center justify-center mb-4",children:a.jsx(qc,{className:"h-6 w-6 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Sign in to your account"})]}),a.jsxs("form",{onSubmit:u,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Ah,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:l.email,onChange:d=>c(f=>({...f,email:d.target.value})),className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 rounded-lg placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Email address"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(qc,{className:"h-5 w-5 text-gray-400"})}),a.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:l.password,onChange:d=>c(f=>({...f,password:d.target.value})),className:"appearance-none block w-full px-3 py-2 pl-10 border border-gray-300 rounded-lg placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Password"})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:s,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:s?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a.jsx("span",{children:"Signing in..."})]}):"Sign in"})})]})]}),a.jsx("div",{className:"px-8 py-4 bg-gray-50 border-t border-gray-100",children:a.jsx("button",{onClick:()=>t(!1),className:"w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",children:"Cancel"})})]})}),a.jsx(lx,{onShowLogin:()=>t(!0)}),a.jsx(cx,{}),a.jsx(ux,{}),a.jsx(dx,{}),a.jsx(hx,{}),a.jsx(mx,{}),a.jsx(gx,{}),a.jsx(yx,{}),a.jsx(xx,{})]})}Sh(document.getElementById("root")).render(a.jsx(w.StrictMode,{children:a.jsx(fv,{})}));export{uf as g};
